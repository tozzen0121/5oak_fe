import{r as o,P as ie,a3 as Kt,j as e,M as he,aV as vt,am as Mt,G as ne,p as j,T as f,L as se,d as te,aB as qt,B as _t,aO as pt,aP as zt,D as ht,aS as Yt,a9 as gt,I as yt,Z as Qt,x as Me,H as Ye}from"./index-d0b17951.js";import{C as Ht}from"./ComponentSkeleton-f03cc944.js";import{L as mt}from"./LoadingButton-45879bf8.js";import{_ as we}from"./react-apexcharts.min-7beaa26f.js";import{u as Vt,S as Xt,f as ft,b as Zt}from"./ScrollX-00dab5a6.js";import"./Filter-45f8d73b.js";import{E as Jt,R as es}from"./RowEditable-5084598a.js";import"./LinearWithLabel-6febc93f.js";import{T as ts,a as ss,b as ns}from"./TableContainer-75c619ee.js";import{T as as}from"./TableHead-8e2726af.js";import{T as Dt}from"./TableRow-268bbf52.js";import{T as jt}from"./TableCell-345434c5.js";import{S as rs}from"./Slider-e8b8f8e8.js";import{S as is}from"./SendOutlined-76e046b2.js";import"./Skeleton-84a6586b.js";import"./DownloadOutlined-848f0ea3.js";import"./CaretUpOutlined-6d609e45.js";import"./CaretDownOutlined-b5faa291.js";import"./Pagination-71b20370.js";import"./index-68b0537f.js";import"./Checkbox-9309c8e8.js";import"./MinusOutlined-d0cda07d.js";import"./visuallyHidden-14c3de6e.js";function os(g,c,h,ee){var L=this,S=o.useRef(null),V=o.useRef(0),O=o.useRef(0),E=o.useRef(null),D=o.useRef([]),R=o.useRef(),M=o.useRef(),v=o.useRef(g),q=o.useRef(!0);v.current=g;var oe=typeof window<"u",le=!c&&c!==0&&oe;if(typeof g!="function")throw new TypeError("Expected a function");c=+c||0;var ge=!!(h=h||{}).leading,Ae=!("trailing"in h)||!!h.trailing,de="maxWait"in h,l="debounceOnServer"in h&&!!h.debounceOnServer,x=de?Math.max(+h.maxWait||0,c):null;o.useEffect(function(){return q.current=!0,function(){q.current=!1}},[]);var Y=o.useMemo(function(){var Q=function(_){var H=D.current,r=R.current;return D.current=R.current=null,V.current=_,O.current=O.current||_,M.current=v.current.apply(r,H)},X=function(_,H){le&&cancelAnimationFrame(E.current),E.current=le?requestAnimationFrame(_):setTimeout(_,H)},Ge=function(_){if(!q.current)return!1;var H=_-S.current;return!S.current||H>=c||H<0||de&&_-V.current>=x},Re=function(_){return E.current=null,Ae&&D.current?Q(_):(D.current=R.current=null,M.current)},ye=function _(){var H=Date.now();if(ge&&O.current===V.current&&Ue(),Ge(H))return Re(H);if(q.current){var r=c-(H-S.current),a=de?Math.min(r,x-(H-V.current)):r;X(_,a)}},Ue=function(){ee&&ee({})},ce=function(){if(oe||l){var _=Date.now(),H=Ge(_);if(D.current=[].slice.call(arguments),R.current=L,S.current=_,H){if(!E.current&&q.current)return V.current=S.current,X(ye,c),ge?Q(S.current):M.current;if(de)return X(ye,c),Q(S.current)}return E.current||X(ye,c),M.current}};return ce.cancel=function(){E.current&&(le?cancelAnimationFrame(E.current):clearTimeout(E.current)),V.current=0,D.current=S.current=R.current=E.current=null},ce.isPending=function(){return!!E.current},ce.flush=function(){return E.current?Re(Date.now()):M.current},ce},[ge,de,c,x,Ae,le,oe,l,ee]);return Y}const St=({row:g,table:c})=>{var S;const h=(S=c==null?void 0:c.options)==null?void 0:S.meta,ee=V=>{h==null||h.setSelectedRow(O=>({...O,[g.id]:!O[g.id]})),h==null||h.revertData(g.index,(V==null?void 0:V.currentTarget.name)==="cancel")},L=()=>{h==null||h.saveData(g.index)};return e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",children:[(h==null?void 0:h.selectedRow[g.id])&&e.jsx(gt,{title:"Cancel",children:e.jsx(yt,{color:"error",name:"cancel",onClick:ee,children:e.jsx(Qt,{})})}),e.jsx(gt,{title:h!=null&&h.selectedRow[g.id]?"Save":"Edit",children:e.jsx(yt,{color:h!=null&&h.selectedRow[g.id]?"success":"primary",onClick:h!=null&&h.selectedRow[g.id]?L:ee,children:h!=null&&h.selectedRow[g.id]?e.jsx(is,{}):e.jsx(Jt,{})})})]})};St.propTypes={row:ie.object,table:ie.object,options:ie.array,id:ie.number,index:ie.number};ie.node,ie.number,ie.number;const bt=Kt("input")({display:"none"});bt.displayName="Input";const Se=g=>{let c=0,h=g.length-1;for(;c<g.length&&Number(g[c])===0;)c++;for(;h>=0&&Number(g[h])===0;)h--;return g.slice(c,h+1)},wt=(g,c,h)=>g.map(L=>{const S=Se(L.data);return{...L,data:S.slice(0,14)}}),Ke=({getValue:g})=>{const c=g();return`${Number((c||0).toFixed(2)).toLocaleString()}`};function be({columns:g,data:c,setData:h}){const[ee,L]=o.useState(()=>[...c]),[S,V]=o.useState({}),O=Vt({data:c,columns:g,defaultColumn:{cell:es},getCoreRowModel:Zt(),meta:{selectedRow:S,setSelectedRow:V,revertData:(D,R)=>{R?h(M=>M.map((v,q)=>q===D?ee[D]:v)):L(M=>M.map((v,q)=>q===D?c[D]:v))},updateData:(D,R,M)=>{h(v=>v.map((q,oe)=>oe===D?{...v[D],[R]:M}:q))},saveData:async D=>{try{const R=c[D],M=await Me.put(`/api/launchGames/${R._id}`,R);Ye({open:!0,message:"Saved successfully!",variant:"alert",alert:{color:"success"}}),V(v=>({...v,[D]:!1}))}catch{Ye({open:!0,message:"Error!",variant:"alert",alert:{color:"error"}})}}},debugTable:!0});let E=[];return O.getAllColumns().map(D=>D.columnDef.accessorKey&&E.push({label:typeof D.columnDef.header=="string"?D.columnDef.header:"#",key:D.columnDef.accessorKey})),e.jsx(he,{content:!1,children:e.jsx(Xt,{children:e.jsx(ts,{children:e.jsxs(ss,{children:[e.jsx(as,{children:O.getHeaderGroups().map(D=>e.jsx(Dt,{children:D.headers.map(R=>e.jsx(jt,{...R.column.columnDef.meta,children:R.isPlaceholder?null:ft(R.column.columnDef.header,R.getContext())},R.id))},D.id))}),e.jsx(ns,{children:O.getRowModel().rows.map(D=>e.jsx(Dt,{children:D.getVisibleCells().map(R=>e.jsx(jt,{...R.column.columnDef.meta,children:ft(R.column.columnDef.cell,R.getContext())},R.id))},D.id))})]})})})})}be.propTypes={columns:ie.array,data:ie.array,setData:ie.func};function ls({data:g,games:c}){const h=vt(),[ee,L]=o.useState(h.pathname==="/admin/report"),[S,V]=o.useState([]),[O,E]=o.useState([]),[D,R]=o.useState([]),[M,v]=o.useState({value:0,date:""}),[q,oe]=o.useState([]);o.useEffect(()=>{const l=r=>{const a=r.getUTCMonth();return Math.floor(a/3)+1},x=r=>{const C=r.map(N=>new Date(N.summary)).sort((N,re)=>N-re),ae=C[0],Ce=C[C.length-1],xe=ae.getFullYear(),me=l(ae),Ie=Ce.getFullYear(),Fe=l(Ce),fe=[];for(let N=xe;N<=Ie;N++)for(let re=1;re<=4;re++)if(!(N===xe&&re<me)){if(N===Ie&&re>Fe)break;fe.push(`${N}-Q${re}`)}return fe},Y=[...new Set(g.map(r=>r.summary.split("-")[0]))];if(E(Y),g&&g.length>0){const r=x(g);R(r)}const Q=Object.values(g.reduce((r,{game:a,summary:C,betsEuro:ae,winsEuro:Ce,ggrEuro:xe,avgBet:me,spins:Ie,uniquePlayers:Fe})=>{r[a]||(r[a]={_id:"",name:a,maxDate:C,years:{},totalGGR:0,latestWeekStart:"",secLatestWeekStart:"",latestWeekGGR:[],secLatestWeekGGR:[],latestWeekAvgBet:[],secLatestWeekAvgBet:[],remainDays:0,weekAverage:0,weekAvgBet:0,weekChange:0,weekSum1:0,weekSum2:0,weekChangeColor:"",dailyTotalGGR:0,projectedTotalGGR:0,LifeTimePayout:0,betsEuro:0,winsEuro:0,dailyAvgBet:0,totalAvgBet:0,avgBetCount:0}),r[a].betsEuro+=ae,r[a].winsEuro+=Ce;const fe=c.find(Le=>Le.name===a);r[a].launchDate=fe.launchDate,r[a]._id=fe._id,r[a].totalGGR+=xe,me&&me>0&&(r[a].totalAvgBet+=me,r[a].avgBetCount+=1,r[a].dailyAvgBet=r[a].totalAvgBet/r[a].avgBetCount);const N=C.split("-")[0];r[a].years[N]||(r[a].years[N]=0),r[a].years[N]+=xe,r[a][`totalGGR_${N}`]||(r[a][`totalGGR_${N}`]=0),r[a][`totalGGR_${N}`]+=xe;const re=l(new Date(C)),We=`${N}-Q${re}`;if(r[a][`totalGGR_${We}`]||(r[a][`totalGGR_${We}`]=0),r[a][`totalGGR_${We}`]+=xe,new Date(fe.launchDate)<=new Date(C)){const Le=new Date(r[a].maxDate)<new Date(C);r[a].maxDate=Le?C:r[a].maxDate,r[a].dailyTotalGGR=Le?xe:r[a].dailyTotalGGR;const ke=new Date(r[a].maxDate),Qe=new Date(ke.getFullYear(),11,31);r[a].remainDays=Math.ceil((Qe-ke)/(1e3*60*60*24));const qe=ke.getFullYear().toString(),He=r[a][`totalGGR_${qe}`]||0,_e=r[a].weekAverage*r[a].remainDays;r[a].projectedTotalGGR=He+_e;const Ne=new Date(r[a].maxDate),De=new Date(Ne);De.setDate(De.getDate()-6);const Pe=new Date(De);Pe.setDate(Pe.getDate()-7);const Te=new Date(De);Te.setDate(Te.getDate()-1),r[a].latestWeekStart=De.toISOString().split("T")[0],r[a].secLatestWeekStart=Pe.toISOString().split("T")[0],r[a].latestWeekGGR=g.filter(m=>m.game===a&&new Date(m.summary)>=De&&new Date(m.summary)<=Ne).map(m=>m.ggrEuro),r[a].secLatestWeekGGR=g.filter(m=>m.game===a&&new Date(m.summary)>=Pe&&new Date(m.summary)<=Te).map(m=>m.ggrEuro),r[a].latestWeekAvgBet=g.filter(m=>m.game===a&&new Date(m.summary)>=De&&new Date(m.summary)<=Ne).map(m=>m.avgBet||0),r[a].secLatestWeekAvgBet=g.filter(m=>m.game===a&&new Date(m.summary)>=Pe&&new Date(m.summary)<=Te).map(m=>m.avgBet||0),r[a].weekSum1=r[a].latestWeekGGR.reduce((m,J)=>m+J,0),r[a].weekSum2=r[a].secLatestWeekGGR.reduce((m,J)=>m+J,0),r[a].weekAverage=r[a].latestWeekGGR.reduce((m,J)=>m+J,0)/r[a].latestWeekGGR.length;const Be=r[a].latestWeekAvgBet.filter(m=>m>0);r[a].weekAvgBet=Be.length>0?Be.reduce((m,J)=>m+J,0)/Be.length:0,r[a].weekChange=(r[a].latestWeekGGR.reduce((m,J)=>m+J,0)-r[a].secLatestWeekGGR.reduce((m,J)=>m+J,0))/r[a].secLatestWeekGGR.reduce((m,J)=>m+J,0)*100,r[a].weekChangeColor=e.jsx("span",{style:{color:r[a].weekChange>0?"green":"red"},children:`${Number(r[a].weekChange.toFixed(2)).toLocaleString()} %`}),r[a].LifeTimePayout=r[a].betsEuro>0?(r[a].winsEuro/r[a].betsEuro*100).toFixed(2):0}return r},{}));V(Q);const X=g.reduce((r,{summary:a,ggrEuro:C})=>(r[a]||(r[a]=0),r[a]+=C,r),{}),Ge=Math.max(...Object.values(X)),Re=Object.keys(X).find(r=>X[r]===Ge);v({value:Ge,date:Re});const ye=g.length>0?g.reduce((r,a)=>new Date(a.summary)>new Date(r)?a.summary:r,g[0].summary):new Date().toISOString().split("T")[0],Ue=ye.split("T")[0],ce=new Date(ye);ce.setDate(ce.getDate()-1);const _=ce.toISOString().split("T")[0],H=c.map(r=>{const a=g.find(ae=>ae.game===r.name&&ae.summary.split("T")[0]===Ue),C=g.find(ae=>ae.game===r.name&&ae.summary.split("T")[0]===_);return{gameName:r.name,totalUsersToday:(a==null?void 0:a.uniquePlayers)||0,totalUsersPrevious:(C==null?void 0:C.uniquePlayers)||0,cwppToday:a?a.betsEuro/a.uniquePlayers:0,cwppPrevious:C?C.betsEuro/C.uniquePlayers:0,spuToday:a?a.spins/a.uniquePlayers:0,spuPrevious:C?C.spins/C.uniquePlayers:0,aveBetToday:(a==null?void 0:a.avgBet)||0,aveBetPrevious:(C==null?void 0:C.avgBet)||0,totalCoinsToday:(a==null?void 0:a.betsEuro)||0,totalCoinsPrevious:(C==null?void 0:C.betsEuro)||0}});oe(H)},[g,c]);const le=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text",cell:({getValue:l,row:x})=>{const Y=l();return e.jsx(se,{style:{textDecoration:"none"},to:ee?`/admin/report-one/${x.original._id}`:`/report-one/${x.original._id}`,children:Y})}},{header:"Launch Date",accessorKey:"launchDate",dataType:"text",cell:({getValue:l,row:x,table:Y})=>{var X;const Q=l();return`${(X=Q==null?void 0:Q.split("T"))==null?void 0:X[0]}`}},{header:"Daily Total GGR",accessorKey:"dailyTotalGGR",dataType:"text",cell:Ke},{header:"Projected Total GGR",accessorKey:"projectedTotalGGR",dataType:"text",cell:Ke},...(O==null?void 0:O.map(l=>({header:`Total GGR ${l}`,accessorKey:`totalGGR_${l}`,dataType:"text",cell:Ke})))||[],{header:"Lifetime GGR",accessorKey:"totalGGR",dataType:"text",cell:Ke},{header:"7 Day Average",accessorKey:"weekAverage",dataType:"text",cell:Ke},{header:"Daily Average Bet",accessorKey:"dailyAvgBet",dataType:"text",cell:({getValue:l})=>{const x=l();return x?`${Number(x.toFixed(2)).toLocaleString()}`:"0.00"}},{header:"7 Day Average Bet",accessorKey:"weekAvgBet",dataType:"text",cell:({getValue:l})=>{const x=l();return x?`${Number(x.toFixed(2)).toLocaleString()}`:"0.00"}},{header:"7 Day Change",accessorKey:"weekChangeColor",dataType:"text"},{header:"Lifetime Payout",accessorKey:"LifeTimePayout",dataType:"text",cell:({getValue:l})=>{const x=l();return x?`${x}%`:"0.00%"}}],[O]),ge=o.useMemo(()=>{const l=[];return D.forEach(x=>{const Y={quarter:x};S.forEach(Q=>{const X=Q[`totalGGR_${x}`]!==void 0?Number(Q[`totalGGR_${x}`].toFixed(2)).toLocaleString():0;Y[Q.name]=X}),l.push(Y)}),l},[D,S]),Ae=o.useMemo(()=>{const l=c.map(x=>x.name);return[{header:"Quarter",accessorKey:"quarter",dataType:"text"},...l.map(x=>({header:x,accessorKey:x,dataType:"number",cell:Y=>Y.getValue()??0}))]},[c]),de=o.useMemo(()=>[{header:"Game Name",accessorKey:"gameName",dataType:"text",cell:({getValue:l})=>l()},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Total Users"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"totalUsers",dataType:"text",cell:({row:l})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:Number(l.original.totalUsersToday).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(l.original.totalUsersPrevious).toLocaleString()})})]})},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"CWPP"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"cwpp",dataType:"text",cell:({row:l})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:Number(l.original.cwppToday.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(l.original.cwppPrevious.toFixed(2)).toLocaleString()})})]})},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"SPU"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"spu",dataType:"text",cell:({row:l})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:Number(l.original.spuToday.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(l.original.spuPrevious.toFixed(2)).toLocaleString()})})]})},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Ave Bet"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"aveBet",dataType:"text",cell:({row:l})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:Number(l.original.aveBetToday.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(l.original.aveBetPrevious.toFixed(2)).toLocaleString()})})]})},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Total Coins"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"totalCoins",dataType:"text",cell:({row:l})=>e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:Number(l.original.totalCoinsToday).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(l.original.totalCoinsPrevious).toLocaleString()})})]})}],[]);return e.jsxs(ne,{item:!0,xs:12,lg:12,children:[e.jsxs(ne,{container:!0,spacing:{xs:1,sm:2},mb:5,children:[e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"column",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Lifetime GGR - "}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((l,x)=>l+x.totalGGR,0)).toLocaleString()})]}),e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Highest Daily GGR Record - "}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",sx:{fontWeight:"bold",color:"primary.main"},children:Number(M.value).toLocaleString()})]}),e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Date - "}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",sx:{fontWeight:"bold"},children:M.date?M.date.split("T")[0]:""})]})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Daily Total GGR -"}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((l,x)=>l+x.dailyTotalGGR,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"7 Day Average GGR -"}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((l,x)=>l+x.weekAverage,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"7 Day Change -"}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:((S.reduce((l,x)=>l+x.weekSum1,0)-S.reduce((l,x)=>l+x.weekSum2,0))/S.reduce((l,x)=>l+x.weekSum2,0)*100).toFixed(2)+"%"})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Projected GGR ${O.reduce((l,x)=>Math.max(l,x),-1/0)} -`}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((l,x)=>l+x.projectedTotalGGR,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:D==null?void 0:D.map((l,x)=>e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"start",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Total GGR ${l} - `}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((Y,Q)=>Y+(Q[`totalGGR_${l}`]||0),0)).toLocaleString()})]},x))})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:O==null?void 0:O.map((l,x)=>e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"start",sx:{textAlign:"center"},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Total Revenue ${l} - `}),e.jsx(f,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(S.reduce((Y,Q)=>Y+(Q[`totalGGR_${l}`]||0),0)).toLocaleString()})]},x))})})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Games Data"}),e.jsx(be,{data:S,columns:le})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Latest Report vs Previous Report Comparison"}),e.jsx(be,{data:q,columns:de})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"TOTAL GGR - QUARTER"}),e.jsx(be,{data:ge,columns:Ae,setData:()=>{}})]})]})}const ve={chart:{height:100,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:3},xaxis:{categories:[]}},Ls=()=>{const g=vt(),[c,h]=o.useState(g.pathname==="/admin/report"),{user:ee}=Mt();o.useState(0);const[L,S]=o.useState(!1),[V,O]=o.useState(!1),[E,D]=o.useState([]),[R,M]=o.useState([]),[v,q]=o.useState([]),[oe,le]=o.useState(!0),[ge,Ae]=o.useState(""),[de,l]=o.useState(""),[x,Y]=o.useState(!1),[Q,X]=o.useState([]),[Ge,Re]=o.useState([]),[ye,Ue]=o.useState([]),[ce,_]=o.useState([]),[H,r]=o.useState([]),[a,C]=o.useState(ve),[ae,Ce]=o.useState([]),[xe,me]=o.useState(ve),[Ie,Fe]=o.useState(ve),[fe,N]=o.useState(ve),[re,We]=o.useState(ve),[Le,ke]=o.useState(ve),[Qe,qe]=o.useState(ve),[He,_e]=o.useState([]),[Ne,De]=o.useState(new Date().toISOString().split("T")[0]),[Pe,Te]=o.useState([]),[Be,m]=o.useState(ve),[J,tt]=o.useState([]),[Gt,st]=o.useState([]),[Rt,nt]=o.useState([]),[Ct,at]=o.useState([]),[T,Ve]=o.useState([1,37]),[Pt,Tt]=o.useState(0),At=os((b,B)=>{Ve(B)},300),Wt=(b,B)=>{Ve(B),At(b,B)},Lt=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"Launch Date",accessorKey:"launchDate",dataType:"date",cell:({getValue:b,row:B,table:w})=>{var i,d;const G=(i=w==null?void 0:w.options)==null?void 0:i.meta,je=(d=G==null?void 0:G.selectedRow)==null?void 0:d[B.id],Z=b(),pe=Z?new Date(Z).toISOString().split("T")[0]:"";return je?e.jsx("input",{type:"date",value:pe,onChange:A=>G==null?void 0:G.updateData(B.index,"launchDate",A.target.value)}):pe}},{header:"Actions",id:"edit",cell:St,meta:{className:"cell-center"}}],[]),kt=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"TOTAL GGR",accessorKey:"data",dataType:"text",cell:({getValue:b,row:B,table:w})=>{const G=b();return`${(Number(G[G.length-1])||0).toLocaleString()}`}}],[]),Ot=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"},{header:"Coins Wagered",accessorKey:"CW",dataType:"text"},{header:"Lifetime Payout",accessorKey:"LP",dataType:"text"}],[]),Et=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"}],[]),[Xe,Ut]=o.useState(null);o.useEffect(()=>{const b=[];for(let i=0;i<7;i++){const d=new Date;d.setDate(d.getDate()-i),b.push(d.toISOString().split("T")[0])}const B=R.reduce((i,{game:d,summary:A})=>{if(!i[d]){const U=v.find(k=>k.name===d);i[d]={...U,maxDate:A}}const $=new Date(i[d].maxDate)<new Date(A);return i[d].maxDate=$?A:i[d].maxDate,Ut(i[d].maxDate),i},{}),w={},je=Object.values(R.reduce((i,{game:d,summary:A,ggrEuro:$,spins:U,uniquePlayers:k,betsEuro:I,winsEuro:F})=>{i[d]||(i[d]={name:d,ggrEuro:[],spins:[],uniquePlayers:[],SPU:[],CWPP:[],CW:[],LP:[]});const W=v.find($e=>$e.name===d);new Date(W==null?void 0:W.launchDate)<new Date(A),w[d]&&new Date(w[d])<new Date(A.split("T")[0])?w[d]=A.split("T")[0]:w[d]||(w[d]=A.split("T")[0]);const K=new Date(B[d].maxDate)||new Date,Oe=new Date(K);return Oe.setDate(Oe.getDate()-6),new Date(A)>=Oe&&new Date(A)<=K&&(i[d].ggrEuro.push($),i[d].spins.push(U),i[d].uniquePlayers.push(k),i[d].SPU.push(U/k),i[d].CWPP.push(I/k),i[d].CW.push(I),i[d].LP.push(F/I)),i},{})).map(i=>{const d=i.ggrEuro,A=i.spins,$=i.uniquePlayers,U=i.SPU,k=i.CWPP,I=i.LP,F=i.CW;return{name:i.name,ggrEuro:Number((d.length>0?d.reduce((W,K)=>W+K,0)/d.length:0).toFixed(2)).toLocaleString(),spins:Number((A.length>0?A.reduce((W,K)=>W+K,0)/A.length:0).toFixed(2)).toLocaleString(),uniquePlayers:Number(($.length>0?$.reduce((W,K)=>W+K,0)/$.length:0).toFixed(2)).toLocaleString(),SPU:Number((U.length>0?U.reduce((W,K)=>W+K,0)/U.length:0).toFixed(2)).toLocaleString(),CWPP:Number((k.length>0?k.reduce((W,K)=>W+K,0)/k.length:0).toFixed(2)).toLocaleString(),CW:Number((F.length>0?F.reduce((W,K)=>W+K,0)/F.length:0).toFixed(2)).toLocaleString(),LP:Number((I.length>0?I.reduce((W,K)=>W+K,0)/I.length:0).toFixed(2)).toLocaleString()}});Ue(je);const pe=Object.values(R.reduce((i,{game:d,summary:A,ggrEuro:$,spins:U,uniquePlayers:k,betsEuro:I})=>{i[d]||(i[d]={name:d,ggrEuros:[],ggrEuro:0,ggrEuro2:0,spins:0,spins2:0,uniquePlayers:0,uniquePlayers2:0,SPU:0,SPU2:0,CWPP:0,CWPP2:0,arrSpins:[],arrSpins2:[]});const F=new Date(w[d]);F.setDate(F.getDate()-7);const W=new Date(w[d]);return W.setDate(W.getDate()-14),F<new Date(A)?(i[d].ggrEuros.push($),i[d].arrSpins.push(U),i[d].ggrEuro+=$,i[d].spins+=U,i[d].uniquePlayers+=k,i[d].SPU+=U/k,i[d].CWPP+=I/k):W<new Date(A)&&new Date(A)<=F&&(i[d].arrSpins2.push(U),i[d].ggrEuro2+=$,i[d].spins2+=U,i[d].uniquePlayers2+=k,i[d].SPU2+=U/k,i[d].CWPP2+=I/k),i},{})).map(i=>{const d=(i.ggrEuro-i.ggrEuro2)/(i.ggrEuro2||1),A=(i.spins-i.spins2)/(i.spins2||1),$=(i.uniquePlayers-i.uniquePlayers2)/(i.uniquePlayers2||1),U=(i.SPU-i.SPU2)/(i.SPU2||1),k=(i.CWPP-i.CWPP2)/(i.CWPP2||1);return{name:i.name,ggrEuro:e.jsx("span",{style:{color:d>=0?"green":"red"},children:`${(d*100).toFixed(2)} %`}),spins:e.jsx("span",{style:{color:A>=0?"green":"red"},children:`${(A*100).toFixed(2)} %`}),uniquePlayers:e.jsx("span",{style:{color:$>=0?"green":"red"},children:`${($*100).toFixed(2)} %`}),SPU:e.jsx("span",{style:{color:U>=0?"green":"red"},children:`${(U*100).toFixed(2)} %`}),CWPP:e.jsx("span",{style:{color:k>=0?"green":"red"},children:`${(k*100).toFixed(2)} %`})}});_(pe)},[Ge,R,v]);const rt=async()=>{var b,B,w;try{const G=await Me.get("api/reports");if(D(G.data.data),q(G.data.games),G.data.games.length>0){const je=G.data.games.length>0?(B=(b=G.data.games)==null?void 0:b.reduce((t,n)=>new Date(n.launchDate)<new Date(t.launchDate)?n:t).launchDate)==null?void 0:B.split("T")[0]:new Date().toISOString().split("T")[0],Z=[...G.data.data].filter(t=>new Date(t.summary)>=new Date(je));Z.sort((t,n)=>new Date(t.summary)-new Date(n.summary));const pe=[],i=Object.values(Z.reduce((t,{game:n,ggrEuro:u,summary:y})=>{t[n]||(t[n]={name:n,data:[],totalGGR:0});const p=G.data.games.find(P=>P.name===n);return t[n].totalGGR+=new Date(p==null?void 0:p.launchDate)>new Date(y)?0:u,t[n].data.push(t[n].totalGGR.toFixed(2)),pe.push(y.slice(0,10)),t},{})),d=Z.reduce((t,{summary:n,betsEuro:u,game:y})=>{const p=v.find(P=>P.name===y);if(new Date(p==null?void 0:p.launchDate)<=new Date(n)){const P=n.slice(0,10);t[P]||(t[P]=0),t[P]+=u}return t},{}),A=[{name:"Total Coins Wagered",data:Object.entries(d).sort(([t],[n])=>new Date(t)-new Date(n)).map(([t,n])=>Number(n.toFixed(2)))}];let $=0;const U=i.map(t=>($=Math.max($,t.data.length),{...t,data:Se(t.data)})),k=A.map(t=>{const n=T[0]-1,u=T[1]-1;return t.data=t.data.slice(n,u+1),t});Tt($),Ve([1,$]),r(U),Ce(k);const I=[...new Set(pe)];Re(I);const F=[];for(let t=T[0];t<=T[1];t++)F.push(`Day ${t}`);const W=(w=G.data.data)==null?void 0:w.map(t=>({...t,SPU:t.spins/t.uniquePlayers,CWPP:t.betsEuro/t.uniquePlayers}));M(W);const K=[];for(let t=0;t<14;t++)K.push(`Day ${t+1}`);m(t=>({...t,xaxis:{categories:K,labels:{show:!1}}})),Te(wt(i,G.data.games,I));const $e=Object.values(Z.reduce((t,{game:n,summary:u,uniquePlayers:y})=>{t[n]||(t[n]={name:n,data:[]});const p=G.data.games.find(P=>P.name===n);return new Date(p==null?void 0:p.launchDate)<=new Date(u)&&t[n].data.push(y),t},{})).map(t=>{const n=T[0]-1,u=T[1]-1;return t.data=t.data.slice(n,u+1),t});tt($e);const it=t=>{if(t.length<6)return[];let n=new Array(5).fill(0);for(let u=5;u<t.length;u++){let y=t.slice(u-4,u+1).reduce((z,ue)=>z+ue,0),p=t.slice(u-5,u).reduce((z,ue)=>z+ue,0),P=((y-p)/(p||1)*100).toFixed(2);n.push(P)}return n},lt=Object.values(Z.reduce((t,{game:n,summary:u,uniquePlayers:y})=>{t[n]||(t[n]={name:n,data:[]});const p=G.data.games.find(P=>P.name===n);return new Date(p==null?void 0:p.launchDate)<=new Date(u)&&t[n].data.push(y),t},{})).map(t=>({...t,data:it(t.data)})).map(t=>{const n=T[0]-1,u=T[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:t.data}});st(lt);const ct=Object.values(Z.reduce((t,{game:n,spins:u,summary:y})=>{t[n]||(t[n]={name:n,data:[]});const p=G.data.games.find(P=>P.name===n);return t[n].data.push(new Date(p==null?void 0:p.launchDate)>new Date(y)?0:u),t},{})).map(t=>{const n=T[0]-1,u=T[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:Se(t.data)}});nt(ct);const Ze=Object.values(Z.reduce((t,{game:n,spins:u,uniquePlayers:y,summary:p})=>{t[n]||(t[n]={name:n,data:[]});const P=G.data.games.find(z=>z.name===n);return t[n].data.push(new Date(P==null?void 0:P.launchDate)>new Date(p)?0:(u/y).toFixed(2)),t},{})).map(t=>{const n=T[0]-1,u=T[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:Se(t.data)}});X(F),C(t=>({...t,xaxis:{categories:F,labels:{show:!1}}})),me(t=>({...t,xaxis:{categories:F,labels:{show:!1}},title:{text:"Daily Total Coins Wagered (All Games)",align:"center"},yaxis:{title:{text:"Total Coins"}}})),Fe(t=>({...t,xaxis:{categories:F,labels:{show:!1}}})),N(t=>({...t,xaxis:{categories:F,labels:{show:!1}}})),We(t=>({...t,xaxis:{categories:F,labels:{show:!1}}})),ke(t=>({...t,xaxis:{categories:F,labels:{show:!1}}})),at(Ze);const Je=Object.values(Z.reduce((t,{game:n,summary:u,ggrEuro:y})=>{t[n]||(t[n]={name:n,data:[]});const p=G.data.games.find(Ee=>Ee.name===n),P=Z.filter(Ee=>Ee.game===n).reduce((Ee,ut)=>new Date(ut.summary)>new Date(Ee)?ut.summary:Ee,"1970-01-01"),z=new Date(P),ue=new Date(z);return ue.setDate(ue.getDate()-6),new Date(u)>=ue&&new Date(u)<=z&&t[n].data.push(y),t},{})),et=Z.reduce((t,n)=>new Date(n.summary)>new Date(t)?n.summary:t,"1970-01-01"),ze=new Date(et),s=[];for(let t=6;t>=0;t--){const n=new Date(ze);n.setDate(n.getDate()-t),s.push(n.toISOString().split("T")[0])}_e(Je),qe(t=>({...t,xaxis:{categories:s,labels:{show:!0}},title:{text:"7 Day GGR",align:"center"}}))}}catch{}},It=async()=>{const b=localStorage.getItem("reportToken");le(b!=="true"),rt()};o.useEffect(()=>{It()},[]);const Ft=async b=>{if(b.target.files.length>0){const B=b.target.files[0];if(!B){alert("Please select a file first.");return}S(!0);const w=new FormData;w.append("file",B);try{const G=await Me.post("api/reports/upload",w,{headers:{"Content-Type":"multipart/form-data"}});Ye({open:!0,message:"Excel uploaded successfully!",variant:"alert",alert:{color:"success"}}),rt(),S(!0)}catch(G){console.error("Upload Error:",G),alert("Error uploading file.")}finally{S(!1),b.target.value=""}}},Nt=async()=>{O(!0);try{const b=await Me.get("api/reports/download",{responseType:"blob"}),B=window.URL.createObjectURL(new Blob([b.data])),w=document.createElement("a");w.href=B,w.setAttribute("download","report.xlsx"),document.body.appendChild(w),w.click(),document.body.removeChild(w)}catch(b){console.error("Download Error:",b),Ye({open:!0,message:"Excel not exists!",variant:"alert",alert:{color:"error"}})}finally{O(!1)}};o.useEffect(()=>{var b;if(v.length>0){const B=v.length>0?(b=v==null?void 0:v.reduce((s,t)=>new Date(t.launchDate)<new Date(s.launchDate)?t:s).launchDate)==null?void 0:b.split("T")[0]:new Date().toISOString().split("T")[0],w=[...E].filter(s=>new Date(s.summary)>=new Date(B));w.sort((s,t)=>new Date(s.summary)-new Date(t.summary));const G=[],je=Object.values(w.reduce((s,{game:t,ggrEuro:n,summary:u})=>{s[t]||(s[t]={name:t,data:[],totalGGR:0});const y=v.find(p=>p.name===t);return s[t].totalGGR+=new Date(y==null?void 0:y.launchDate)>new Date(u)?0:n,s[t].data.push(s[t].totalGGR.toFixed(2)),G.push(u.slice(0,10)),s},{})),Z=w.reduce((s,{summary:t,betsEuro:n,game:u})=>{const y=v.find(p=>p.name===u);if(new Date(y==null?void 0:y.launchDate)<=new Date(t)){const p=t.slice(0,10);s[p]||(s[p]=0),s[p]+=n}return s},{}),pe=[{name:"Total Coins Wagered",data:Object.entries(Z).sort(([s],[t])=>new Date(s)-new Date(t)).map(([s,t])=>Number(t.toFixed(2)))}];let i=0;const A=je.map(s=>(i=Math.max(i,s.data.length),{...s,data:Se(s.data)})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),s}),U=pe.map(s=>(i=Math.max(i,s.data.length),{...s,data:Se(s.data)})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),s});r(A),Ce(U);const k=[...new Set(G)];Re(k);const I=[];for(let s=T[0];s<=T[1];s++)I.push(`Day ${s}`);const F=E==null?void 0:E.map(s=>({...s,SPU:s.spins/s.uniquePlayers,CWPP:s.betsEuro/s.uniquePlayers}));M(F);const W=[];for(let s=0;s<14;s++)W.push(`Day ${s+1}`);m(s=>({...s,xaxis:{categories:W,labels:{show:!1}}})),Te(wt(je));const Oe=Object.values(w.reduce((s,{game:t,summary:n,uniquePlayers:u})=>{s[t]||(s[t]={name:t,data:[]});const y=v.find(p=>p.name===t);return new Date(y==null?void 0:y.launchDate)<=new Date(n)&&s[t].data.push(u),s},{})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),s});tt(Oe);const $e=s=>{if(s.length<6)return[];let t=new Array(5).fill(0);for(let n=5;n<s.length;n++){let u=s.slice(n-4,n+1).reduce((P,z)=>P+z,0),y=s.slice(n-5,n).reduce((P,z)=>P+z,0),p=((u-y)/(y||1)*100).toFixed(2);t.push(p)}return t},ot=Object.values(w.reduce((s,{game:t,summary:n,uniquePlayers:u})=>{s[t]||(s[t]={name:t,data:[]});const y=v.find(p=>p.name===t);return new Date(y==null?void 0:y.launchDate)<=new Date(n)&&s[t].data.push(u),s},{})).map(s=>({...s,data:$e(s.data)})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:s.data}});st(ot);const dt=Object.values(w.reduce((s,{game:t,spins:n,summary:u})=>{s[t]||(s[t]={name:t,data:[]});const y=v.find(p=>p.name===t);return s[t].data.push(new Date(y==null?void 0:y.launchDate)>new Date(u)?0:n),s},{})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:Se(s.data)}});nt(dt);const xt=Object.values(w.reduce((s,{game:t,spins:n,uniquePlayers:u,summary:y})=>{s[t]||(s[t]={name:t,data:[]});const p=v.find(P=>P.name===t);return s[t].data.push(new Date(p==null?void 0:p.launchDate)>new Date(y)?0:(n/u).toFixed(2)),s},{})).map(s=>{const t=T[0]-1,n=T[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:Se(s.data)}});X(I),C(s=>({...s,xaxis:{categories:I,labels:{show:!1}}})),me(s=>({...s,xaxis:{categories:I,labels:{show:!1}},title:{text:"Daily Total Coins Wagered (All Games)",align:"center"},yaxis:{title:{text:"Total Coins"}}})),Fe(s=>({...s,xaxis:{categories:I,labels:{show:!1}}})),N(s=>({...s,xaxis:{categories:I,labels:{show:!1}}})),We(s=>({...s,xaxis:{categories:I,labels:{show:!1}}})),ke(s=>({...s,xaxis:{categories:I,labels:{show:!1}}})),at(xt);const Ze=Object.values(w.reduce((s,{game:t,summary:n,ggrEuro:u})=>{s[t]||(s[t]={name:t,data:[]}),v.find(z=>z.name===t);const y=w.filter(z=>z.game===t).reduce((z,ue)=>new Date(ue.summary)>new Date(z)?ue.summary:z,"1970-01-01"),p=new Date(y),P=new Date(p);return P.setDate(P.getDate()-6),new Date(n)>=P&&new Date(n)<=p&&s[t].data.push(u),s},{})),Je=w.reduce((s,t)=>new Date(t.summary)>new Date(s)?t.summary:s,"1970-01-01"),et=new Date(Je),ze=[];for(let s=6;s>=0;s--){const t=new Date(et);t.setDate(t.getDate()-s),ze.push(t.toISOString().split("T")[0])}_e(Ze),qe(s=>({...s,xaxis:{categories:ze,labels:{show:!0}},title:{text:"7 Day GGR",align:"center"}}))}},[E,Ne,v,T]);const Bt=async()=>{try{const b=await Me.post("api/account/check",{email:c?ee.email:de,password:ge});localStorage.setItem("reportToken","true"),Y(!1),le(!1)}catch{Y(!0)}};return e.jsxs(Ht,{children:[e.jsx(he,{children:!oe&&e.jsxs(ne,{item:!0,xs:12,lg:12,children:[e.jsxs(j,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"space-between",sx:{flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"}},children:[e.jsx(ne,{item:!0,children:e.jsxs(j,{spacing:1,children:[e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:"center",children:[e.jsxs("label",{htmlFor:"contained-button-file",children:[e.jsx(bt,{accept:".xls,.xlsx",id:"contained-button-file",type:"file",onChange:Ft}),e.jsx(mt,{loading:L,variant:"contained",component:"span",children:"Upload Excel"})]}),e.jsx(mt,{sx:{marginLeft:{xs:0,sm:"10px"},marginTop:{xs:1,sm:0}},loading:V,variant:"contained",component:"span",onClick:Nt,children:"Download Excel"})]}),e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:"center",children:[e.jsx(f,{variant:{xs:"subtitle2",sm:"subtitle1"},color:"textSecondary",children:"Latest Report Date:"}),e.jsx(f,{variant:{xs:"h6",sm:"h5"},sx:{color:"red",fontWeight:"bold"},children:Xe==null?void 0:Xe.split("T")[0]})]})]})}),e.jsxs(ne,{gap:2,display:"flex",flexDirection:"row",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",children:"LAUNCH"}),e.jsxs(j,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx(se,{Link:!0,to:c?"/admin/report-type/users/launch":"/report-type/users/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Users"})}),e.jsx(se,{to:c?"/admin/report-type/totalGGR/launch":"/report-type/totalGGR/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total GGR"})}),e.jsx(se,{to:c?"/admin/report-type/spinsPerUser/launch":"/report-type/spinsPerUser/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Spins Per User"})}),e.jsx(se,{to:c?"/admin/report-type/totalCoins/launch":"/report-type/totalCoins/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total Coins"})}),e.jsx(se,{to:c?"/admin/report-type/cwpp/launch":"/report-type/cwpp/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"CWPP"})}),e.jsx(se,{to:c?"/admin/report-type/totalCoinsWageredPerDay/launch":"/report-type/totalCoinsWageredPerDay/launch",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"TCWPD"})})]})]})]}),e.jsx(j,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"end",sx:{flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"}},children:e.jsxs(ne,{gap:2,display:"flex",flexDirection:"row",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:[e.jsx(f,{variant:{xs:"h6",sm:"h5"},textAlign:"center",children:"EXCLUSIVE"}),e.jsxs(j,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx(se,{to:c?"/admin/report-type/users/exclusive":"/report-type/users/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Users"})}),e.jsx(se,{to:c?"/admin/report-type/totalGGR/exclusive":"/report-type/totalGGR/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total GGR"})}),e.jsx(se,{to:c?"/admin/report-type/spinsPerUser/exclusive":"/report-type/spinsPerUser/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Spins Per User"})}),e.jsx(se,{to:c?"/admin/report-type/totalCoins/exclusive":"/report-type/totalCoins/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total Coins"})}),e.jsx(se,{to:c?"/admin/report-type/cwpp/exclusive":"/report-type/cwpp/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"CWPP"})}),e.jsx(se,{to:c?"/admin/report-type/totalCoinsWageredPerDay/exclusive":"/report-type/totalCoinsWageredPerDay/exclusive",children:e.jsx(te,{loading:L,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total Coins Wagered Per Day"})})]})]})}),e.jsx(j,{mb:5,spacing:3,children:e.jsx(ls,{data:E,games:v})}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Launch Information"}),e.jsx(be,{data:v,columns:Lt,setData:q})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"TOTAL REVENUE"}),e.jsx(be,{data:H,columns:kt,setData:q})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 Day Averages"}),e.jsx(be,{data:ye,columns:Ot,setData:q})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 Day Change (%) "}),e.jsx(be,{data:ce,columns:Et,setData:q})]}),e.jsxs(j,{mb:5,direction:{xs:"column",sm:"row"},spacing:{xs:2,sm:3},alignItems:"center",justifyContent:"center",children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},children:"Time Period"}),e.jsx(rs,{getAriaLabel:()=>"Temperature range",value:T,max:Pt,min:1,onChange:Wt,valueLabelDisplay:"auto",valueLabelFormat:b=>`Day ${b}`,sx:{width:{xs:"90%",sm:"60%",md:"40%"}}})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Total GGR"}),e.jsx(we,{options:a,series:H,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 DAY GGR"}),e.jsx(we,{options:Qe,series:He,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Total Coins Wagered"}),e.jsx(we,{options:xe,series:ae,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"USERS"}),e.jsx(we,{options:Ie,series:J,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"USER 5 Day Change (%)"}),e.jsx(we,{options:fe,series:Gt,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"SPINS PER DAY"}),e.jsx(we,{options:re,series:Rt,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"SPINS PER PLAYER"}),e.jsx(we,{options:Le,series:Ct,type:"line",height:500})]}),e.jsxs(j,{spacing:{xs:2,sm:3},children:[e.jsx(f,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"14 DAY LAUNCH"}),e.jsx(we,{options:Be,series:Pe,type:"line",height:500})]})]})}),e.jsx(qt,{open:oe,maxWidth:"xs",children:e.jsxs(_t,{sx:{p:1,py:1.5},children:[c?e.jsx(pt,{children:"Confirm Password"}):e.jsx(pt,{children:"Login"}),e.jsxs(zt,{children:[e.jsxs(j,{spacing:1,mb:2,children:[!c&&e.jsx(ht,{name:"email",placeholder:"Email",type:"email",fullWidth:!0,variant:"outlined",value:de,onChange:b=>l(b.target.value)}),e.jsx(ht,{name:"password",placeholder:"Password",type:"password",fullWidth:!0,variant:"outlined",value:ge,onChange:b=>Ae(b.target.value)})]}),x&&c&&e.jsx(f,{variant:"h6",color:"red",children:"Password is wrong."}),x&&!c&&e.jsx(f,{variant:"h6",color:"red",children:"Credentials is wrong."}),"          "]}),e.jsx(Yt,{children:e.jsx(te,{variant:"contained",onClick:Bt,children:"Confirm"})})]})})]})};export{be as ReactTable,Ls as default,Ke as separateByComma};
