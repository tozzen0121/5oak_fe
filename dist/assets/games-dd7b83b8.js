import{P as u,c as D,r as n,j as e,p as l,k as E,g as F,T as S,aE as k,L as M,a9 as C,I as w,b8 as v,x as A,ac as G,t as O,M as B,d as H,B as T,a6 as L,ai as z}from"./index-f4d20eae.js";import{u as _,g as $,a as K,b as N,c as V,d as U,S as Q,f as R}from"./ScrollX-46f3613b.js";import{r as X}from"./index-481cdf3e.js";import q from"./empty-f3478665.js";import{D as J,S as W,R as Y,H as Z,T as ee}from"./Filter-7bb6f22c.js";import"./LinearWithLabel-51c0a481.js";import"./CustomerModal-f259e2a1.js";import{E as te}from"./ExpandingUserDetail-b3751e79.js";import{T as ae,a as se,b as oe}from"./TableContainer-eecff0d0.js";import{T as ne}from"./TableHead-7f6ac4b6.js";import{T as b}from"./TableRow-be52b30f.js";import{T as y}from"./TableCell-c89ef8e0.js";import{E as re}from"./EditOutlined-5afc9b6d.js";import{D as le}from"./DeleteOutlined-a625d514.js";import{P as ie}from"./PlusOutlined-9e712db4.js";import"./TableFooter-5bcaf0b9.js";import"./DownloadOutlined-038ac146.js";import"./CaretUpOutlined-e7b87724.js";import"./CaretDownOutlined-4d820c1b.js";import"./Pagination-91a78fe5.js";import"./index-8f90f5fa.js";import"./Checkbox-20ad8cf0.js";import"./MinusOutlined-1dcff4d0.js";import"./react-number-format.es-3a4c3bfa.js";import"./MailOutlined-7999daed.js";import"./PhoneOutlined-75ca2cc2.js";import"./EnvironmentOutlined-a915b422.js";const ce=(d,i,m,g)=>{const r=X(d.getValue(i),m);return g(r),r.passed};function I({data:d,columns:i,modalToggler:m}){const g=D(),r=G(g.breakpoints.down("sm")),[h,p]=n.useState([{id:"id",desc:!0}]),[c,j]=n.useState({}),[x,f]=n.useState(""),t=_({data:d,columns:i,state:{sorting:h,rowSelection:c,globalFilter:x},enableRowSelection:!0,onSortingChange:p,onRowSelectionChange:j,onGlobalFilterChange:f,getRowCanExpand:()=>!0,getSortedRowModel:$(),getFilteredRowModel:K(),getCoreRowModel:N(),getPaginationRowModel:V(),getExpandedRowModel:U(),globalFilterFn:ce,debugTable:!0}),o=O(g.palette.primary.lighter,.1);let P=[];return i.map(s=>s.accessorKey&&P.push({label:typeof s.header=="string"?s.header:"#",key:s.accessorKey})),e.jsxs(B,{content:!1,children:[e.jsxs(l,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...r&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(J,{value:x??"",onFilterChange:s=>f(String(s)),placeholder:`Search ${d.length} records...`}),e.jsxs(l,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(W,{getState:t.getState,getAllColumns:t.getAllColumns,setSorting:p}),e.jsx(l,{direction:"row",spacing:2,alignItems:"center",children:e.jsx(M,{to:"/admin/games-create",children:e.jsx(H,{variant:"contained",startIcon:e.jsx(ie,{}),onClick:m,children:"Add Game"})})})]})]}),e.jsx(Q,{children:e.jsxs(l,{children:[e.jsx(Y,{selected:Object.keys(c).length}),e.jsx(ae,{children:e.jsxs(se,{children:[e.jsx(ne,{children:t.getHeaderGroups().map(s=>e.jsx(b,{children:s.headers.map(a=>(a.column.columnDef.meta!==void 0&&a.column.getCanSort()&&Object.assign(a.column.columnDef.meta,{className:a.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(y,{...a.column.columnDef.meta,onClick:a.column.getToggleSortingHandler(),...a.column.getCanSort()&&a.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:a.isPlaceholder?null:e.jsxs(l,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(T,{children:R(a.column.columnDef.header,a.getContext())}),a.column.getCanSort()&&e.jsx(Z,{column:a.column})]})},a.id)))},s.id))}),e.jsx(oe,{children:t.getRowModel().rows.map(s=>e.jsxs(n.Fragment,{children:[e.jsx(b,{children:s.getVisibleCells().map(a=>e.jsx(y,{...a.column.columnDef.meta,children:R(a.column.columnDef.cell,a.getContext())},a.id))}),s.getIsExpanded()&&e.jsx(b,{sx:{bgcolor:o,"&:hover":{bgcolor:`${o} !important`}},children:e.jsx(y,{colSpan:s.getVisibleCells().length,children:e.jsx(te,{data:s.original})})})]},s.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(L,{}),e.jsx(T,{sx:{p:2},children:e.jsx(ee,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})})]})]})})]})}I.propTypes={columns:u.array,data:u.array,getHeaderProps:u.func,handleAdd:u.func,modalToggler:u.func,renderRowSubComponent:u.any};const Be=()=>{const d=D(),[i,m]=n.useState([]),[g,r]=n.useState(!1),[h,p]=n.useState(!1),[c,j]=n.useState(""),x=()=>{p(!h)};n.useEffect(()=>{(async()=>{try{r(!0);const{data:o}=await z("/api/game");m(o),r(!1)}catch{r(!1)}})()},[]);const f=n.useMemo(()=>[{header:"Title",accessorKey:"name",cell:({row:t,getValue:o})=>e.jsxs(l,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(E,{alt:"Avatar 1",size:"sm",src:F(`${t.original.imagePath}`)}),e.jsxs(l,{spacing:0,children:[e.jsx(S,{variant:"subtitle1",children:o()}),e.jsx(S,{color:"text.secondary",children:t.original.email})]})]})},{header:"Date Applied",accessorKey:"created_at",cell:({row:t,getValue:o})=>e.jsx(S,{color:"text.secondary",children:k(new Date(t.original.created_at),"dd/MM/yyyy")})},{header:"Actions",meta:{className:"cell-center"},disableSortBy:!0,cell:({row:t})=>e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[e.jsx(M,{to:`/admin/games-edit/${t.original._id}`,children:e.jsx(C,{title:"Edit",children:e.jsx(w,{color:"primary",children:e.jsx(re,{})})})}),e.jsx(C,{title:"Delete",children:e.jsx(w,{color:"error",onClick:o=>{o.stopPropagation(),x(),p(!0),j(t.original._id)},children:e.jsx(le,{})})})]})}],[d]);return g?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsx(I,{data:i,columns:f,modalToggler:()=>{}}),e.jsx(v,{id:c,title:c,open:h,handleClose:x,deletehandler:async()=>{try{await A.delete(`/api/game/${c}`),m(i.filter(t=>t._id!==c)),p(!1),j("")}catch{}}})]})};export{Be as default,ce as fuzzyFilter};
