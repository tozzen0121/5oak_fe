import{y as N,z as U,r as l,j as o,M as W,G as D,p as C,d as v,T as F,x as S}from"./index-02287068.js";import{C as V}from"./ComponentSkeleton-4f40dd0d.js";import{separateByComma as k}from"./report-5dae7cc6.js";import{R as M}from"./ReactFixedHeaderTable-f6811d82.js";import"./Skeleton-a7a44ee7.js";import"./LoadingButton-8f5c1f4c.js";import"./react-apexcharts.min-2b348c58.js";import"./ScrollX-9530b678.js";import"./Filter-a6bb46d5.js";import"./DownloadOutlined-34ff6092.js";import"./CaretUpOutlined-5a0f904f.js";import"./CaretDownOutlined-fa12115e.js";import"./TableRow-d1ac1caf.js";import"./TableCell-48555b4a.js";import"./Pagination-cd12c19c.js";import"./index-20722ef7.js";import"./Checkbox-85940eba.js";import"./MinusOutlined-284ef9dd.js";import"./RowEditable-23774dfe.js";import"./LinearWithLabel-aba1e1c5.js";import"./Slider-7603360b.js";import"./visuallyHidden-14c3de6e.js";import"./TableContainer-bb6a8c0d.js";import"./TableHead-d7a43d35.js";import"./SendOutlined-50cb1b7e.js";const pt=()=>{const{type:r,tab:G}=N(),g=U(),[P,j]=l.useState([]),[d,R]=l.useState([]),[w,i]=l.useState(""),b=l.useMemo(()=>[{header:"",accessorKey:"day",dataType:"text"},...d.map(m=>({header:m.name,accessorKey:m.name,dataType:"text",cell:k}))],[d]);return l.useEffect(()=>{(async()=>{const p=await S.get("/api/reports");if(p.status===200){R(p.data.games);const c=p.data.games.reduce((t,e)=>(t[e.name]=e.launchDate,t),{}),h=p.data.data.filter(t=>{const e=c[t.game];return G=="exclusive"?new Date(t.summary)<new Date(e):new Date(e)<=new Date(t.summary)});h.sort((t,e)=>new Date(t.summary)-new Date(e.summary));const x=h.reduce((t,{game:e,ggrEuro:n,uniquePlayers:a,spins:s,betsEuro:u})=>(t[e]||(t[e]={name:e,users:[],totalGGR:[],spinsPerUser:[],totalCoins:[],cwpp:[],totalCoinsWageredPerDay:[],totalGGRValue:0,totalCoinValue:0}),t[e].totalGGRValue+=n,t[e].totalCoinValue+=u,t[e].users.push(a.toFixed(2)),t[e].totalGGR.push(t[e].totalGGRValue.toFixed(2)),t[e].spinsPerUser.push((s/a).toFixed(2)),t[e].cwpp.push((u/a).toFixed(2)),t[e].totalCoins.push(t[e].totalCoinValue.toFixed(2)),t[e].totalCoinsWageredPerDay.push(u.toFixed(2)),t),{}),T=Math.max(...Object.values(x).map(t=>t.users.length)),f=[],y=Object.keys(c);for(let t=0;t<T;t++){const e={day:`Day ${t+1}`};for(let n=0;n<y.length;n++){const a=y[n],s=x[a];s?r==="users"?e[a]=Number(t<s.users.length?s.users[t]:0):r==="totalGGR"?e[a]=Number(t<s.totalGGR.length?s.totalGGR[t]:0):r==="spinsPerUser"?e[a]=Number(t<s.spinsPerUser.length?s.spinsPerUser[t]:0):r==="totalCoins"?e[a]=Number(t<s.totalCoins.length?s.totalCoins[t]:0):r==="cwpp"?e[a]=Number(t<s.cwpp.length?s.cwpp[t]:0):r==="totalCoinsWageredPerDay"&&(e[a]=Number(t<s.totalCoinsWageredPerDay.length?s.totalCoinsWageredPerDay[t]:0)):(console.error(`Missing data for game: ${a}`),e[a]=0)}f.push(e)}j(f)}})(),r==="users"?i("Users"):r==="totalGGR"?i("Total GGR"):r==="spinsPerUser"?i("Spins Per User"):r==="totalCoins"?i("Total Coins"):r==="cwpp"?i("CWPP"):r==="totalCoinsWageredPerDay"&&i("Total Coins Wagered Per Day")},[]),o.jsx(V,{children:o.jsx(W,{title:"",children:o.jsxs(D,{item:!0,xs:12,lg:12,children:[o.jsx(C,{mb:3,spacing:1,children:o.jsx(D,{item:!0,children:o.jsx(v,{variant:"contained",onClick:()=>g(-1),children:"Back"})})}),o.jsxs(C,{mb:5,spacing:3,children:[o.jsx(F,{variant:"h2",textAlign:"center",children:w}),o.jsx(M,{data:P,columns:b,setData:()=>{},height:"600px"})]})]})})})};export{pt as default};
