import{y as v,z as w,r as n,j as r,M as S,G,p as D,d as N,T as V,x as k}from"./index-c1c2e291.js";import{C as M}from"./ComponentSkeleton-d6b00974.js";import{separateByComma as F,ReactTable as A}from"./report-35569411.js";import"./Skeleton-b4ab4933.js";import"./LoadingButton-b94afddc.js";import"./react-apexcharts.min-cf743825.js";import"./ScrollX-0a20d925.js";import"./Filter-ec0c3f36.js";import"./DownloadOutlined-535a5d6a.js";import"./CaretUpOutlined-0d031899.js";import"./CaretDownOutlined-a8fbfcf8.js";import"./TableRow-92b94554.js";import"./TableCell-1d3e906e.js";import"./Pagination-f254214f.js";import"./index-ec2e30b8.js";import"./Checkbox-96230752.js";import"./MinusOutlined-c636c7ec.js";import"./RowEditable-f106a8e1.js";import"./LinearWithLabel-0c2a830a.js";import"./Slider-8d51c9b7.js";import"./visuallyHidden-14c3de6e.js";import"./TableContainer-7a3bef71.js";import"./TableHead-77c30d00.js";import"./SendOutlined-01f8e688.js";const lt=()=>{const{type:o,tab:y}=v(),C=w(),[g,j]=n.useState([]),[c,R]=n.useState([]),[b,l]=n.useState(""),T=n.useMemo(()=>[{header:"",accessorKey:"day",dataType:"text"},...c.map(m=>({header:m.name,accessorKey:m.name,dataType:"text",cell:F}))],[c]);return n.useEffect(()=>{(async()=>{const p=await k.get("/api/reports");if(p.status===200){R(p.data.games);const d=p.data.games.reduce((t,e)=>(t[e.name]=e.launchDate,t),{}),u=p.data.data.filter(t=>{const e=d[t.game];return y=="exclusive"?new Date(t.summary)<new Date(e):new Date(e)<=new Date(t.summary)});console.log("filteredDatafilteredData",u),u.sort((t,e)=>new Date(t.summary)-new Date(e.summary));const h=u.reduce((t,{game:e,ggrEuro:i,uniquePlayers:a,spins:s,betsEuro:U})=>(t[e]||(t[e]={name:e,users:[],totalGGR:[],spinsPerUser:[],totalCoins:[],totalGGRValue:0,totalCoinValue:0}),t[e].totalGGRValue+=i,t[e].totalCoinValue+=U,t[e].users.push(a.toFixed(2)),t[e].totalGGR.push(t[e].totalGGRValue.toFixed(2)),t[e].spinsPerUser.push((s/a).toFixed(2)),t[e].totalCoins.push(t[e].totalCoinValue.toFixed(2)),t),{}),P=Math.max(...Object.values(h).map(t=>t.users.length)),f=[],x=Object.keys(d);for(let t=0;t<P;t++){const e={day:`Day ${t+1}`};for(let i=0;i<x.length;i++){const a=x[i],s=h[a];s?o==="users"?e[a]=Number(t<s.users.length?s.users[t]:0):o==="totalGGR"?e[a]=Number(t<s.totalGGR.length?s.totalGGR[t]:0):o==="spinsPerUser"?e[a]=Number(t<s.spinsPerUser.length?s.spinsPerUser[t]:0):o==="totalCoins"&&(e[a]=Number(t<s.totalCoins.length?s.totalCoins[t]:0)):(console.error(`Missing data for game: ${a}`),e[a]=0)}f.push(e)}j(f)}})(),o==="users"?l("Users"):o==="totalGGR"?l("Total GGR"):o==="spinsPerUser"?l("Spins Per User"):o==="totalCoins"&&l("Total Coins")},[]),r.jsx(M,{children:r.jsx(S,{title:"",children:r.jsxs(G,{item:!0,xs:12,lg:12,children:[r.jsx(D,{mb:3,spacing:1,children:r.jsx(G,{item:!0,children:r.jsx(N,{variant:"contained",onClick:()=>C(-1),children:"Back"})})}),r.jsxs(D,{mb:5,spacing:3,children:[r.jsx(V,{variant:"h2",textAlign:"center",children:b}),r.jsx(A,{data:g,columns:T,setData:()=>{}})]})]})})})};export{lt as default};
