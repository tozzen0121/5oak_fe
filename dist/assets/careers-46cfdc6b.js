import{P as p,c as R,r as n,j as e,p as l,T as S,L as M,aE as I,a9 as P,I as F,b8 as E,x as k,ac as v,t as A,M as _,B as y,a6 as H,ai as L}from"./index-753a7d60.js";import{u as V,g as B,a as K,b as N,c as O,d as z,S as $,f as w}from"./ScrollX-9ba80633.js";import{r as G}from"./index-481cdf3e.js";import Q from"./empty-0468adea.js";import{D as U,S as W,R as X,H as q,T as J}from"./Filter-b89e78b9.js";import"./LinearWithLabel-f218b33a.js";import"./CustomerModal-38061bec.js";import{E as Y}from"./ExpandingUserDetail-b657a3f7.js";import{T as Z,a as ee,b as te}from"./TableContainer-06e18050.js";import{T as oe}from"./TableHead-d2f9d13c.js";import{T as b}from"./TableRow-b60b9c81.js";import{T as C}from"./TableCell-79ad539b.js";import{D as ae}from"./DeleteOutlined-6b62c380.js";import"./TableFooter-955c2f2d.js";import"./DownloadOutlined-bfcff9d7.js";import"./CaretUpOutlined-e2fa5e38.js";import"./CaretDownOutlined-3028d4ee.js";import"./Pagination-f08e9217.js";import"./index-f2e45a1e.js";import"./Checkbox-169b94f6.js";import"./MinusOutlined-1a48a8af.js";import"./react-number-format.es-e9ce6ec1.js";import"./MailOutlined-18c6a64c.js";import"./PhoneOutlined-46559109.js";import"./EnvironmentOutlined-17c2452d.js";const se=(d,i,u,m)=>{const r=G(d.getValue(i),u);return m(r),r.passed};function T({data:d,columns:i,modalToggler:u}){const m=R(),r=v(m.breakpoints.down("sm")),[h,g]=n.useState([{id:"id",desc:!0}]),[c,j]=n.useState({}),[x,f]=n.useState(""),t=V({data:d,columns:i,state:{sorting:h,rowSelection:c,globalFilter:x},enableRowSelection:!0,onSortingChange:g,onRowSelectionChange:j,onGlobalFilterChange:f,getRowCanExpand:()=>!0,getSortedRowModel:B(),getFilteredRowModel:K(),getCoreRowModel:N(),getPaginationRowModel:O(),getExpandedRowModel:z(),globalFilterFn:se,debugTable:!0}),s=A(m.palette.primary.lighter,.1);let D=[];return i.map(a=>a.accessorKey&&D.push({label:typeof a.header=="string"?a.header:"#",key:a.accessorKey})),e.jsxs(_,{content:!1,children:[e.jsxs(l,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...r&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(U,{value:x??"",onFilterChange:a=>f(String(a)),placeholder:`Search ${d.length} records...`}),e.jsxs(l,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(W,{getState:t.getState,getAllColumns:t.getAllColumns,setSorting:g}),e.jsx(l,{direction:"row",spacing:2,alignItems:"center"})]})]}),e.jsx($,{children:e.jsxs(l,{children:[e.jsx(X,{selected:Object.keys(c).length}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(oe,{children:t.getHeaderGroups().map(a=>e.jsx(b,{children:a.headers.map(o=>(o.column.columnDef.meta!==void 0&&o.column.getCanSort()&&Object.assign(o.column.columnDef.meta,{className:o.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(C,{...o.column.columnDef.meta,onClick:o.column.getToggleSortingHandler(),...o.column.getCanSort()&&o.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:o.isPlaceholder?null:e.jsxs(l,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(y,{children:w(o.column.columnDef.header,o.getContext())}),o.column.getCanSort()&&e.jsx(q,{column:o.column})]})},o.id)))},a.id))}),e.jsx(te,{children:t.getRowModel().rows.map(a=>e.jsxs(n.Fragment,{children:[e.jsx(b,{children:a.getVisibleCells().map(o=>e.jsx(C,{...o.column.columnDef.meta,children:w(o.column.columnDef.cell,o.getContext())},o.id))}),a.getIsExpanded()&&e.jsx(b,{sx:{bgcolor:s,"&:hover":{bgcolor:`${s} !important`}},children:e.jsx(C,{colSpan:a.getVisibleCells().length,children:e.jsx(Y,{data:a.original})})})]},a.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(y,{sx:{p:2},children:e.jsx(J,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})})]})]})})]})}T.propTypes={columns:p.array,data:p.array,getHeaderProps:p.func,handleAdd:p.func,modalToggler:p.func,renderRowSubComponent:p.any};const Fe=()=>{const d=R(),[i,u]=n.useState([]),[m,r]=n.useState(!1),[h,g]=n.useState(!1),[c,j]=n.useState(""),x=()=>{g(!h)};n.useEffect(()=>{(async()=>{try{r(!0);const{data:s}=await L("/api/applicant");u(s),r(!1)}catch{r(!1)}})()},[]);const f=n.useMemo(()=>[{header:"Role",accessorKey:"job_title",cell:({row:t,getValue:s})=>e.jsx(l,{direction:"row",spacing:1.5,alignItems:"center",children:e.jsx(S,{color:"text.secondary",children:t.original.job_title})})},{header:"Candidate Name",accessorKey:"name",cell:({row:t,getValue:s})=>e.jsx(l,{direction:"row",spacing:1.5,alignItems:"center",children:e.jsx(M,{to:`/admin/applicant/${t.original._id}`,style:{textDecoration:"none"},children:e.jsx(S,{color:"blue",sx:{fontWeight:900},children:t.original.name})})})},{header:"Date Applied",accessorKey:"created_at",cell:({row:t,getValue:s})=>e.jsx(S,{color:"text.secondary",children:I(new Date(t.original.created_at),"dd/MM/yyyy")})},{header:"Actions",meta:{className:"cell-center"},disableSortBy:!0,cell:({row:t})=>e.jsx(l,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:e.jsx(P,{title:"Delete",children:e.jsx(F,{color:"error",onClick:s=>{s.stopPropagation(),x(),g(!0),j(t.original._id)},children:e.jsx(ae,{})})})})}],[d]);return m?e.jsx(Q,{}):e.jsxs(e.Fragment,{children:[e.jsx(T,{data:i,columns:f,modalToggler:()=>{}}),e.jsx(E,{id:c,title:c,open:h,handleClose:x,deletehandler:async()=>{try{await k.delete(`/api/applicant/${c}`),u(i.filter(t=>t._id!==c)),g(!1),j("")}catch{}}})]})};export{Fe as default,se as fuzzyFilter};
