import{P as O,a3 as Dt,r as c,j as e,M as se,aV as Ee,am as gt,G as N,p as R,T as j,L as B,d as _,aB as yt,B as ft,aO as Pe,aP as jt,D as Re,aS as wt,a9 as Ce,I as Te,Z as mt,x as ie,H as xe}from"./index-c1c2e291.js";import{C as St}from"./ComponentSkeleton-d6b00974.js";import{L as ve}from"./LoadingButton-b94afddc.js";import{_ as ee}from"./react-apexcharts.min-cf743825.js";import{u as Gt,S as Pt,f as be,b as Rt}from"./ScrollX-0a20d925.js";import"./Filter-ec0c3f36.js";import{E as Ct,R as Tt}from"./RowEditable-f106a8e1.js";import"./LinearWithLabel-0c2a830a.js";import{T as vt,a as bt,b as Lt}from"./TableContainer-7a3bef71.js";import{T as kt}from"./TableHead-77c30d00.js";import{T as Le}from"./TableRow-92b94554.js";import{T as ke}from"./TableCell-1d3e906e.js";import{S as Et}from"./Slider-8d51c9b7.js";import{S as Ut}from"./SendOutlined-01f8e688.js";import"./Skeleton-b4ab4933.js";import"./DownloadOutlined-535a5d6a.js";import"./CaretUpOutlined-0d031899.js";import"./CaretDownOutlined-a8fbfcf8.js";import"./Pagination-f254214f.js";import"./index-ec2e30b8.js";import"./Checkbox-96230752.js";import"./MinusOutlined-c636c7ec.js";import"./visuallyHidden-14c3de6e.js";const Ue=({row:x,table:p})=>{var k;const u=(k=p==null?void 0:p.options)==null?void 0:k.meta,F=I=>{u==null||u.setSelectedRow(T=>({...T,[x.id]:!T[x.id]})),u==null||u.revertData(x.index,(I==null?void 0:I.currentTarget.name)==="cancel")},L=()=>{u==null||u.saveData(x.index)};return e.jsxs(R,{direction:"row",spacing:1,alignItems:"center",children:[(u==null?void 0:u.selectedRow[x.id])&&e.jsx(Ce,{title:"Cancel",children:e.jsx(Te,{color:"error",name:"cancel",onClick:F,children:e.jsx(mt,{})})}),e.jsx(Ce,{title:u!=null&&u.selectedRow[x.id]?"Save":"Edit",children:e.jsx(Te,{color:u!=null&&u.selectedRow[x.id]?"success":"primary",onClick:u!=null&&u.selectedRow[x.id]?L:F,children:u!=null&&u.selectedRow[x.id]?e.jsx(Ut,{}):e.jsx(Ct,{})})})]})};Ue.propTypes={row:O.object,table:O.object,options:O.array,id:O.number,index:O.number};O.node,O.number,O.number;const Ae=Dt("input")({display:"none"});Ae.displayName="Input";const ce=x=>{let p=0,u=x.length-1;for(;p<x.length&&Number(x[p])===0;)p++;for(;u>=0&&Number(x[u])===0;)u--;return x.slice(p,u+1)},At=(x,p,u)=>x.map(L=>{const k=ce(L.data);return{...L,data:k.slice(0,14)}}),le=({getValue:x})=>{const p=x();return`${Number((p||0).toFixed(2)).toLocaleString()}`};function ne({columns:x,data:p,setData:u}){const[F,L]=c.useState(()=>[...p]),[k,I]=c.useState({}),T=Gt({data:p,columns:x,defaultColumn:{cell:Tt},getCoreRowModel:Rt(),meta:{selectedRow:k,setSelectedRow:I,revertData:(y,i)=>{i?u(f=>f.map((s,a)=>a===y?F[y]:s)):L(f=>f.map((s,a)=>a===y?p[y]:s))},updateData:(y,i,f)=>{u(s=>s.map((a,E)=>E===y?{...s[y],[i]:f}:a))},saveData:async y=>{try{const i=p[y],f=await ie.put(`/api/launchGames/${i._id}`,i);xe({open:!0,message:"Saved successfully!",variant:"alert",alert:{color:"success"}}),I(s=>({...s,[y]:!1}))}catch{xe({open:!0,message:"Error!",variant:"alert",alert:{color:"error"}})}}},debugTable:!0});let $=[];return T.getAllColumns().map(y=>y.columnDef.accessorKey&&$.push({label:typeof y.columnDef.header=="string"?y.columnDef.header:"#",key:y.columnDef.accessorKey})),e.jsx(se,{content:!1,children:e.jsx(Pt,{children:e.jsx(vt,{children:e.jsxs(bt,{children:[e.jsx(kt,{children:T.getHeaderGroups().map(y=>e.jsx(Le,{children:y.headers.map(i=>e.jsx(ke,{...i.column.columnDef.meta,children:i.isPlaceholder?null:be(i.column.columnDef.header,i.getContext())},i.id))},y.id))}),e.jsx(Lt,{children:T.getRowModel().rows.map(y=>e.jsx(Le,{children:y.getVisibleCells().map(i=>e.jsx(ke,{...i.column.columnDef.meta,children:be(i.column.columnDef.cell,i.getContext())},i.id))},y.id))})]})})})})}ne.propTypes={columns:O.array,data:O.array,setData:O.func};function Wt({data:x,games:p}){const u=Ee(),[F,L]=c.useState(u.pathname==="/admin/report"),[k,I]=c.useState([]),[T,$]=c.useState([]);c.useEffect(()=>{const i=[...new Set(x.map(s=>s.summary.split("-")[0]))];$(i);const f=Object.values(x.reduce((s,{game:a,summary:E,betsEuro:de,winsEuro:De,ggrEuro:z,avgBet:ge,spins:we,uniquePlayers:ye})=>{s[a]||(s[a]={_id:"",name:a,maxDate:E,years:{},totalGGR:0,latestWeekStart:"",secLatestWeekStart:"",latestWeekGGR:[],secLatestWeekGGR:[],remainDays:0,weekAverage:0,weekChange:0,weekChangeColor:"",dailyTotalGGR:0,projectedTotalGGR:0});const Z=p.find(ae=>ae.name===a);if(s[a].launchDate=Z.launchDate,s[a]._id=Z._id,new Date(Z.launchDate)<=new Date(E)){const ae=new Date(s[a].maxDate)<new Date(E);s[a].maxDate=ae?E:s[a].maxDate,s[a].dailyTotalGGR=ae?z:s[a].dailyTotalGGR,s[a].totalGGR+=z;const Y=E.split("-")[0];s[a].years[Y]||(s[a].years[Y]=0),s[a].years[Y]+=z,s[a][`totalGGR_${Y}`]||(s[a][`totalGGR_${Y}`]=0),s[a][`totalGGR_${Y}`]+=z;const ue=new Date(s[a].maxDate),fe=new Date(ue.getFullYear(),11,31);s[a].remainDays=Math.ceil((fe-ue)/(1e3*60*60*24));const pe=new Date(s[a].maxDate),V=new Date(pe);V.setDate(V.getDate()-6);const J=new Date(V);J.setDate(J.getDate()-7);const re=new Date(V);re.setDate(re.getDate()-1),s[a].latestWeekStart=V.toISOString().split("T")[0],s[a].secLatestWeekStart=J.toISOString().split("T")[0],s[a].latestWeekGGR=x.filter(S=>S.game===a&&new Date(S.summary)>=V&&new Date(S.summary)<=pe).map(S=>S.ggrEuro),s[a].secLatestWeekGGR=x.filter(S=>S.game===a&&new Date(S.summary)>=J&&new Date(S.summary)<=re).map(S=>S.ggrEuro),s[a].weekAverage=s[a].latestWeekGGR.reduce((S,K)=>S+K,0)/s[a].latestWeekGGR.length,s[a].weekChange=(s[a].latestWeekGGR.reduce((S,K)=>S+K,0)-s[a].secLatestWeekGGR.reduce((S,K)=>S+K,0))/s[a].secLatestWeekGGR.reduce((S,K)=>S+K,0)*100,s[a].weekChangeColor=e.jsx("span",{style:{color:s[a].weekChange>0?"green":"red"},children:`${Number(s[a].weekChange.toFixed(2)).toLocaleString()} %`}),s[a].projectedTotalGGR=s[a].totalGGR+s[a].weekAverage*s[a].remainDays}return s},{}));I(f)},[x,p]);const y=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text",cell:({getValue:i,row:f})=>{const s=i();return e.jsx(B,{style:{textDecoration:"none"},to:F?`/admin/report-one/${f.original._id}`:`/report-one/${f.original._id}`,children:s})}},{header:"Launch Date",accessorKey:"launchDate",dataType:"text",cell:({getValue:i,row:f,table:s})=>{var E;const a=i();return`${(E=a==null?void 0:a.split("T"))==null?void 0:E[0]}`}},{header:"Daily Total GGR",accessorKey:"dailyTotalGGR",dataType:"text",cell:le},{header:"Projected Total GGR",accessorKey:"projectedTotalGGR",dataType:"text",cell:le},...(T==null?void 0:T.map(i=>({header:`Total GGR ${i}`,accessorKey:`totalGGR_${i}`,dataType:"text",cell:le})))||[],{header:"Lifetime GGR",accessorKey:"totalGGR",dataType:"text",cell:le},{header:"7 Day Average",accessorKey:"weekAverage",dataType:"text",cell:le},{header:"7 Day Change",accessorKey:"weekChangeColor",dataType:"text"},{header:"Latest Report Date",accessorKey:"maxDate",dataType:"text",cell:({getValue:i,row:f,table:s})=>{var E;const a=i();return`${(E=a==null?void 0:a.split("T"))==null?void 0:E[0]}`}}],[T]);return e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(N,{container:!0,spacing:2,mb:5,children:[e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(j,{variant:"h5",textAlign:"center",children:"Lifetime GGR - "}),e.jsx(j,{variant:"h6",textAlign:"center",children:Number(k.reduce((i,f)=>i+f.totalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(j,{variant:"h5",textAlign:"center",children:"Daily Total GGR -"}),e.jsx(j,{variant:"h6",textAlign:"center",children:Number(k.reduce((i,f)=>i+f.dailyTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(j,{variant:"h5",textAlign:"center",children:`Projected GGR ${T.reduce((i,f)=>Math.max(i,f),-1/0)} -`}),e.jsx(j,{variant:"h6",textAlign:"center",children:Number(k.reduce((i,f)=>i+f.projectedTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:T==null?void 0:T.map((i,f)=>e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"start",children:[e.jsx(j,{variant:"h5",textAlign:"center",children:`Total GGR ${i} - `}),e.jsx(j,{variant:"h6",textAlign:"center",children:Number(k.reduce((s,a)=>s+(a[`totalGGR_${i}`]||0),0)).toLocaleString()})]},f))})})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"Games Data"}),e.jsx(ne,{data:k,columns:y})]})]})}const te={chart:{height:100,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:3},xaxis:{categories:[]}},is=()=>{const x=Ee(),[p,u]=c.useState(x.pathname==="/admin/report"),{user:F}=gt();c.useState(0);const[L,k]=c.useState(!1),[I,T]=c.useState(!1),[$,y]=c.useState([]),[i,f]=c.useState([]),[s,a]=c.useState([]),[E,de]=c.useState(!0),[De,z]=c.useState(""),[ge,we]=c.useState(""),[ye,Z]=c.useState(!1),[ae,Y]=c.useState([]),[ue,fe]=c.useState([]),[pe,V]=c.useState([]),[J,re]=c.useState([]),[S,K]=c.useState([]),[We,Oe]=c.useState(te),[Ie,$e]=c.useState(te),[Ne,Fe]=c.useState(te),[Ke,qe]=c.useState(te),[Me,_e]=c.useState(te),[Be,Ot]=c.useState(new Date().toISOString().split("T")[0]),[Ye,Ve]=c.useState([]),[He,Xe]=c.useState(te),[ze,Ze]=c.useState([]),[Je,Qe]=c.useState([]),[et,tt]=c.useState([]),[st,nt]=c.useState([]),[U,me]=c.useState([1,37]),[at,rt]=c.useState(0),ot=(h,v)=>{console.log("newRange",v),me(v)},lt=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"Launch Date",accessorKey:"launchDate",dataType:"date",cell:({getValue:h,row:v,table:d})=>{var n,r;const b=(n=d==null?void 0:d.options)==null?void 0:n.meta,q=(r=b==null?void 0:b.selectedRow)==null?void 0:r[v.id],H=h(),X=H?new Date(H).toISOString().split("T")[0]:"";return q?e.jsx("input",{type:"date",value:X,onChange:o=>b==null?void 0:b.updateData(v.index,"launchDate",o.target.value)}):X}},{header:"Actions",id:"edit",cell:Ue,meta:{className:"cell-center"}}],[]),it=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"TOTAL GGR",accessorKey:"data",dataType:"text",cell:({getValue:h,row:v,table:d})=>{const b=h();return`${(Number(b[b.length-1])||0).toLocaleString()}`}}],[]),Se=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"}],[]);c.useEffect(()=>{const h=[];for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n),h.push(r.toISOString().split("T")[0])}const v=i.reduce((n,{game:r,summary:o})=>{if(!n[r]){const w=s.find(m=>m.name===r);n[r]={...w,maxDate:o}}const D=new Date(n[r].maxDate)<new Date(o);return n[r].maxDate=D?o:n[r].maxDate,n},{}),d={},q=Object.values(i.reduce((n,{game:r,summary:o,ggrEuro:D,spins:w,uniquePlayers:m,betsEuro:P})=>{n[r]||(n[r]={name:r,ggrEuro:[],spins:[],uniquePlayers:[],SPU:[],CWPP:[]});const G=s.find(he=>he.name===r);new Date(G==null?void 0:G.launchDate)<new Date(o),d[r]&&new Date(d[r])<new Date(o.split("T")[0])?d[r]=o.split("T")[0]:d[r]||(d[r]=o.split("T")[0]);const M=new Date(v[r].maxDate)||new Date,Q=new Date(M);return Q.setDate(Q.getDate()-6),new Date(o)>=Q&&new Date(o)<=M&&(n[r].ggrEuro.push(D),n[r].spins.push(w),n[r].uniquePlayers.push(m),n[r].SPU.push(w/m),n[r].CWPP.push(P/m)),n},{})).map(n=>{const r=n.ggrEuro,o=n.spins,D=n.uniquePlayers,w=n.SPU,m=n.CWPP;return{name:n.name,ggrEuro:Number((r.length>0?r.reduce((P,G)=>P+G,0)/r.length:0).toFixed(2)).toLocaleString(),spins:Number((o.length>0?o.reduce((P,G)=>P+G,0)/o.length:0).toFixed(2)).toLocaleString(),uniquePlayers:Number((D.length>0?D.reduce((P,G)=>P+G,0)/D.length:0).toFixed(2)).toLocaleString(),SPU:Number((w.length>0?w.reduce((P,G)=>P+G,0)/w.length:0).toFixed(2)).toLocaleString(),CWPP:Number((m.length>0?m.reduce((P,G)=>P+G,0)/m.length:0).toFixed(2)).toLocaleString()}});V(q);const X=Object.values(i.reduce((n,{game:r,summary:o,ggrEuro:D,spins:w,uniquePlayers:m,betsEuro:P})=>{n[r]||(n[r]={name:r,ggrEuros:[],ggrEuro:0,ggrEuro2:0,spins:0,spins2:0,uniquePlayers:0,uniquePlayers2:0,SPU:0,SPU2:0,CWPP:0,CWPP2:0,arrSpins:[],arrSpins2:[]});const G=new Date(d[r]);G.setDate(G.getDate()-7);const M=new Date(d[r]);return M.setDate(M.getDate()-14),G<new Date(o)?(n[r].ggrEuros.push(D),n[r].arrSpins.push(w),n[r].ggrEuro+=D,n[r].spins+=w,n[r].uniquePlayers+=m,n[r].SPU+=w/m,n[r].CWPP+=P/m):M<new Date(o)&&new Date(o)<=G&&(n[r].arrSpins2.push(w),n[r].ggrEuro2+=D,n[r].spins2+=w,n[r].uniquePlayers2+=m,n[r].SPU2+=w/m,n[r].CWPP2+=P/m),n},{})).map(n=>{const r=(n.ggrEuro-n.ggrEuro2)/(n.ggrEuro2||1),o=(n.spins-n.spins2)/(n.spins2||1),D=(n.uniquePlayers-n.uniquePlayers2)/(n.uniquePlayers2||1),w=(n.SPU-n.SPU2)/(n.SPU2||1),m=(n.CWPP-n.CWPP2)/(n.CWPP2||1);return{name:n.name,ggrEuro:e.jsx("span",{style:{color:r>=0?"green":"red"},children:`${(r*100).toFixed(2)} %`}),spins:e.jsx("span",{style:{color:o>=0?"green":"red"},children:`${(o*100).toFixed(2)} %`}),uniquePlayers:e.jsx("span",{style:{color:D>=0?"green":"red"},children:`${(D*100).toFixed(2)} %`}),SPU:e.jsx("span",{style:{color:w>=0?"green":"red"},children:`${(w*100).toFixed(2)} %`}),CWPP:e.jsx("span",{style:{color:m>=0?"green":"red"},children:`${(m*100).toFixed(2)} %`})}});re(X)},[ue,i,s]);const Ge=async()=>{var h,v;try{const d=await ie.get("api/reports");if(console.log("response.data.data",d.data.data),console.log("response.data.setGames",d.data.games),y(d.data.data),a(d.data.games),d.data.games.length>0){const b=d.data.games.length>0?(v=(h=d.data.games)==null?void 0:h.reduce((o,D)=>new Date(D.launchDate)<new Date(o.launchDate)?D:o).launchDate)==null?void 0:v.split("T")[0]:new Date().toISOString().split("T")[0],q=[...d.data.data].filter(o=>new Date(o.summary)>=new Date(b));q.sort((o,D)=>new Date(o.summary)-new Date(D.summary));const H=[],X=Object.values(q.reduce((o,{game:D,ggrEuro:w,summary:m})=>{o[D]||(o[D]={name:D,data:[],totalGGR:0});const P=d.data.games.find(G=>G.name===D);return o[D].totalGGR+=new Date(P==null?void 0:P.launchDate)>new Date(m)?0:w,o[D].data.push(o[D].totalGGR.toFixed(2)),H.push(m.slice(0,10)),o},{}));let n=0;const r=X.map(o=>(n=Math.max(n,o.data.length),{...o,data:ce(o.data)}));console.log("min, max",n),rt(n),me([1,n])}}catch{}},ct=async()=>{const h=localStorage.getItem("reportToken");de(h!=="true"),Ge()};c.useEffect(()=>{ct()},[]);const dt=async h=>{if(h.target.files.length>0){const v=h.target.files[0];if(!v){alert("Please select a file first.");return}k(!0);const d=new FormData;d.append("file",v);try{const b=await ie.post("api/reports/upload",d,{headers:{"Content-Type":"multipart/form-data"}});xe({open:!0,message:"Excel uploaded successfully!",variant:"alert",alert:{color:"success"}}),Ge(),k(!0)}catch(b){console.error("Upload Error:",b),alert("Error uploading file.")}finally{k(!1),h.target.value=""}}},ut=async()=>{T(!0);try{const h=await ie.get("api/reports/download",{responseType:"blob"}),v=window.URL.createObjectURL(new Blob([h.data])),d=document.createElement("a");d.href=v,d.setAttribute("download","report.xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(h){console.error("Download Error:",h),xe({open:!0,message:"Excel not exists!",variant:"alert",alert:{color:"error"}})}finally{T(!1)}};c.useEffect(()=>{var h;if(s.length>0){const v=s.length>0?(h=s==null?void 0:s.reduce((t,l)=>new Date(l.launchDate)<new Date(t.launchDate)?l:t).launchDate)==null?void 0:h.split("T")[0]:new Date().toISOString().split("T")[0],d=[...$].filter(t=>new Date(t.summary)>=new Date(v));d.sort((t,l)=>new Date(t.summary)-new Date(l.summary));const b=[],q=Object.values(d.reduce((t,{game:l,ggrEuro:g,summary:W})=>{t[l]||(t[l]={name:l,data:[],totalGGR:0});const C=s.find(A=>A.name===l);return t[l].totalGGR+=new Date(C==null?void 0:C.launchDate)>new Date(W)?0:g,t[l].data.push(t[l].totalGGR.toFixed(2)),b.push(W.slice(0,10)),t},{}));let H=0;const n=q.map(t=>(H=Math.max(H,t.data.length),{...t,data:ce(t.data)})).map(t=>{const l=U[0]-1,g=U[1]-1;return t.data=t.data.slice(l,g+1),t});K(n);const r=[...new Set(b)];fe(r);const o=[];for(let t=U[0];t<=U[1];t++)o.push(`Day ${t}`);const D=$==null?void 0:$.map(t=>({...t,SPU:t.spins/t.uniquePlayers,CWPP:t.betsEuro/t.uniquePlayers}));f(D);const w=[];for(let t=0;t<14;t++)w.push(`Day ${t+1}`);Xe(t=>({...t,xaxis:{categories:w,labels:{show:!1}}})),Ve(At(q));const P=Object.values(d.reduce((t,{game:l,summary:g,uniquePlayers:W})=>{t[l]||(t[l]={name:l,data:[]});const C=s.find(A=>A.name===l);return new Date(C==null?void 0:C.launchDate)<=new Date(g)&&t[l].data.push(W),t},{})).map(t=>{const l=U[0]-1,g=U[1]-1;return t.data=t.data.slice(l,g+1),t});console.log("filterUsersData1",P),Ze(P);const G=t=>{if(t.length<6)return[];let l=new Array(5).fill(0);for(let g=5;g<t.length;g++){let W=t.slice(g-4,g+1).reduce((oe,je)=>oe+je,0),C=t.slice(g-5,g).reduce((oe,je)=>oe+je,0),A=((W-C)/(C||1)*100).toFixed(2);l.push(A)}return l},M=Object.values(d.reduce((t,{game:l,summary:g,uniquePlayers:W})=>{t[l]||(t[l]={name:l,data:[]});const C=s.find(A=>A.name===l);return new Date(C==null?void 0:C.launchDate)<=new Date(g)&&t[l].data.push(W),t},{})),Q=M.map(t=>({...t,data:G(t.data)}));console.log("usersData2",Q);const he=Q.map(t=>{const l=U[0]-1,g=U[1]-1;return t.data=t.data.slice(l,g+1),{...t,data:t.data}});console.log("filterUserChangesData",he),Qe(he),console.log("usersData",M);const ht=Object.values(d.reduce((t,{game:l,spins:g,summary:W})=>{t[l]||(t[l]={name:l,data:[]});const C=s.find(A=>A.name===l);return t[l].data.push(new Date(C==null?void 0:C.launchDate)>new Date(W)?0:g),t},{})).map(t=>{const l=U[0]-1,g=U[1]-1;return t.data=t.data.slice(l,g+1),{...t,data:ce(t.data)}});tt(ht);const xt=Object.values(d.reduce((t,{game:l,spins:g,uniquePlayers:W,summary:C})=>{t[l]||(t[l]={name:l,data:[]});const A=s.find(oe=>oe.name===l);return t[l].data.push(new Date(A==null?void 0:A.launchDate)>new Date(C)?0:(g/W).toFixed(2)),t},{})).map(t=>{const l=U[0]-1,g=U[1]-1;return t.data=t.data.slice(l,g+1),{...t,data:ce(t.data)}});Y(o),console.log("days",o),Oe(t=>({...t,xaxis:{categories:o,labels:{show:!1}}})),$e(t=>({...t,xaxis:{categories:o,labels:{show:!1}}})),Fe(t=>({...t,xaxis:{categories:o,labels:{show:!1}}})),qe(t=>({...t,xaxis:{categories:o,labels:{show:!1}}})),_e(t=>({...t,xaxis:{categories:o,labels:{show:!1}}})),nt(xt)}},[$,Be,s,U]);const pt=async()=>{try{const h=await ie.post("api/account/check",{email:p?F.email:ge,password:De});localStorage.setItem("reportToken","true"),Z(!1),de(!1)}catch{Z(!0)}};return e.jsxs(St,{children:[e.jsx(se,{children:!E&&e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"space-between",children:[e.jsxs(N,{item:!0,children:[e.jsxs("label",{htmlFor:"contained-button-file",children:[e.jsx(Ae,{accept:".xls,.xlsx",id:"contained-button-file",type:"file",onChange:dt}),e.jsx(ve,{loading:L,variant:"contained",component:"span",children:"Upload Excel"})]}),e.jsx(ve,{sx:{marginLeft:"10px"},loading:I,variant:"contained",component:"span",onClick:ut,children:"Download Excel"})]}),e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(j,{variant:"h5",textAlign:"right",children:"LAUNCH"}),e.jsx(B,{Link:!0,to:p?"/admin/report-type/users/launch":"/report-type/users/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:p?"/admin/report-type/totalGGR/launch":"/report-type/totalGGR/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:p?"/admin/report-type/spinsPerUser/launch":"/report-type/spinsPerUser/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:p?"/admin/report-type/totalCoins/launch":"/report-type/totalCoins/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total Coins"})})]})]}),e.jsx(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"end",children:e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(j,{variant:"h5",textAlign:"right",children:"EXCLUSIVE"}),e.jsx(B,{to:p?"/admin/report-type/users/exclusive":"/report-type/users/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:p?"/admin/report-type/totalGGR/exclusive":"/report-type/totalGGR/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:p?"/admin/report-type/spinsPerUser/exclusive":"/report-type/spinsPerUser/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:p?"/admin/report-type/totalCoins/exclusive":"/report-type/totalCoins/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total Coins"})})]})}),e.jsx(R,{mb:5,spacing:3,children:e.jsx(Wt,{data:$,games:s})}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"Launch Information"}),e.jsx(ne,{data:s,columns:lt,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"TOTAL REVENUE"}),e.jsx(ne,{data:S,columns:it,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"7 Day Averages"}),e.jsx(ne,{data:pe,columns:Se,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"7 Day Change (%) "}),e.jsx(ne,{data:J,columns:Se,setData:a})]}),e.jsxs(R,{mb:5,direction:"row",spacing:3,alignItems:"end",justifyContent:"center",children:[e.jsx(j,{variant:"h2",textAlign:"right",sx:{width:"80%"},children:"Day Setting"}),e.jsx(Et,{getAriaLabel:()=>"Temperature range",value:U,max:at,min:1,onChange:ot,valueLabelDisplay:"auto",valueLabelFormat:h=>`Day ${h}`,sx:{width:"20%"}})]}),e.jsxs(R,{mb:5,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"Total GGR"}),e.jsx(ee,{options:We,series:S,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"USERS"}),e.jsx(ee,{options:Ie,series:ze,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"USER 5 Day Change (%)"}),e.jsx(ee,{options:Ne,series:Je,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"SPINS PER DAY"}),e.jsx(ee,{options:Ke,series:et,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"SPINS PER PLAYER"}),e.jsx(ee,{options:Me,series:st,type:"line",height:500})]}),e.jsxs(R,{children:[e.jsx(j,{variant:"h2",textAlign:"center",children:"14 DAY LAUNCH"}),e.jsx(ee,{options:He,series:Ye,type:"line",height:500})]})]})}),e.jsx(yt,{open:E,maxWidth:"xs",children:e.jsxs(ft,{sx:{p:1,py:1.5},children:[p?e.jsx(Pe,{children:"Confirm Password"}):e.jsx(Pe,{children:"Login"}),e.jsxs(jt,{children:[e.jsxs(R,{spacing:1,mb:2,children:[!p&&e.jsx(Re,{name:"email",placeholder:"Email",type:"email",fullWidth:!0,variant:"outlined",value:ge,onChange:h=>we(h.target.value)}),e.jsx(Re,{name:"password",placeholder:"Password",type:"password",fullWidth:!0,variant:"outlined",value:De,onChange:h=>z(h.target.value)})]}),ye&&p&&e.jsx(j,{variant:"h6",color:"red",children:"Password is wrong."}),ye&&!p&&e.jsx(j,{variant:"h6",color:"red",children:"Credentials is wrong."}),"          "]}),e.jsx(wt,{children:e.jsx(_,{variant:"contained",onClick:pt,children:"Confirm"})})]})})]})};export{ne as ReactTable,is as default,le as separateByComma};
