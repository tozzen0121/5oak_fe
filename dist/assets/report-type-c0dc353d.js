import{y as P,z as U,r as n,j as o,M as S,G,p as f,d as v,T as N,x as V}from"./index-22c328f7.js";import{C as k}from"./ComponentSkeleton-c6eec1fd.js";import{separateByComma as w,ReactTable as F}from"./report-4f26f57f.js";import"./Skeleton-276ea468.js";import"./LoadingButton-23e6240d.js";import"./react-apexcharts.min-7924397a.js";import"./ScrollX-4ed5c916.js";import"./Filter-454bc8d8.js";import"./DownloadOutlined-eb6f53dd.js";import"./CaretUpOutlined-77b1b8be.js";import"./CaretDownOutlined-f659ab0d.js";import"./TableRow-26a6c0bb.js";import"./TableCell-97ce9cb3.js";import"./Pagination-b2be339d.js";import"./index-0f547e3f.js";import"./Checkbox-7b4c4348.js";import"./MinusOutlined-f3ddcfa6.js";import"./RowEditable-4399340b.js";import"./LinearWithLabel-b0b7ff5b.js";import"./Slider-77e63838.js";import"./visuallyHidden-14c3de6e.js";import"./TableContainer-de1f9420.js";import"./TableHead-9e7ad68b.js";import"./SendOutlined-8813dfe3.js";const nt=()=>{const{type:i}=P(),y=U(),[C,j]=n.useState([]),[u,D]=n.useState([]),[R,l]=n.useState(""),b=n.useMemo(()=>[{header:"",accessorKey:"day",dataType:"text"},...u.map(m=>({header:m.name,accessorKey:m.name,dataType:"text",cell:w}))],[u]);return n.useEffect(()=>{(async()=>{const p=await V.get("/api/reports");if(p.status===200){D(p.data.games);const d=p.data.games.reduce((t,e)=>(t[e.name]=e.launchDate,t),{}),c=[...p.data.data].filter(t=>new Date(t.summary)>=new Date(d[t.game]));c.sort((t,e)=>new Date(t.summary)-new Date(e.summary));const r=c.reduce((t,{game:e,ggrEuro:s,uniquePlayers:x,spins:T,betsEuro:$})=>(t[e]||(t[e]={name:e,users:[],totalGGR:[],spinsPerUser:[],totalCoins:[],totalGGRValue:0,totalCoinValue:0}),t[e].totalGGRValue+=s,t[e].totalCoinValue+=$,t[e].users.push(x.toFixed(2)),t[e].totalGGR.push(t[e].totalGGRValue.toFixed(2)),t[e].spinsPerUser.push((T/x).toFixed(2)),t[e].totalCoins.push(t[e].totalCoinValue.toFixed(2)),t),{}),g=Math.max(...Object.values(r).map(t=>t.users.length)),h=[],a=Object.keys(d);for(let t=0;t<g;t++){const e={day:`Day ${t+1}`};for(let s=0;s<a.length;s++)i==="users"?e[a[s]]=Number(t<r[`${a[s]}`].users.length?r[`${a[s]}`].users[t]:0):i==="totalGGR"?e[a[s]]=Number(t<r[`${a[s]}`].totalGGR.length?r[`${a[s]}`].totalGGR[t]:0):i==="spinsPerUser"?e[a[s]]=Number(t<r[`${a[s]}`].spinsPerUser.length?r[`${a[s]}`].spinsPerUser[t]:0):i==="totalCoins"&&(e[a[s]]=Number(t<r[`${a[s]}`].totalCoins.length?r[`${a[s]}`].totalCoins[t]:0));h.push(e)}j(h)}})(),i==="users"?l("Users"):i==="totalGGR"?l("Total GGR"):i==="spinsPerUser"?l("Spins Per User"):i==="totalCoins"&&l("Total Coins")},[]),o.jsx(k,{children:o.jsx(S,{title:"",children:o.jsxs(G,{item:!0,xs:12,lg:12,children:[o.jsx(f,{mb:3,spacing:1,children:o.jsx(G,{item:!0,children:o.jsx(v,{variant:"contained",onClick:()=>y(-1),children:"Back"})})}),o.jsxs(f,{mb:5,spacing:3,children:[o.jsx(N,{variant:"h2",textAlign:"center",children:R}),o.jsx(F,{data:C,columns:b,setData:()=>{}})]})]})})})};export{nt as default};
