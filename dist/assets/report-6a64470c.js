import{P as W,a3 as ot,r as c,j as e,M as te,aV as Ae,am as lt,G as N,p as R,T as m,L as B,d as _,aB as it,B as ct,aO as Re,aP as dt,D as Pe,aS as ut,a9 as Ce,I as Te,Z as pt,x as ie,H as he}from"./index-0e1e62d2.js";import{C as ht}from"./ComponentSkeleton-734c8697.js";import{L as ve}from"./LoadingButton-68ab7ebf.js";import{_ as Q}from"./react-apexcharts.min-ca731fc5.js";import{u as xt,S as Dt,f as be,b as gt}from"./ScrollX-cf124c77.js";import"./Filter-4d57ef23.js";import{E as yt,R as jt}from"./RowEditable-cf6427bc.js";import"./LinearWithLabel-81612522.js";import{T as ft,a as mt,b as wt}from"./TableContainer-68993b44.js";import{T as Gt}from"./TableHead-445041ea.js";import{T as Le}from"./TableRow-92869d0c.js";import{T as ke}from"./TableCell-28fbe66c.js";import{S as St}from"./Slider-e8d2e851.js";import{S as Rt}from"./SendOutlined-62eca5f0.js";import"./Skeleton-03b719d8.js";import"./DownloadOutlined-c29cb567.js";import"./CaretUpOutlined-4ac66c2b.js";import"./CaretDownOutlined-f88500a5.js";import"./Pagination-0cf02d6e.js";import"./index-f3276861.js";import"./Checkbox-8ecc4117.js";import"./MinusOutlined-3d9c8d06.js";import"./visuallyHidden-14c3de6e.js";const Ue=({row:x,table:p})=>{var L;const u=(L=p==null?void 0:p.options)==null?void 0:L.meta,F=I=>{u==null||u.setSelectedRow(C=>({...C,[x.id]:!C[x.id]})),u==null||u.revertData(x.index,(I==null?void 0:I.currentTarget.name)==="cancel")},b=()=>{u==null||u.saveData(x.index)};return e.jsxs(R,{direction:"row",spacing:1,alignItems:"center",children:[(u==null?void 0:u.selectedRow[x.id])&&e.jsx(Ce,{title:"Cancel",children:e.jsx(Te,{color:"error",name:"cancel",onClick:F,children:e.jsx(pt,{})})}),e.jsx(Ce,{title:u!=null&&u.selectedRow[x.id]?"Save":"Edit",children:e.jsx(Te,{color:u!=null&&u.selectedRow[x.id]?"success":"primary",onClick:u!=null&&u.selectedRow[x.id]?b:F,children:u!=null&&u.selectedRow[x.id]?e.jsx(Rt,{}):e.jsx(yt,{})})})]})};Ue.propTypes={row:W.object,table:W.object,options:W.array,id:W.number,index:W.number};W.node,W.number,W.number;const We=ot("input")({display:"none"});We.displayName="Input";const ee=x=>{let p=0,u=x.length-1;for(;p<x.length&&Number(x[p])===0;)p++;for(;u>=0&&Number(x[u])===0;)u--;return x.slice(p,u+1)},Pt=(x,p,u)=>x.map(b=>{const L=ee(b.data);return{...b,data:L.slice(0,14)}}),le=({getValue:x})=>{const p=x();return`${Number((p||0).toFixed(2)).toLocaleString()}`};function ne({columns:x,data:p,setData:u}){const[F,b]=c.useState(()=>[...p]),[L,I]=c.useState({}),C=xt({data:p,columns:x,defaultColumn:{cell:jt},getCoreRowModel:gt(),meta:{selectedRow:L,setSelectedRow:I,revertData:(y,o)=>{o?u(j=>j.map((n,a)=>a===y?F[y]:n)):b(j=>j.map((n,a)=>a===y?p[y]:n))},updateData:(y,o,j)=>{u(n=>n.map((a,k)=>k===y?{...n[y],[o]:j}:a))},saveData:async y=>{try{const o=p[y],j=await ie.put(`/api/launchGames/${o._id}`,o);he({open:!0,message:"Saved successfully!",variant:"alert",alert:{color:"success"}}),I(n=>({...n,[y]:!1}))}catch{he({open:!0,message:"Error!",variant:"alert",alert:{color:"error"}})}}},debugTable:!0});let O=[];return C.getAllColumns().map(y=>y.columnDef.accessorKey&&O.push({label:typeof y.columnDef.header=="string"?y.columnDef.header:"#",key:y.columnDef.accessorKey})),e.jsx(te,{content:!1,children:e.jsx(Dt,{children:e.jsx(ft,{children:e.jsxs(mt,{children:[e.jsx(Gt,{children:C.getHeaderGroups().map(y=>e.jsx(Le,{children:y.headers.map(o=>e.jsx(ke,{...o.column.columnDef.meta,children:o.isPlaceholder?null:be(o.column.columnDef.header,o.getContext())},o.id))},y.id))}),e.jsx(wt,{children:C.getRowModel().rows.map(y=>e.jsx(Le,{children:y.getVisibleCells().map(o=>e.jsx(ke,{...o.column.columnDef.meta,children:be(o.column.columnDef.cell,o.getContext())},o.id))},y.id))})]})})})})}ne.propTypes={columns:W.array,data:W.array,setData:W.func};function Ct({data:x,games:p}){const u=Ae(),[F,b]=c.useState(u.pathname==="/admin/report"),[L,I]=c.useState([]),[C,O]=c.useState([]);c.useEffect(()=>{const o=[...new Set(x.map(n=>n.summary.split("-")[0]))];O(o);const j=Object.values(x.reduce((n,{game:a,summary:k,betsEuro:ce,winsEuro:xe,ggrEuro:z,avgBet:De,spins:me,uniquePlayers:ge})=>{n[a]||(n[a]={_id:"",name:a,maxDate:k,years:{},totalGGR:0,latestWeekStart:"",secLatestWeekStart:"",latestWeekGGR:[],secLatestWeekGGR:[],remainDays:0,weekAverage:0,weekChange:0,weekChangeColor:"",dailyTotalGGR:0,projectedTotalGGR:0});const Z=p.find(se=>se.name===a);if(n[a].launchDate=Z.launchDate,n[a]._id=Z._id,new Date(Z.launchDate)<=new Date(k)){const se=new Date(n[a].maxDate)<new Date(k);n[a].maxDate=se?k:n[a].maxDate,n[a].dailyTotalGGR=se?z:n[a].dailyTotalGGR,n[a].totalGGR+=z;const Y=k.split("-")[0];n[a].years[Y]||(n[a].years[Y]=0),n[a].years[Y]+=z,n[a][`totalGGR_${Y}`]||(n[a][`totalGGR_${Y}`]=0),n[a][`totalGGR_${Y}`]+=z;const de=new Date(n[a].maxDate),ye=new Date(de.getFullYear(),11,31);n[a].remainDays=Math.ceil((ye-de)/(1e3*60*60*24));const ue=new Date(n[a].maxDate),V=new Date(ue);V.setDate(V.getDate()-6);const J=new Date(V);J.setDate(J.getDate()-7);const ae=new Date(V);ae.setDate(ae.getDate()-1),n[a].latestWeekStart=V.toISOString().split("T")[0],n[a].secLatestWeekStart=J.toISOString().split("T")[0],n[a].latestWeekGGR=x.filter(G=>G.game===a&&new Date(G.summary)>=V&&new Date(G.summary)<=ue).map(G=>G.ggrEuro),n[a].secLatestWeekGGR=x.filter(G=>G.game===a&&new Date(G.summary)>=J&&new Date(G.summary)<=ae).map(G=>G.ggrEuro),n[a].weekAverage=n[a].latestWeekGGR.reduce((G,K)=>G+K,0)/n[a].latestWeekGGR.length,n[a].weekChange=(n[a].latestWeekGGR.reduce((G,K)=>G+K,0)-n[a].secLatestWeekGGR.reduce((G,K)=>G+K,0))/n[a].secLatestWeekGGR.reduce((G,K)=>G+K,0)*100,n[a].weekChangeColor=e.jsx("span",{style:{color:n[a].weekChange>0?"green":"red"},children:`${Number(n[a].weekChange.toFixed(2)).toLocaleString()} %`}),n[a].projectedTotalGGR=n[a].totalGGR+n[a].weekAverage*n[a].remainDays}return n},{}));I(j)},[x,p]);const y=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text",cell:({getValue:o,row:j})=>{const n=o();return e.jsx(B,{style:{textDecoration:"none"},to:F?`/admin/report-one/${j.original._id}`:`/report-one/${j.original._id}`,children:n})}},{header:"Launch Date",accessorKey:"launchDate",dataType:"text",cell:({getValue:o,row:j,table:n})=>{var k;const a=o();return`${(k=a==null?void 0:a.split("T"))==null?void 0:k[0]}`}},{header:"Daily Total GGR",accessorKey:"dailyTotalGGR",dataType:"text",cell:le},{header:"Projected Total GGR",accessorKey:"projectedTotalGGR",dataType:"text",cell:le},...(C==null?void 0:C.map(o=>({header:`Total GGR ${o}`,accessorKey:`totalGGR_${o}`,dataType:"text",cell:le})))||[],{header:"Lifetime GGR",accessorKey:"totalGGR",dataType:"text",cell:le},{header:"7 Day Average",accessorKey:"weekAverage",dataType:"text",cell:le},{header:"7 Day Change",accessorKey:"weekChangeColor",dataType:"text"},{header:"Latest Report Date",accessorKey:"maxDate",dataType:"text",cell:({getValue:o,row:j,table:n})=>{var k;const a=o();return`${(k=a==null?void 0:a.split("T"))==null?void 0:k[0]}`}}],[C]);return e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(N,{container:!0,spacing:2,mb:5,children:[e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(te,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(m,{variant:"h5",textAlign:"center",children:"Lifetime GGR - "}),e.jsx(m,{variant:"h6",textAlign:"center",children:Number(L.reduce((o,j)=>o+j.totalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(te,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(m,{variant:"h5",textAlign:"center",children:"Daily Total GGR -"}),e.jsx(m,{variant:"h6",textAlign:"center",children:Number(L.reduce((o,j)=>o+j.dailyTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(te,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(m,{variant:"h5",textAlign:"center",children:`Projected GGR ${C.reduce((o,j)=>Math.max(o,j),-1/0)} -`}),e.jsx(m,{variant:"h6",textAlign:"center",children:Number(L.reduce((o,j)=>o+j.projectedTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(te,{sx:{height:"100%",display:"flex",alignItems:"center"},children:C==null?void 0:C.map((o,j)=>e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"start",children:[e.jsx(m,{variant:"h5",textAlign:"center",children:`Total GGR ${o} - `}),e.jsx(m,{variant:"h6",textAlign:"center",children:Number(L.reduce((n,a)=>n+(a[`totalGGR_${o}`]||0),0)).toLocaleString()})]},j))})})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"Games Data"}),e.jsx(ne,{data:L,columns:y})]})]})}const Ee={chart:{height:100,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:3},xaxis:{categories:[]}},Jt=()=>{const x=Ae(),[p,u]=c.useState(x.pathname==="/admin/report"),{user:F}=lt();c.useState(0);const[b,L]=c.useState(!1),[I,C]=c.useState(!1),[O,y]=c.useState([]),[o,j]=c.useState([]),[n,a]=c.useState([]),[k,ce]=c.useState(!0),[xe,z]=c.useState(""),[De,me]=c.useState(""),[ge,Z]=c.useState(!1),[se,Y]=c.useState([]),[de,ye]=c.useState([]),[ue,V]=c.useState([]),[J,ae]=c.useState([]),[G,K]=c.useState([]),[re,Ie]=c.useState(Ee),[Oe,Tt]=c.useState(new Date().toISOString().split("T")[0]),[$e,Ne]=c.useState([]),[Fe,Ke]=c.useState(Ee),[qe,Me]=c.useState([]),[_e,Be]=c.useState([]),[Ye,Ve]=c.useState([]),[He,Xe]=c.useState([]),[A,we]=c.useState([1,37]),[ze,Ze]=c.useState(0),Je=(h,T)=>{console.log("newRange",T),we(T)},Qe=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"Launch Date",accessorKey:"launchDate",dataType:"date",cell:({getValue:h,row:T,table:d})=>{var s,r;const v=(s=d==null?void 0:d.options)==null?void 0:s.meta,q=(r=v==null?void 0:v.selectedRow)==null?void 0:r[T.id],H=h(),X=H?new Date(H).toISOString().split("T")[0]:"";return q?e.jsx("input",{type:"date",value:X,onChange:l=>v==null?void 0:v.updateData(T.index,"launchDate",l.target.value)}):X}},{header:"Actions",id:"edit",cell:Ue,meta:{className:"cell-center"}}],[]),et=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"TOTAL GGR",accessorKey:"data",dataType:"text",cell:({getValue:h,row:T,table:d})=>{const v=h();return`${(Number(v[v.length-1])||0).toLocaleString()}`}}],[]),Ge=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"}],[]);c.useEffect(()=>{const h=[];for(let s=0;s<7;s++){const r=new Date;r.setDate(r.getDate()-s),h.push(r.toISOString().split("T")[0])}const T=o.reduce((s,{game:r,summary:l})=>{if(!s[r]){const w=n.find(g=>g.name===r);s[r]={...w,maxDate:l}}const D=new Date(s[r].maxDate)<new Date(l);return s[r].maxDate=D?l:s[r].maxDate,s},{}),d={},q=Object.values(o.reduce((s,{game:r,summary:l,ggrEuro:D,spins:w,uniquePlayers:g,betsEuro:P})=>{s[r]||(s[r]={name:r,ggrEuro:[],spins:[],uniquePlayers:[],SPU:[],CWPP:[]});const S=n.find(je=>je.name===r);new Date(S==null?void 0:S.launchDate)<new Date(l),d[r]&&new Date(d[r])<new Date(l.split("T")[0])?d[r]=l.split("T")[0]:d[r]||(d[r]=l.split("T")[0]);const M=new Date(T[r].maxDate)||new Date,pe=new Date(M);return pe.setDate(pe.getDate()-6),new Date(l)>=pe&&new Date(l)<=M&&(s[r].ggrEuro.push(D),s[r].spins.push(w),s[r].uniquePlayers.push(g),s[r].SPU.push(w/g),s[r].CWPP.push(P/g)),s},{})).map(s=>{const r=s.ggrEuro,l=s.spins,D=s.uniquePlayers,w=s.SPU,g=s.CWPP;return{name:s.name,ggrEuro:Number((r.length>0?r.reduce((P,S)=>P+S,0)/r.length:0).toFixed(2)).toLocaleString(),spins:Number((l.length>0?l.reduce((P,S)=>P+S,0)/l.length:0).toFixed(2)).toLocaleString(),uniquePlayers:Number((D.length>0?D.reduce((P,S)=>P+S,0)/D.length:0).toFixed(2)).toLocaleString(),SPU:Number((w.length>0?w.reduce((P,S)=>P+S,0)/w.length:0).toFixed(2)).toLocaleString(),CWPP:Number((g.length>0?g.reduce((P,S)=>P+S,0)/g.length:0).toFixed(2)).toLocaleString()}});V(q);const X=Object.values(o.reduce((s,{game:r,summary:l,ggrEuro:D,spins:w,uniquePlayers:g,betsEuro:P})=>{s[r]||(s[r]={name:r,ggrEuros:[],ggrEuro:0,ggrEuro2:0,spins:0,spins2:0,uniquePlayers:0,uniquePlayers2:0,SPU:0,SPU2:0,CWPP:0,CWPP2:0,arrSpins:[],arrSpins2:[]});const S=new Date(d[r]);S.setDate(S.getDate()-7);const M=new Date(d[r]);return M.setDate(M.getDate()-14),S<new Date(l)?(s[r].ggrEuros.push(D),s[r].arrSpins.push(w),s[r].ggrEuro+=D,s[r].spins+=w,s[r].uniquePlayers+=g,s[r].SPU+=w/g,s[r].CWPP+=P/g):M<new Date(l)&&new Date(l)<=S&&(s[r].arrSpins2.push(w),s[r].ggrEuro2+=D,s[r].spins2+=w,s[r].uniquePlayers2+=g,s[r].SPU2+=w/g,s[r].CWPP2+=P/g),s},{})).map(s=>{const r=(s.ggrEuro-s.ggrEuro2)/(s.ggrEuro2||1),l=(s.spins-s.spins2)/(s.spins2||1),D=(s.uniquePlayers-s.uniquePlayers2)/(s.uniquePlayers2||1),w=(s.SPU-s.SPU2)/(s.SPU2||1),g=(s.CWPP-s.CWPP2)/(s.CWPP2||1);return{name:s.name,ggrEuro:e.jsx("span",{style:{color:r>=0?"green":"red"},children:`${(r*100).toFixed(2)} %`}),spins:e.jsx("span",{style:{color:l>=0?"green":"red"},children:`${(l*100).toFixed(2)} %`}),uniquePlayers:e.jsx("span",{style:{color:D>=0?"green":"red"},children:`${(D*100).toFixed(2)} %`}),SPU:e.jsx("span",{style:{color:w>=0?"green":"red"},children:`${(w*100).toFixed(2)} %`}),CWPP:e.jsx("span",{style:{color:g>=0?"green":"red"},children:`${(g*100).toFixed(2)} %`})}});ae(X)},[de,o,n]);const Se=async()=>{var h,T;try{const d=await ie.get("api/reports");if(console.log("response.data.data",d.data.data),console.log("response.data.setGames",d.data.games),y(d.data.data),a(d.data.games),d.data.games.length>0){const v=d.data.games.length>0?(T=(h=d.data.games)==null?void 0:h.reduce((l,D)=>new Date(D.launchDate)<new Date(l.launchDate)?D:l).launchDate)==null?void 0:T.split("T")[0]:new Date().toISOString().split("T")[0],q=[...d.data.data].filter(l=>new Date(l.summary)>=new Date(v));q.sort((l,D)=>new Date(l.summary)-new Date(D.summary));const H=[],X=Object.values(q.reduce((l,{game:D,ggrEuro:w,summary:g})=>{l[D]||(l[D]={name:D,data:[],totalGGR:0});const P=d.data.games.find(S=>S.name===D);return l[D].totalGGR+=new Date(P==null?void 0:P.launchDate)>new Date(g)?0:w,l[D].data.push(l[D].totalGGR.toFixed(2)),H.push(g.slice(0,10)),l},{}));let s=0;const r=X.map(l=>(s=Math.max(s,l.data.length),{...l,data:ee(l.data)}));console.log("min, max",s),Ze(s),we([1,s])}}catch{}},tt=async()=>{const h=localStorage.getItem("reportToken");ce(h!=="true"),Se()};c.useEffect(()=>{tt()},[]);const nt=async h=>{if(h.target.files.length>0){const T=h.target.files[0];if(!T){alert("Please select a file first.");return}L(!0);const d=new FormData;d.append("file",T);try{const v=await ie.post("api/reports/upload",d,{headers:{"Content-Type":"multipart/form-data"}});he({open:!0,message:"Excel uploaded successfully!",variant:"alert",alert:{color:"success"}}),Se(),L(!0)}catch(v){console.error("Upload Error:",v),alert("Error uploading file.")}finally{L(!1),h.target.value=""}}},st=async()=>{C(!0);try{const h=await ie.get("api/reports/download",{responseType:"blob"}),T=window.URL.createObjectURL(new Blob([h.data])),d=document.createElement("a");d.href=T,d.setAttribute("download","report.xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)}catch(h){console.error("Download Error:",h),he({open:!0,message:"Excel not exists!",variant:"alert",alert:{color:"error"}})}finally{C(!1)}};c.useEffect(()=>{var h;if(n.length>0){const T=n.length>0?(h=n==null?void 0:n.reduce((t,i)=>new Date(i.launchDate)<new Date(t.launchDate)?i:t).launchDate)==null?void 0:h.split("T")[0]:new Date().toISOString().split("T")[0],d=[...O].filter(t=>new Date(t.summary)>=new Date(T));d.sort((t,i)=>new Date(t.summary)-new Date(i.summary));const v=[],q=Object.values(d.reduce((t,{game:i,ggrEuro:f,summary:$})=>{t[i]||(t[i]={name:i,data:[],totalGGR:0});const E=n.find(U=>U.name===i);return t[i].totalGGR+=new Date(E==null?void 0:E.launchDate)>new Date($)?0:f,t[i].data.push(t[i].totalGGR.toFixed(2)),v.push($.slice(0,10)),t},{}));let H=0;const s=q.map(t=>(H=Math.max(H,t.data.length),{...t,data:ee(t.data)})).map(t=>{const i=A[0]-1,f=A[1]-1;return t.data=t.data.slice(i,f+1),t});K(s);const r=[...new Set(v)];ye(r);const l=[];for(let t=A[0];t<=A[1];t++)l.push(`Day ${t}`);Y(l),Ie(t=>({...t,xaxis:{categories:l,labels:{show:!1}}}));const D=O==null?void 0:O.map(t=>({...t,SPU:t.spins/t.uniquePlayers,CWPP:t.betsEuro/t.uniquePlayers}));j(D);const w=[];for(let t=0;t<14;t++)w.push(`Day ${t+1}`);Ke(t=>({...t,xaxis:{categories:w,labels:{show:!1}}})),Ne(Pt(q));const g=Object.values(d.reduce((t,{game:i,summary:f,uniquePlayers:$})=>{t[i]||(t[i]={name:i,data:[]});const E=n.find(U=>U.name===i);return t[i].data.push(new Date(E==null?void 0:E.launchDate)>new Date(f)?0:$),t},{})),P=g.map(t=>{const i=A[0]-1,f=A[1]-1;return t.data=t.data.slice(i,f+1),{...t,data:ee(t.data)}});Me(P);const S=t=>{if(t.length<6)return[];let i=new Array(5).fill(0);for(let f=5;f<t.length;f++){let $=t.slice(f-4,f+1).reduce((oe,fe)=>oe+fe,0),E=t.slice(f-5,f).reduce((oe,fe)=>oe+fe,0),U=(($-E)/(E||1)*100).toFixed(2);i.push(U)}return i},M=g.map(t=>{const i=A[0]-1,f=A[1]-1;return t.data=t.data.slice(i,f+1),{...t,data:S(t.data)}});console.log("filterUserChangesData",M),Be(M),console.log("usersData",g);const je=Object.values(d.reduce((t,{game:i,spins:f,summary:$})=>{t[i]||(t[i]={name:i,data:[]});const E=n.find(U=>U.name===i);return t[i].data.push(new Date(E==null?void 0:E.launchDate)>new Date($)?0:f),t},{})).map(t=>{const i=A[0]-1,f=A[1]-1;return t.data=t.data.slice(i,f+1),{...t,data:ee(t.data)}});Ve(je);const rt=Object.values(d.reduce((t,{game:i,spins:f,uniquePlayers:$,summary:E})=>{t[i]||(t[i]={name:i,data:[]});const U=n.find(oe=>oe.name===i);return t[i].data.push(new Date(U==null?void 0:U.launchDate)>new Date(E)?0:(f/$).toFixed(2)),t},{})).map(t=>{const i=A[0]-1,f=A[1]-1;return t.data=t.data.slice(i,f+1),{...t,data:ee(t.data)}});Xe(rt)}},[O,Oe,n,A]);const at=async()=>{try{const h=await ie.post("api/account/check",{email:p?F.email:De,password:xe});localStorage.setItem("reportToken","true"),Z(!1),ce(!1)}catch{Z(!0)}};return e.jsxs(ht,{children:[e.jsx(te,{children:!k&&e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"space-between",children:[e.jsxs(N,{item:!0,children:[e.jsxs("label",{htmlFor:"contained-button-file",children:[e.jsx(We,{accept:".xls,.xlsx",id:"contained-button-file",type:"file",onChange:nt}),e.jsx(ve,{loading:b,variant:"contained",component:"span",children:"Upload Excel"})]}),e.jsx(ve,{sx:{marginLeft:"10px"},loading:I,variant:"contained",component:"span",onClick:st,children:"Download Excel"})]}),e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(m,{variant:"h5",textAlign:"right",children:"LAUNCH"}),e.jsx(B,{Link:!0,to:p?"/admin/report-type/users/launch":"/report-type/users/launch",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:p?"/admin/report-type/totalGGR/launch":"/report-type/totalGGR/launch",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:p?"/admin/report-type/spinsPerUser/launch":"/report-type/spinsPerUser/launch",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:p?"/admin/report-type/totalCoins/launch":"/report-type/totalCoins/launch",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Total Coins"})})]})]}),e.jsx(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"end",children:e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(m,{variant:"h5",textAlign:"right",children:"EXCLUSIVE"}),e.jsx(B,{to:p?"/admin/report-type/users/exclusive":"/report-type/users/exclusive",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:p?"/admin/report-type/totalGGR/exclusive":"/report-type/totalGGR/exclusive",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:p?"/admin/report-type/spinsPerUser/exclusive":"/report-type/spinsPerUser/exclusive",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:p?"/admin/report-type/totalCoins/exclusive":"/report-type/totalCoins/exclusive",children:e.jsx(_,{loading:b,variant:"contained",component:"span",children:"Total Coins"})})]})}),e.jsx(R,{mb:5,spacing:3,children:e.jsx(Ct,{data:O,games:n})}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"Launch Information"}),e.jsx(ne,{data:n,columns:Qe,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"TOTAL REVENUE"}),e.jsx(ne,{data:G,columns:et,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"7 Day Averages"}),e.jsx(ne,{data:ue,columns:Ge,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"7 Day Change (%) "}),e.jsx(ne,{data:J,columns:Ge,setData:a})]}),e.jsxs(R,{mb:5,direction:"row",spacing:3,alignItems:"end",justifyContent:"center",children:[e.jsx(m,{variant:"h2",textAlign:"right",sx:{width:"80%"},children:"Day Setting"}),e.jsx(St,{getAriaLabel:()=>"Temperature range",value:A,max:ze,min:1,onChange:Je,valueLabelDisplay:"auto",valueLabelFormat:h=>`Day ${h}`,sx:{width:"20%"}})]}),e.jsxs(R,{mb:5,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"Total GGR"}),e.jsx(Q,{options:re,series:G,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"USERS"}),e.jsx(Q,{options:re,series:qe,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"USER 5 Day Change (%)"}),e.jsx(Q,{options:re,series:_e,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"SPINS PER DAY"}),e.jsx(Q,{options:re,series:Ye,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"SPINS PER PLAYER"}),e.jsx(Q,{options:re,series:He,type:"line",height:500})]}),e.jsxs(R,{children:[e.jsx(m,{variant:"h2",textAlign:"center",children:"14 DAY LAUNCH"}),e.jsx(Q,{options:Fe,series:$e,type:"line",height:500})]})]})}),e.jsx(it,{open:k,maxWidth:"xs",children:e.jsxs(ct,{sx:{p:1,py:1.5},children:[p?e.jsx(Re,{children:"Confirm Password"}):e.jsx(Re,{children:"Login"}),e.jsxs(dt,{children:[e.jsxs(R,{spacing:1,mb:2,children:[!p&&e.jsx(Pe,{name:"email",placeholder:"Email",type:"email",fullWidth:!0,variant:"outlined",value:De,onChange:h=>me(h.target.value)}),e.jsx(Pe,{name:"password",placeholder:"Password",type:"password",fullWidth:!0,variant:"outlined",value:xe,onChange:h=>z(h.target.value)})]}),ge&&p&&e.jsx(m,{variant:"h6",color:"red",children:"Password is wrong."}),ge&&!p&&e.jsx(m,{variant:"h6",color:"red",children:"Credentials is wrong."}),"          "]}),e.jsx(ut,{children:e.jsx(_,{variant:"contained",onClick:at,children:"Confirm"})})]})})]})};export{ne as ReactTable,Jt as default,le as separateByComma};
