import{P as g,c as E,r as i,c3 as W,j as e,I as j,av as k,ar as V,k as Y,g as ee,cJ as te,p as b,a9 as w,Z as se,ac as ae,t as oe,M as le,bX as ne,cH as re,B as S,a6 as ie}from"./index-5b235dd7.js";import{D as ce,T as de,H as ge}from"./index-c8d81c1c.js";import{s as me,u as ue,d as pe,j as xe,b as he,c as fe,g as be,a as je,e as Ce,h as Se,i as ye,S as Re,f as h}from"./ScrollX-f822587b.js";import{r as Te,c as De}from"./index-481cdf3e.js";import{I,D as Fe,d as Me,C as we,R as Ie,b as Ge,H as Ee,F as ke,a as Ve,E as ve,T as Pe}from"./Filter-722639e5.js";import{E as He,R as Ae}from"./RowEditable-04b16c60.js";import"./LinearWithLabel-c63e9e69.js";import{S as Oe,E as Ke}from"./ExpandingUserDetail-8078bb38.js";import{T as Ne,a as ze,b as Ue}from"./TableContainer-6405a685.js";import{T as G}from"./TableHead-b7385232.js";import{T as f}from"./TableRow-2c4865bf.js";import{T as m}from"./TableCell-12898d8f.js";import{T as Be}from"./TableFooter-5052f112.js";import{S as Le}from"./SendOutlined-2c98f4ed.js";import{U as $e}from"./UngroupOutlined-16bc3c70.js";import"./redux-f7e2792b.js";import"./DownloadOutlined-863c6404.js";import"./CaretUpOutlined-523a0635.js";import"./CaretDownOutlined-ccad27b1.js";import"./Pagination-512357e0.js";import"./index-6049e9f0.js";import"./Checkbox-57c7de18.js";import"./MinusOutlined-71eec13b.js";import"./Slider-47141b77.js";import"./visuallyHidden-14c3de6e.js";import"./react-number-format.es-8e76f4cc.js";import"./MailOutlined-3edb7875.js";import"./PhoneOutlined-6b2d3978.js";import"./EnvironmentOutlined-af2de237.js";const v=(r,l,a,c)=>{const o=Te(r.getValue(l),a);return c(o),o.passed},qe=(r,l,a)=>{let c=0;return r.columnFiltersMeta[a]&&(c=De(r.columnFiltersMeta[a],l.columnFiltersMeta[a])),c===0?me.alphanumeric(r,l,a):c},P=({row:r,table:l})=>{var o;const a=(o=l==null?void 0:l.options)==null?void 0:o.meta,c=u=>{a==null||a.setSelectedRow(C=>({...C,[r.id]:!C[r.id]})),a==null||a.revertData(r.index,(u==null?void 0:u.currentTarget.name)==="cancel")};return e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",children:[(a==null?void 0:a.selectedRow[r.id])&&e.jsx(w,{title:"Cancel",children:e.jsx(j,{color:"error",name:"cancel",onClick:c,children:e.jsx(se,{})})}),e.jsx(w,{title:a!=null&&a.selectedRow[r.id]?"Save":"Edit",children:e.jsx(j,{color:a!=null&&a.selectedRow[r.id]?"success":"primary",onClick:c,children:a!=null&&a.selectedRow[r.id]?e.jsx(Le,{}):e.jsx(He,{})})})]})};P.propTypes={row:g.object,table:g.object,options:g.array,header:g.string,meta:g.string,index:g.number,id:g.number};function H({defaultColumns:r,data:l,setData:a}){const c=E(),o=ae(c.breakpoints.down("sm")),[u,C]=i.useState({}),[A,O]=i.useState([]),[y,R]=i.useState(""),[K,N]=i.useState([]),[z,U]=i.useState([]),[B,L]=i.useState(()=>[...l]),[$,q]=i.useState({}),[T]=i.useState(()=>[...r]),[X,J]=i.useState(T.map(s=>s.id)),Q=(s,t)=>{l.splice(t,0,l.splice(s,1)[0]),a([...l])},[Z,D]=i.useState({}),n=ue({data:l,columns:T,defaultColumn:{cell:Ae},state:{rowSelection:u,columnFilters:A,globalFilter:y,sorting:K,grouping:z,columnOrder:X,columnVisibility:Z},enableRowSelection:!0,onRowSelectionChange:C,onSortingChange:N,onGroupingChange:U,onColumnFiltersChange:O,onGlobalFilterChange:R,onColumnOrderChange:J,onColumnVisibilityChange:D,getRowCanExpand:()=>!0,getExpandedRowModel:pe(),getGroupedRowModel:xe(),getCoreRowModel:he(),getPaginationRowModel:fe(),getSortedRowModel:be(),getFilteredRowModel:je(),getFacetedRowModel:Ce(),getFacetedUniqueValues:Se(),getFacetedMinMaxValues:ye(),globalFilterFn:v,getRowId:s=>s.id.toString(),debugTable:!0,debugHeaders:!0,debugColumns:!0,meta:{selectedRow:$,setSelectedRow:q,revertData:(s,t)=>{t?a(d=>d.map((p,x)=>x===s?B[s]:p)):L(d=>d.map((p,x)=>x===s?l[s]:p))},updateData:(s,t,d)=>{a(p=>p.map((x,_)=>_===s?{...p[s],[t]:d}:x))}}});i.useEffect(()=>D({id:!1,role:!1,contact:!1,country:!1,progress:!1}),[]);const F=oe(c.palette.primary.lighter,.1);let M=[];return n.getVisibleLeafColumns().map(s=>s.columnDef.accessorKey&&M.push({label:typeof s.columnDef.header=="string"?s.columnDef.header:"#",key:s.columnDef.accessorKey})),e.jsxs(le,{content:!1,children:[e.jsxs(b,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",sx:{padding:2,...o&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(Fe,{value:y??"",onFilterChange:s=>R(String(s)),placeholder:`Search ${l.length} records...`}),e.jsxs(b,{direction:"row",spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(Me,{getVisibleLeafColumns:n.getVisibleLeafColumns,getIsAllColumnsVisible:n.getIsAllColumnsVisible,getToggleAllColumnsVisibilityHandler:n.getToggleAllColumnsVisibilityHandler,getAllColumns:n.getAllColumns}),e.jsx(we,{data:n.getSelectedRowModel().flatRows.map(s=>s.original).length===0?l:n.getSelectedRowModel().flatRows.map(s=>s.original),headers:M,filename:"umbrella.csv"})]})]}),e.jsxs(Re,{children:[e.jsx(Ie,{selected:Object.keys(u).length}),e.jsx(Ne,{component:ne,children:e.jsxs(ze,{children:[e.jsx(G,{children:n.getHeaderGroups().map(s=>e.jsxs(f,{children:[e.jsx(m,{}),s.headers.map(t=>(t.column.columnDef.meta!==void 0&&t.column.getCanSort()&&Object.assign(t.column.columnDef.meta,{className:t.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(Ge,{header:t,table:n,children:e.jsx(e.Fragment,{children:t.isPlaceholder?null:e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",children:[t.column.getCanGroup()&&e.jsx(j,{color:t.column.getIsGrouped()?"error":"primary",onClick:t.column.getToggleGroupingHandler(),size:"small",sx:{p:0,width:24,height:24,fontSize:"1rem",mr:.75},children:t.column.getIsGrouped()?e.jsx($e,{}):e.jsx(re,{})}),e.jsx(S,{children:h(t.column.columnDef.header,t.getContext())}),t.column.getCanSort()&&e.jsx(Ee,{column:t.column,sort:!0})]})})},t.id)))]},s.id))}),e.jsx(G,{children:n.getHeaderGroups().map(s=>e.jsxs(f,{children:[e.jsx(m,{}),s.headers.map(t=>e.jsx(m,{...t.column.columnDef.meta,children:t.column.getCanFilter()&&e.jsx(ke,{column:t.column,table:n})},t.id))]},s.id))}),e.jsx(Ue,{children:n.getRowModel().rows.length>0?n.getRowModel().rows.map(s=>e.jsxs(i.Fragment,{children:[e.jsx(Ve,{row:s,reorderRow:Q,children:e.jsx(e.Fragment,{children:s.getVisibleCells().map(t=>{let d="background.paper";return t.getIsGrouped()&&(d="primary.lighter"),t.getIsAggregated()&&(d="warning.lighter"),t.getIsPlaceholder()&&(d="error.lighter"),t.column.columnDef.meta!==void 0&&t.column.getCanSort()&&Object.assign(t.column.columnDef.meta,{style:{backgroundColor:d}}),e.jsx(m,{...t.column.columnDef.meta,sx:{bgcolor:d},...t.getIsGrouped()&&t.column.columnDef.meta===void 0&&{style:{backgroundColor:d}},children:t.getIsGrouped()?e.jsxs(b,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(j,{color:"secondary",onClick:s.getToggleExpandedHandler(),size:"small",sx:{p:0,width:24,height:24},children:s.getIsExpanded()?e.jsx(k,{}):e.jsx(V,{})}),e.jsx(S,{children:h(t.column.columnDef.cell,t.getContext())})," ",e.jsxs(S,{children:["(",s.subRows.length,")"]})]}):t.getIsAggregated()?h(t.column.columnDef.aggregatedCell??t.column.columnDef.cell,t.getContext()):t.getIsPlaceholder()?null:h(t.column.columnDef.cell,t.getContext())},t.id)})})}),s.getIsExpanded()&&!s.getIsGrouped()&&e.jsx(f,{sx:{bgcolor:F,"&:hover":{bgcolor:`${F} !important`}},children:e.jsx(m,{colSpan:s.getVisibleCells().length+2,children:e.jsx(Ke,{data:s.original})})})]},s.id)):e.jsx(f,{children:e.jsx(m,{colSpan:n.getAllColumns().length,children:e.jsx(ve,{msg:"No Data"})})})}),e.jsx(Be,{children:n.getFooterGroups().map(s=>e.jsxs(f,{children:[e.jsx(m,{}),s.headers.map(t=>e.jsx(m,{...t.column.columnDef.meta,children:t.isPlaceholder?null:h(t.column.columnDef.header,t.getContext())},t.id))]},s.id))})]})}),e.jsx(ie,{}),e.jsx(S,{sx:{p:2},children:e.jsx(Pe,{setPageSize:n.setPageSize,setPageIndex:n.setPageIndex,getState:n.getState,getPageCount:n.getPageCount})})]})]})}H.propTypes={defaultColumns:g.array,data:g.array,setData:g.func};const yt=()=>{const r=E(),[l,a]=i.useState(()=>W(20)),c=i.useMemo(()=>[{id:"expander",enableGrouping:!1,header:()=>null,cell:({row:o})=>o.getCanExpand()?e.jsx(j,{color:o.getIsExpanded()?"primary":"secondary",onClick:o.getToggleExpandedHandler(),size:"small",children:o.getIsExpanded()?e.jsx(k,{}):e.jsx(V,{})}):e.jsx(Oe,{style:{color:r.palette.text.secondary}})},{id:"select",enableGrouping:!1,header:({table:o})=>e.jsx(I,{checked:o.getIsAllRowsSelected(),indeterminate:o.getIsSomeRowsSelected(),onChange:o.getToggleAllRowsSelectedHandler()}),cell:({row:o})=>e.jsx(I,{checked:o.getIsSelected(),disabled:!o.getCanSelect(),indeterminate:o.getIsSomeSelected(),onChange:o.getToggleSelectedHandler()})},{id:"id",title:"Id",header:"#",accessorKey:"id",dataType:"text",enableColumnFilter:!1,enableGrouping:!1,meta:{className:"cell-center"}},{id:"avatar",header:"Avatar",accessorKey:"avatar",enableColumnFilter:!1,enableGrouping:!1,cell:o=>e.jsx(Y,{alt:"Avatar 1",size:"sm",src:ee(`avatar-${o.getValue()}.png`)}),meta:{className:"cell-center"}},{id:"fullName",header:"Name",footer:"Name",accessorKey:"fullName",dataType:"text",enableGrouping:!1},{id:"email",header:"Email",footer:"Email",accessorKey:"email",dataType:"text",enableGrouping:!1},{id:"age",header:"Age",footer:"Age",accessorKey:"age",dataType:"text",meta:{className:"cell-right"}},{id:"role",header:"Role",footer:"Role",accessorKey:"role",dataType:"text",enableGrouping:!1,filterFn:v,sortingFn:qe},{id:"contact",header:"Contact",footer:"Contact",accessorKey:"contact",dataType:"text",enableGrouping:!1},{id:"country",header:"Country",footer:"Country",accessorKey:"country",dataType:"text",enableGrouping:!1},{id:"visits",header:"Visits",footer:"Visits",accessorKey:"visits",dataType:"text",enableGrouping:!1,meta:{className:"cell-right"}},{id:"status",header:"Status",footer:"Status",accessorKey:"status",dataType:"select"},{id:"progress",header:"Profile Progress",footer:"Profile Progress",accessorKey:"progress",dataType:"progress",enableGrouping:!1},{id:"edit",header:"Actions",cell:P,enableGrouping:!1,meta:{className:"cell-center"}}],[]);return e.jsx(ce,{backend:te?de:ge,children:e.jsx(H,{data:l,defaultColumns:c,setData:a})})};export{yt as default,v as fuzzyFilter,qe as fuzzySort};
