import{r as g,$ as X,a0 as N,P as C,c as S,j as e,ao as Q,h as I,p as D,T as Z,I as y,as as _,Q as E,a9 as T,e as J,i as Y,g as ee,H as z,al as H,G as p,M as k,B as R,D as P,b0 as te,Z as $,d as M,b1 as re}from"./index-700092c6.js";import{j as ne,u as W,P as B,A as se,C as oe,E as ie,h as le,d as ae,b as de,e as K,k as ce,l as ue,D as pe,I as he,m as me,n as xe}from"./ItemDetails-939ca29b.js";import{M as ge}from"./MoreOutlined-0448447f.js";import{A as fe}from"./AlertColumnDelete-0c005cf1.js";import{D as je}from"./DeleteOutlined-f0657063.js";import{S as O}from"./Skeleton-38e6d77e.js";import"./redux-aff16594.js";import"./tiny-invariant-dd7d57d2.js";import"./VideoCameraAddOutlined-d99be02e.js";import"./AppstoreOutlined-11ab101d.js";import"./MultiFile-f406e12a.js";import"./PlaceholderContent-21d21e40.js";import"./CloseCircleFilled-44006877.js";import"./DesktopDatePicker-1a8514c8.js";import"./dateViewRenderers-69201203.js";import"./InputAdornment-ef951368.js";var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M251.2 387H320v68.8c0 1.8 1.8 3.2 4 3.2h48c2.2 0 4-1.4 4-3.3V387h68.8c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H376v-68.8c0-1.8-1.8-3.2-4-3.2h-48c-2.2 0-4 1.4-4 3.2V331h-68.8c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm328 0h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 265h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm0 104h193.6c1.8 0 3.2-1.8 3.2-4v-48c0-2.2-1.4-4-3.3-4H579.2c-1.8 0-3.2 1.8-3.2 4v48c0 2.2 1.4 4 3.2 4zm-195.7-81l61.2-74.9c4.3-5.2.7-13.1-5.9-13.1H388c-2.3 0-4.5 1-5.9 2.9l-34 41.6-34-41.6a7.85 7.85 0 00-5.9-2.9h-50.9c-6.6 0-10.2 7.9-5.9 13.1l61.2 74.9-62.7 76.8c-4.4 5.2-.8 13.1 5.8 13.1h50.8c2.3 0 4.5-1 5.9-2.9l35.5-43.5 35.5 43.5c1.5 1.8 3.7 2.9 5.9 2.9h50.8c6.6 0 10.2-7.9 5.9-13.1L383.5 675zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-36 732H180V180h664v664z"}}]},name:"calculator",theme:"outlined"};const be=Ce;var ye=function(t,o){return g.createElement(X,N({},t,{ref:o,icon:be}))};const Ie=g.forwardRef(ye),U=({column:r})=>{const t=S(),o=i=>{ne({id:r.id,title:i.target.value,itemIds:r.itemIds})};return e.jsx(Q,{fullWidth:!0,value:r.title,onChange:o,sx:{mb:1.5,fontWeight:500,"& input:focus":{bgcolor:t.palette.mode===I.DARK?t.palette.grey[100]:t.palette.grey[50]},"& input:hover":{bgcolor:t.palette.mode===I.DARK?t.palette.grey[100]:t.palette.grey[50]},"& input:hover + fieldset":{display:"block"},"&, & input":{bgcolor:"transparent"},"& fieldset":{display:"none"},"& input:focus + fieldset":{display:"block"}}})};U.propTypes={column:C.object};const ve=(r,t,o,i)=>{const a=o.palette.background.paper+99;return{userSelect:"none",margin:"0 0 8px 0",padding:16,border:"1px solid",borderColor:o.palette.divider,backgroundColor:r?a:o.palette.background.paper,borderRadius:i,...t}},F=({item:r,index:t})=>{const o=S(),{backlogs:i}=W(),a=!!r.image,d=i==null?void 0:i.userStory.filter(c=>{var A;return(A=c==null?void 0:c.itemIds)==null?void 0:A.filter(q=>q===r.id)[0]})[0],u=c=>{le(c)},[l,x]=g.useState(null),h=c=>{x(c==null?void 0:c.currentTarget)},m=()=>{x(null)},[n,s]=g.useState(!1),j=c=>{s(!1),c&&(ae(r.id),z({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))},[f,v]=g.useState(!1),w=()=>{v(c=>!c)},L=()=>{v(c=>!c)};return e.jsx(B,{draggableId:r.id,index:t,children:(c,A)=>e.jsxs("div",{ref:c.innerRef,...c.draggableProps,...c.dragHandleProps,style:ve(A.isDragging,c.draggableProps.style,o,"4px"),children:[e.jsxs(D,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:d?-.75:0},children:[e.jsx(Z,{onClick:()=>u(r.id),variant:"subtitle1",sx:{display:"inline-block",width:"calc(100% - 34px)",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",verticalAlign:"middle",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.title}),e.jsx(y,{size:"small",color:"secondary",onClick:h,"aria-controls":"menu-comment","aria-haspopup":"true",children:e.jsx(ge,{})}),e.jsxs(_,{id:"menu-comment",anchorEl:l,keepMounted:!0,open:!!l,onClose:m,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(E,{onClick:()=>{m(),u(r.id)},children:"Edit"}),e.jsx(E,{onClick:()=>{m(),s(!0)},children:"Delete"})]}),e.jsx(se,{title:r.title,open:n,handleClose:j})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs(D,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(T,{title:"User Story",children:e.jsx(oe,{style:{color:o.palette.primary.dark,fontSize:"0.75rem"}})}),e.jsx(T,{title:d.title,children:e.jsxs(J,{variant:"caption",color:"primary.dark",underline:"hover",onClick:L,sx:{cursor:"pointer",pt:.5},children:["User Story #",d.id]})})]}),e.jsx(ie,{story:d,open:f,handleDrawerOpen:w})]}),a&&e.jsx(Y,{component:"img",image:ee(`${r.image}`),sx:{width:"100%",borderRadius:1,mt:1.5},title:"Slider5 image"})]})},r.id)};F.propTypes={index:C.number,item:C.object};const we=new H.Chance,V=({columnId:r})=>{const[t,o]=g.useState(!1),i=()=>{o(n=>!n)},[a,d]=g.useState(""),[u,l]=g.useState(!1),x=n=>{(n.key==="Enter"||n.keyCode===13)&&h()},h=()=>{if(a.length>0){const n={id:`${we.integer({min:1e3,max:9999})}`,title:a,dueDate:re(new Date,{days:0,hours:1,minutes:45}),image:!1,assign:"",description:"",priority:"low",attachments:[]};de(r,n,"0"),z({open:!0,message:"Task Added successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}),i(),d("")}else l(!0)},m=n=>{const s=n.target.value;d(s),s.length<=0?l(!0):l(!1)};return e.jsxs(p,{container:!0,alignItems:"center",spacing:1,sx:{marginTop:1},children:[t&&e.jsx(p,{item:!0,xs:12,children:e.jsx(k,{content:!1,children:e.jsx(R,{sx:{p:2,pb:1.5,transition:"background-color 0.25s ease-out"},children:e.jsxs(p,{container:!0,alignItems:"center",spacing:.5,children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(P,{fullWidth:!0,placeholder:"Add Task",value:a,onChange:m,sx:{mb:3,"& input":{bgcolor:"transparent",p:0,borderRadius:"0px"},"& fieldset":{display:"none"},"& .MuiFormHelperText-root":{ml:0},"& .MuiOutlinedInput-root":{bgcolor:"transparent","&.Mui-focused":{boxShadow:"none"}}},onKeyUp:x,helperText:u?"Task title is required.":"",error:u})}),e.jsx(p,{item:!0,children:e.jsx(y,{children:e.jsx(te,{})})}),e.jsx(p,{item:!0,children:e.jsx(y,{children:e.jsx(Ie,{})})}),e.jsx(p,{item:!0,xs:!0,zeroMinWidth:!0}),e.jsx(p,{item:!0,children:e.jsxs(D,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(T,{title:"Cancel",children:e.jsx(y,{size:"small",color:"error",onClick:i,children:e.jsx($,{})})}),e.jsx(M,{variant:"contained",color:"primary",onClick:h,size:"small",children:"Add"})]})})]})})})}),!t&&e.jsx(p,{item:!0,xs:12,children:e.jsx(M,{variant:"dashed",color:"secondary",fullWidth:!0,onClick:i,children:"Add Task"})})]})};V.propTypes={columnId:C.oneOfType([C.string,C.bool])};const De=(r,t,o,i)=>({minWidth:250,border:"1px solid",borderColor:o.palette.divider,borderRadius:i,userSelect:"none",margin:"0 16px 0 0",height:"100%",...t}),Te=(r,t,o)=>{const i=t.palette.mode===I.DARK?t.palette.background.default:t.palette.secondary.lighter,a=t.palette.mode===I.DARK?t.palette.text.disabled:t.palette.secondary.light+65;return{background:r?a:i,padding:"8px 16px 14px",width:"auto",borderRadius:o}},G=({column:r,index:t})=>{const o=S(),{backlogs:i}=W(),a=r.itemIds.map(h=>i==null?void 0:i.items.filter(m=>m.id===h)[0]),d=()=>{l(!0)},[u,l]=g.useState(!1),x=h=>{l(!1),h&&(ce(r.id),z({open:!0,message:"Column deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsx(B,{draggableId:r.id,index:t,children:(h,m)=>e.jsx("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,style:De(m.isDragging,h.draggableProps.style,o,"4px"),children:e.jsx(K,{droppableId:r.id,type:"item",children:(n,s)=>e.jsxs("div",{ref:n.innerRef,...n.droppableProps,style:Te(s.isDraggingOver,o,"4px"),children:[e.jsxs(p,{container:!0,alignItems:"center",spacing:3,children:[e.jsx(p,{item:!0,xs:!0,zeroMinWidth:!0,children:e.jsx(U,{column:r})}),e.jsxs(p,{item:!0,sx:{mb:1.5},children:[e.jsx(T,{title:"Delete Column",children:e.jsx(y,{onClick:d,"aria-controls":"menu-simple-card","aria-haspopup":"true",color:"error",children:e.jsx(je,{})})}),e.jsx(fe,{title:r.title,open:u,handleClose:x})]})]}),a.map((j,f)=>e.jsx(F,{item:j,index:f},f)),n.placeholder,e.jsx(V,{columnId:r.id})]})})})})};G.propTypes={column:C.object,index:C.number};const ke=new H.Chance,Se=()=>{const r=S(),[t,o]=g.useState(""),[i,a]=g.useState(!1),[d,u]=g.useState(!1),l=()=>{u(n=>!n)},x=()=>{if(t.length>0){const n={id:`${ke.integer({min:1e3,max:9999})}`,title:t,itemIds:[]};ue(n),z({open:!0,message:"Column Added successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}),u(s=>!s),o("")}else a(!0)},h=n=>{(n.key==="Enter"||n.keyCode===13)&&x()},m=n=>{const s=n.target.value;o(s),s.length<=0?a(!0):a(!1)};return e.jsx(k,{sx:{minWidth:250,backgroundColor:r.palette.mode===I.DARK?r.palette.background.default:r.palette.secondary.lighter,height:"100%",borderColor:r.palette.divider},contentSX:{p:1.5,"&:last-of-type":{pb:1.5}},children:e.jsxs(p,{container:!0,alignItems:"center",spacing:1,children:[d&&e.jsx(p,{item:!0,xs:12,children:e.jsx(k,{content:!1,children:e.jsx(R,{sx:{p:2,pb:1.5,transition:"background-color 0.25s ease-out"},children:e.jsxs(p,{container:!0,alignItems:"center",spacing:.5,children:[e.jsx(p,{item:!0,xs:12,children:e.jsx(P,{fullWidth:!0,placeholder:"Add Column",value:t,onChange:m,sx:{mb:3,"& input":{bgcolor:"transparent",p:0,borderRadius:"0px"},"& fieldset":{display:"none"},"& .MuiFormHelperText-root":{ml:0},"& .MuiOutlinedInput-root":{bgcolor:"transparent","&.Mui-focused":{boxShadow:"none"}}},onKeyUp:h,helperText:i?"Column title is required.":"",error:i})}),e.jsx(p,{item:!0,xs:!0,zeroMinWidth:!0}),e.jsx(p,{item:!0,children:e.jsxs(D,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(T,{title:"Cancel",children:e.jsx(y,{size:"small",color:"error",onClick:l,children:e.jsx($,{})})}),e.jsx(M,{variant:"contained",color:"primary",onClick:x,size:"small",children:"Add"})]})})]})})})}),!d&&e.jsx(p,{item:!0,xs:12,children:e.jsx(M,{variant:"dashed",color:"secondary",fullWidth:!0,onClick:l,children:"Add Column"})})]})})},Ae=()=>({p:2.5,px:0,bgcolor:"transparent",display:"flex",overflow:"auto"}),b=[120,100,160,80,60],qe=()=>{const r=S(),{backlogs:t,backlogsLoading:o}=W(),i=a=>{let d;const{source:u,destination:l,draggableId:x,type:h}=a;if(!l||l.droppableId===u.droppableId&&l.index===u.index)return;if(h==="column"){const s=Array.from(t==null?void 0:t.columnsOrder);s.splice(u.index,1),s.splice(l==null?void 0:l.index,0,x),me(s);return}const m=t==null?void 0:t.columns.filter(s=>s.id===u.droppableId)[0],n=t==null?void 0:t.columns.filter(s=>s.id===l.droppableId)[0];if(m===n){const s=Array.from(m.itemIds);s.splice(u.index,1),s.splice(l.index,0,x);const j={...m,itemIds:s};d=t==null?void 0:t.columns.map(f=>f.id===j.id?j:f)}else{const s=Array.from(m.itemIds);s.splice(u.index,1);const j={...m,itemIds:s},f=Array.from(n.itemIds);f.splice(l.index,0,x);const v={...n,itemIds:f};d=t==null?void 0:t.columns.map(w=>w.id===j.id?j:w.id===v.id?v:w)}xe(d)};return e.jsxs(R,{sx:{display:"flex"},children:[e.jsx(pe,{onDragEnd:i,children:e.jsx(K,{droppableId:"columns",direction:"horizontal",type:"column",children:a=>e.jsxs(k,{border:!1,ref:a.innerRef,sx:{bgcolor:"transparent"},contentSX:Ae(),...a.droppableProps,children:[t==null?void 0:t.columnsOrder.map((d,u)=>{const l=t==null?void 0:t.columns.filter(x=>x.id===d)[0];return o?e.jsx(k,{content:!1,sx:{p:1.5,margin:"0 16px 0 0",minWidth:250,bgcolor:r.palette.mode===I.DARK?"background.default":"secondary.lighter"},children:e.jsxs(D,{spacing:1.25,children:[e.jsx(O,{variant:"rounded",width:"100%",height:38}),e.jsx(O,{variant:"rounded",width:"100%",height:b[Math.floor(Math.random()*b.length)]}),e.jsx(O,{variant:"rounded",width:"100%",height:b[Math.floor(Math.random()*b.length)]}),e.jsx(O,{variant:"rounded",width:"100%",height:b[Math.floor(Math.random()*b.length)]})]})}):e.jsx(G,{column:l,index:u},d)}),a.placeholder,e.jsx(Se,{})]})})}),e.jsx(he,{})]})};export{qe as default};
