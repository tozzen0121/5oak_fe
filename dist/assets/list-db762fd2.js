import{P as g,c as D,b7 as k,r as l,j as e,p as n,k as F,g as A,T as w,a5 as f,a9 as b,I as y,b8 as H,ac as z,t as K,M as O,d as V,B as I,a6 as B}from"./index-23fde95d.js";import{P as N}from"./react-number-format.es-08527c0f.js";import{u as G,g as U,a as $,b as L,c as Q,d as X,S as _,f as M}from"./ScrollX-5be71271.js";import{r as q}from"./index-481cdf3e.js";import J from"./empty-91db9561.js";import{I as P,D as W,S as Y,C as Z,R as ee,H as te,T as se}from"./Filter-9429ba1a.js";import"./LinearWithLabel-f51f47a8.js";import{C as oe}from"./CustomerModal-1bf1901e.js";import{E as ae}from"./ExpandingUserDetail-437d3c14.js";import{T as le,a as re,b as ne}from"./TableContainer-e0646359.js";import{T as ie}from"./TableHead-a80a9a01.js";import{T as R}from"./TableRow-66761b5c.js";import{T}from"./TableCell-8927bdf4.js";import{P as v}from"./PlusOutlined-013a0ba4.js";import{E as ce}from"./EyeOutlined-143cac5e.js";import{E as de}from"./EditOutlined-47d95f03.js";import{D as me}from"./DeleteOutlined-a76400ce.js";import"./TableFooter-4a3be2dc.js";import"./DownloadOutlined-fc7e6020.js";import"./CaretUpOutlined-c38c01ca.js";import"./CaretDownOutlined-242d6022.js";import"./Pagination-a236f812.js";import"./index-5d9dc455.js";import"./Checkbox-1f129a0c.js";import"./MinusOutlined-e17fc5c5.js";import"./MailOutlined-e5ec22fd.js";import"./PhoneOutlined-8521cfeb.js";import"./EnvironmentOutlined-8a0bfd21.js";const ge=(r,c,u,i)=>{const d=q(r.getValue(c),u);return i(d),d.passed};function E({data:r,columns:c,modalToggler:u}){const i=D(),d=z(i.breakpoints.down("sm")),[S,m]=l.useState([{id:"id",desc:!0}]),[x,h]=l.useState({}),[p,j]=l.useState(""),a=G({data:r,columns:c,state:{sorting:S,rowSelection:x,globalFilter:p},enableRowSelection:!0,onSortingChange:m,onRowSelectionChange:h,onGlobalFilterChange:j,getRowCanExpand:()=>!0,getSortedRowModel:U(),getFilteredRowModel:$(),getCoreRowModel:L(),getPaginationRowModel:Q(),getExpandedRowModel:X(),globalFilterFn:ge,debugTable:!0}),C=K(i.palette.primary.lighter,.1);let t=[];return c.map(s=>s.accessorKey&&t.push({label:typeof s.header=="string"?s.header:"#",key:s.accessorKey})),e.jsxs(O,{content:!1,children:[e.jsxs(n,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...d&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(W,{value:p??"",onFilterChange:s=>j(String(s)),placeholder:`Search ${r.length} records...`}),e.jsxs(n,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(Y,{getState:a.getState,getAllColumns:a.getAllColumns,setSorting:m}),e.jsxs(n,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(V,{variant:"contained",startIcon:e.jsx(v,{}),onClick:u,children:"Add Customer"}),e.jsx(Z,{data:a.getSelectedRowModel().flatRows.map(s=>s.original).length===0?r:a.getSelectedRowModel().flatRows.map(s=>s.original),headers:t,filename:"customer-list.csv"})]})]})]}),e.jsx(_,{children:e.jsxs(n,{children:[e.jsx(ee,{selected:Object.keys(x).length}),e.jsx(le,{children:e.jsxs(re,{children:[e.jsx(ie,{children:a.getHeaderGroups().map(s=>e.jsx(R,{children:s.headers.map(o=>(o.column.columnDef.meta!==void 0&&o.column.getCanSort()&&Object.assign(o.column.columnDef.meta,{className:o.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(T,{...o.column.columnDef.meta,onClick:o.column.getToggleSortingHandler(),...o.column.getCanSort()&&o.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:o.isPlaceholder?null:e.jsxs(n,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(I,{children:M(o.column.columnDef.header,o.getContext())}),o.column.getCanSort()&&e.jsx(te,{column:o.column})]})},o.id)))},s.id))}),e.jsx(ne,{children:a.getRowModel().rows.map(s=>e.jsxs(l.Fragment,{children:[e.jsx(R,{children:s.getVisibleCells().map(o=>e.jsx(T,{...o.column.columnDef.meta,children:M(o.column.columnDef.cell,o.getContext())},o.id))}),s.getIsExpanded()&&e.jsx(R,{sx:{bgcolor:C,"&:hover":{bgcolor:`${C} !important`}},children:e.jsx(T,{colSpan:s.getVisibleCells().length,children:e.jsx(ae,{data:s.original})})})]},s.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(B,{}),e.jsx(I,{sx:{p:2},children:e.jsx(se,{setPageSize:a.setPageSize,setPageIndex:a.setPageIndex,getState:a.getState,getPageCount:a.getPageCount})})]})]})})]})}E.propTypes={columns:g.array,data:g.array,getHeaderProps:g.func,handleAdd:g.func,modalToggler:g.func,renderRowSubComponent:g.any};const Ne=()=>{const r=D(),{customersLoading:c,customers:u}=k(),[i,d]=l.useState(!1),[S,m]=l.useState(!1),[x,h]=l.useState(null),[p,j]=l.useState(""),a=()=>{d(!i)},C=l.useMemo(()=>[{id:"select",header:({table:t})=>e.jsx(P,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()}),cell:({row:t})=>e.jsx(P,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})},{header:"#",accessorKey:"id",meta:{className:"cell-center"}},{header:"User Info",accessorKey:"name",cell:({row:t,getValue:s})=>e.jsxs(n,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx(F,{alt:"Avatar 1",size:"sm",src:A(`avatar-${t.original.avatar?t.original.avatar:1}.png`)}),e.jsxs(n,{spacing:0,children:[e.jsx(w,{variant:"subtitle1",children:s()}),e.jsx(w,{color:"text.secondary",children:t.original.email})]})]})},{header:"Contact",accessorKey:"contact",cell:({getValue:t})=>e.jsx(N,{displayType:"text",format:"+1 (###) ###-####",mask:"_",defaultValue:t()})},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Country",accessorKey:"country"},{header:"Status",accessorKey:"status",cell:t=>{switch(t.getValue()){case 3:return e.jsx(f,{color:"error",label:"Rejected",size:"small",variant:"light"});case 1:return e.jsx(f,{color:"success",label:"Verified",size:"small",variant:"light"});case 2:default:return e.jsx(f,{color:"info",label:"Pending",size:"small",variant:"light"})}}},{header:"Actions",meta:{className:"cell-center"},disableSortBy:!0,cell:({row:t})=>{const s=t.getCanExpand()&&t.getIsExpanded()?e.jsx(v,{style:{color:r.palette.error.main,transform:"rotate(45deg)"}}):e.jsx(ce,{});return e.jsxs(n,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[e.jsx(b,{title:"View",children:e.jsx(y,{color:"secondary",onClick:t.getToggleExpandedHandler(),children:s})}),e.jsx(b,{title:"Edit",children:e.jsx(y,{color:"primary",onClick:o=>{o.stopPropagation(),h(t.original),m(!0)},children:e.jsx(de,{})})}),e.jsx(b,{title:"Delete",children:e.jsx(y,{color:"error",onClick:o=>{o.stopPropagation(),a(),j(t.original.id)},children:e.jsx(me,{})})})]})}}],[r]);return c?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{data:u,columns:C,modalToggler:()=>{m(!0),h(null)}}),e.jsx(H,{id:p,title:p,open:i,handleClose:a}),e.jsx(oe,{open:S,modalToggler:m,customer:x})]})};export{Ne as default,ge as fuzzyFilter};
