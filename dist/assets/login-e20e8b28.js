import{P as A,R as x,am as g,j as e,cc as v,aG as P,aH as h,cO as S,ai as B,G as a,p as o,aQ as j,ao as w,aR as c,I as D,A as L,d as R,T as C}from"./index-9f92d9a5.js";import{A as F}from"./AuthWrapper-eca6d0a0.js";import{u as T}from"./useScriptRef-5bb5f9d9.js";import{I as k}from"./InputAdornment-8cec3bba.js";import{E as q}from"./EyeOutlined-4e5cb066.js";import{E as O}from"./EyeInvisibleOutlined-428dabd6.js";const f=({isDemo:m=!1})=>{x.useState(!1);const{login:b}=g(),u=T(),[l,y]=x.useState(!1),E=()=>{y(!l)},I=s=>{s.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(v,{initialValues:{email:"",password:"",submit:null},validationSchema:P().shape({email:h().email("Must be a valid email").max(255).required("Email is required"),password:h().max(255).required("Password is required")}),onSubmit:async(s,{setErrors:r,setStatus:i,setSubmitting:t})=>{try{await b(s.email,s.password),u.current&&(i({success:!0}),t(!1),S("api/menu/dashboard",B))}catch(d){u.current&&(i({success:!1}),r({submit:d.message}),t(!1))}},children:({errors:s,handleBlur:r,handleChange:i,handleSubmit:t,isSubmitting:d,touched:n,values:p})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(o,{spacing:1,children:[e.jsx(j,{htmlFor:"email-login",children:"Email Address"}),e.jsx(w,{id:"email-login",type:"email",value:p.email,name:"email",onBlur:r,onChange:i,placeholder:"Enter email address",fullWidth:!0,error:!!(n.email&&s.email)})]}),n.email&&s.email&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(o,{spacing:1,children:[e.jsx(j,{htmlFor:"password-login",children:"Password"}),e.jsx(w,{fullWidth:!0,error:!!(n.password&&s.password),id:"-password-login",type:l?"text":"password",value:p.password,name:"password",onBlur:r,onChange:i,endAdornment:e.jsx(k,{position:"end",children:e.jsx(D,{"aria-label":"toggle password visibility",onClick:E,onMouseDown:I,edge:"end",color:"secondary",children:l?e.jsx(q,{}):e.jsx(O,{})})}),placeholder:"Enter password"})]}),n.password&&s.password&&e.jsx(c,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(a,{item:!0,xs:12,sx:{mt:-1},children:e.jsx(o,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2})}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(c,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(L,{children:e.jsx(R,{disableElevation:!0,disabled:d,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})})]})})})})};f.propTypes={isDemo:A.bool};const z=()=>{const{isLoggedIn:m}=g();return e.jsx(F,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(o,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:e.jsx(C,{variant:"h3",children:"Login"})})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(f,{isDemo:m})})]})})};export{z as default};
