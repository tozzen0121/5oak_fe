import{P as n,j as e,D as $,aB as P,aC as G,aP as R,p as a,k as L,aT as J,T as s,d as m,r as Q,ce as S,B as c,a9 as z,H as U,aO as V,a6 as _,ad as k,ap as Y,aS as K,c as H,aE as B,cf as X,a5 as Z,G as x}from"./index-e023eedc.js";import{T as l}from"./TableCell-c0f78d8e.js";import{a as I}from"./invoice-ac1b1563.js";import{S as ee}from"./Skeleton-654845bb.js";import{D as re}from"./DeleteOutlined-5457f53d.js";import{I as se}from"./InputAdornment-13c9af8d.js";import{P as te}from"./PlusOutlined-5ac39224.js";import{a as ne}from"./react-pdf.browser.es-00127135.js";import{E as ie}from"./index-48bdc313.js";import{T as ae,a as le,b as oe}from"./TableContainer-5476a7ac.js";import{T as de}from"./TableHead-3fcae525.js";import{T as O}from"./TableRow-8d6a02d7.js";import{D as ce}from"./DownloadOutlined-de1755d7.js";const W=({onEditItem:o,cellData:t})=>e.jsx(l,{sx:{"& .MuiFormHelperText-root":{position:"absolute",bottom:-24,ml:0}},children:e.jsx($,{type:t.type,placeholder:t.placeholder,name:t.name,id:t.id.toString(),value:t.type==="number"?t.value>0?t.value:"":t.value,onChange:o,label:t.label,error:!!(t.errors&&t.touched),inputProps:{...t.type==="number"&&{min:0}}})});W.propTypes={onEditItem:n.func,cellData:n.object};function E({title:o,open:t,handleClose:r}){return e.jsx(P,{open:t,onClose:()=>r(!1),TransitionComponent:G,keepMounted:!0,maxWidth:"xs","aria-labelledby":"item-delete-title","aria-describedby":"item-delete-description",children:e.jsx(R,{sx:{mt:2,my:1},children:e.jsxs(a,{alignItems:"center",spacing:3.5,children:[e.jsx(L,{color:"error",sx:{width:72,height:72,fontSize:"1.75rem"},children:e.jsx(J,{})}),e.jsxs(a,{spacing:2,children:[e.jsx(s,{variant:"h4",align:"center",children:"Are you sure you want to delete?"}),e.jsxs(s,{align:"center",children:["By deleting",e.jsxs(s,{variant:"subtitle1",component:"span",children:[" ",'"',o,'"'," "]}),"product, Its details will also be removed from invoice."]})]}),e.jsxs(a,{direction:"row",spacing:2,sx:{width:1},children:[e.jsx(m,{fullWidth:!0,onClick:()=>r(!1),color:"secondary",variant:"outlined",children:"Cancel"}),e.jsx(m,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>r(!0),autoFocus:!0,children:"Delete"})]})]})})})}E.propTypes={title:n.string,open:n.bool,handleClose:n.func};const he=({id:o,name:t,description:r,qty:i,price:f,onDeleteItem:T,onEditItem:F,index:p,Blur:y,errors:b,touched:u})=>{var N;const{invoiceMaster:g}=I(),[D,j]=Q.useState(!1),A=h=>{j(!1),h&&(T(p),U({open:!0,message:"Product Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))},w=`invoice_detail[${p}].name`,v=S(u,w),d=S(b,w),C=[{placeholder:"Item name",label:"Item Name",name:`invoice_detail.${p}.name`,type:"text",id:o+"_name",value:t,errors:d,touched:v},{placeholder:"Description",label:"Description",name:`invoice_detail.${p}.description`,type:"text",id:o+"_description",value:r},{placeholder:"",label:"Qty",type:"number",name:`invoice_detail.${p}.qty`,id:o+"_qty",value:i},{placeholder:"",label:"price",type:"number",name:`invoice_detail.${p}.price`,id:o+"_price",value:f}];return e.jsxs(e.Fragment,{children:[C.map(h=>e.jsx(W,{onEditItem:M=>F(M),onBlur:M=>y(M),cellData:{placeholder:h.placeholder,name:h.name,type:h.type,id:h.id,value:h.value,errors:h.errors,touched:h.touched}},h.label)),e.jsx(l,{children:e.jsx(a,{direction:"column",justifyContent:"flex-end",alignItems:"flex-end",spacing:2,children:e.jsx(c,{sx:{pl:2},children:g===void 0?e.jsx(ee,{width:520,height:16}):e.jsx(s,{children:((N=g.country)==null?void 0:N.prefix)+""+(f*i).toFixed(2)})})})}),e.jsx(l,{align:"center",children:e.jsx(z,{title:"Remove Item",children:e.jsx(m,{color:"error",onClick:()=>j(!0),children:e.jsx(re,{})})})}),e.jsx(E,{title:t,open:D,handleClose:A})]})};he.propTypes={id:n.any,name:n.string,description:n.string,qty:n.number,price:n.any,onDeleteItem:n.func,onEditItem:n.func,index:n.number,Blur:n.func,errors:n.object,touched:n.object};const xe=({open:o,setOpen:t,handlerAddress:r})=>{function i(){t(!1)}return e.jsxs(P,{maxWidth:"sm",open:o,onClose:i,sx:{"& .MuiDialog-paper":{p:0},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:[e.jsx(V,{children:e.jsxs(a,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsx(s,{variant:"h5",children:"Select Address"}),e.jsx(m,{startIcon:e.jsx(te,{}),onClick:i,color:"primary",children:"Add New"})]})}),e.jsx(_,{}),e.jsxs(R,{sx:{p:2.5},children:[e.jsx(k,{sx:{width:"100%",pb:2},children:e.jsx($,{autoFocus:!0,id:"name",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(Y,{})})},placeholder:"Search",fullWidth:!0})}),e.jsx(a,{spacing:2,children:e.jsx(q,{handlerAddress:r})})]}),e.jsx(_,{}),e.jsxs(K,{sx:{p:2.5},children:[e.jsx(m,{color:"error",onClick:i,children:"Cancel"}),e.jsx(m,{onClick:i,color:"primary",variant:"contained",children:"Add"})]})]})};xe.propTypes={open:n.bool,setOpen:n.func,handlerAddress:n.func};const q=({handlerAddress:o})=>{const t=H(),r=[{name:"Ian Carpenter",address:"1754 Ureate, RhodSA5 5BO",phone:"+91 1234567890",email:"iacrpt65@gmail.com"},{name:"Belle J. Richter",address:"1300 Mine RoadQuemado, NM 87829",phone:"305-829-7809",email:"belljrc23@gmail.com"},{name:"Ritika Yohannan",address:"3488 Arbutus DriveMiami, FL",phone:"+91 1234567890",email:"rtyhn65@gmail.com"},{name:"Jesse G. Hassen",address:"3488 Arbutus DriveMiami, FL 33012",phone:"+91 1234567890",email:"jessghs78@gmail.com"},{name:"Christopher P. Iacovelli",address:"4388 House DriveWesrville, OH",phone:"+91 1234567890",email:"crpthl643@gmail.com"},{name:"Thomas D. Johnson",address:"4388 House DriveWestville, OH +91",phone:"1234567890",email:"thomshj56@gmail.com"}];return e.jsx(e.Fragment,{children:r.map(i=>e.jsxs(c,{onClick:()=>o(i),sx:{width:"100%",border:"1px solid",borderColor:"grey.200",borderRadius:1,p:1.25,"&:hover":{bgcolor:t.palette.primary.lighter,borderColor:t.palette.primary.lighter}},children:[e.jsx(s,{textAlign:"left",variant:"subtitle1",children:i.name}),e.jsxs(a,{direction:{xs:"column",sm:"row"},spacing:1,children:[e.jsx(s,{textAlign:"left",variant:"body2",color:"secondary",children:i.address}),e.jsx(s,{textAlign:"left",variant:"body2",color:"secondary",children:i.phone}),e.jsx(s,{textAlign:"left",variant:"body2",color:"secondary",children:i.email})]})]},i.email))})};q.propTypes={handlerAddress:n.func};const pe=({isOpen:o,setIsOpen:t,invoiceInfo:r,items:i,onAddNextInvoice:f})=>{var A,w,v;const T=H();function F(){t(!1)}const p=()=>{t(!1),f()};let y,b;try{y=B(new Date(r.date),"dd/mm/yyyy"),b=B(new Date(r.due_date),"dd/MM/yyyy")}catch{y="",b=""}const u=(A=r==null?void 0:r.invoice_detail)==null?void 0:A.reduce((d,C)=>C.name.trim().length>0?d+Number(C.price*Math.floor(C.qty)):d,0),g=r.tax*u/100,D=r.discount*u/100,j=u-D+g;return e.jsx(P,{open:o,onClose:F,maxWidth:"md",sx:{"& .MuiDialog-paper":{p:0,minWidth:{xl:1200,sm:"calc(100% - 20%)"}},"& .MuiBackdrop-root":{opacity:"0.5 !important"}},children:e.jsxs(c,{sx:{pb:2.5},children:[e.jsx("span",{"aria-hidden":"true",children:"â€‹"}),e.jsxs(c,{id:"print",sx:{p:2.5},children:[e.jsxs(c,{sx:{pb:2.5},children:[e.jsxs(a,{sx:{flexDirection:{xs:"column",sm:"row"}},justifyContent:"space-between",children:[e.jsxs(c,{sx:{pt:2.5},children:[e.jsxs(a,{direction:"row",spacing:2,children:[e.jsx(X,{})," ",e.jsx(Z,{label:"Paid",variant:"light",color:"success"})]}),e.jsx(s,{color:"secondary",children:r.invoice_id})]}),e.jsxs(c,{sx:{pt:2.5,pb:1.75},children:[e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsxs(s,{sx:{pl:4},variant:"subtitle1",children:["Date"," "]}),e.jsx(s,{children:y})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2,overflow:"hidden"},variant:"subtitle1",children:"Due Date"}),e.jsx(s,{children:b})]})]})]}),e.jsx(c,{sx:{pt:2.5},children:e.jsxs(x,{container:!0,spacing:2,justifyContent:"space-between",direction:"row",children:[e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(c,{sx:{border:1,minHeight:168,borderColor:"grey.200",borderRadius:.5,p:2.5},children:e.jsx(x,{container:!0,direction:"row",children:e.jsxs(x,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"From:"}),e.jsxs(k,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.cashierInfo.name}),e.jsx(s,{color:"secondary",children:r.cashierInfo.address}),e.jsx(s,{color:"secondary",children:r.cashierInfo.phone}),e.jsx(s,{color:"secondary",children:r.cashierInfo.email})]})]})})})}),e.jsx(x,{item:!0,xs:12,sm:6,children:e.jsx(c,{sx:{border:1,minHeight:168,borderColor:"grey.200",borderRadius:.5,p:2.5},children:e.jsx(x,{container:!0,direction:"row",children:e.jsxs(x,{item:!0,md:8,children:[e.jsx(s,{variant:"h5",children:"To:"}),e.jsxs(k,{sx:{width:"100%"},children:[e.jsx(s,{variant:"subtitle1",children:r.customerInfo.name}),e.jsx(s,{color:"secondary",children:r.customerInfo.address}),e.jsx(s,{color:"secondary",children:r.customerInfo.phone}),e.jsx(s,{color:"secondary",children:r.customerInfo.email})]})]})})})})]})})]}),e.jsx(ae,{children:e.jsxs(le,{children:[e.jsx(de,{children:e.jsxs(O,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Description"}),e.jsx(l,{align:"right",children:"Qty"}),e.jsx(l,{align:"right",children:"Price"}),e.jsx(l,{align:"right",children:"Amount"})]})}),e.jsx(oe,{children:i.map(d=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(l,{children:i.indexOf(d)+1}),e.jsx(l,{children:d.name}),e.jsx(l,{children:d.description}),e.jsx(l,{align:"right",children:d.qty}),e.jsxs(l,{align:"right",children:["$",Number(d.price).toFixed(2)]}),e.jsxs(l,{align:"right",children:["$",Number(d.price*d.qty).toFixed(2)]})]},d.name))})]})}),e.jsx(c,{sx:{p:2.5},children:e.jsx(x,{container:!0,direction:"row",justifyContent:"flex-end",children:e.jsx(x,{item:!0,md:4,children:e.jsxs(a,{spacing:2,children:[e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Sub Total:"}),e.jsxs(s,{variant:"h6",children:["$",u.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:"secondary",children:"Discount:"}),e.jsxs(s,{variant:"h6",color:T.palette.success.main,children:["$",D.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{color:T.palette.grey[500],children:"Tax:"}),e.jsxs(s,{variant:"h6",children:["$",g.toFixed(2)]})]}),e.jsxs(a,{direction:"row",justifyContent:"space-between",children:[e.jsx(s,{sx:{pr:2},variant:"subtitle1",children:"Grand Total:"}),e.jsxs(s,{variant:"h6",children:["$",j%1===0?j:j.toFixed(2)]})]})]})})})})]}),e.jsx(c,{sx:{p:2.5},children:e.jsxs(s,{children:["Notes: ",r.notes]})}),e.jsxs(a,{direction:"row",justifyContent:"flex-end",spacing:2,sx:{p:2.5},children:[e.jsx(m,{color:"secondary",onClick:p,children:"Cancel"}),e.jsx(ne,{document:e.jsx(ie,{list:r}),fileName:`${(r==null?void 0:r.invoiceId)||(r==null?void 0:r.invoice_id)}-${(r==null?void 0:r.customer_name)||((w=r==null?void 0:r.from)==null?void 0:w.name)||((v=r==null?void 0:r.customerInfo)==null?void 0:v.name)}.pdf`,style:{textDecoration:"none"},children:e.jsx(m,{startIcon:e.jsx(ce,{}),variant:"contained",color:"primary",children:"Download"})})]})]})})};pe.propTypes={isOpen:n.bool,setIsOpen:n.func,invoiceInfo:n.object,items:n.array,onAddNextInvoice:n.func};export{xe as A,he as I,pe as a};
