import{z as g,am as d,j as e,cc as f,aG as b,aH as v,H as k,G as a,p as u,aQ as y,ao as w,aR as m,T as o,A,d as F,L as P}from"./index-0e2d5618.js";import{A as L}from"./AuthWrapper-3186b8fa.js";import{u as B}from"./useScriptRef-baeda646.js";const E=()=>{const l=B(),h=g(),{isLoggedIn:x,resetPassword:p}=d();return e.jsx(e.Fragment,{children:e.jsx(f,{initialValues:{email:"",submit:null},validationSchema:b().shape({email:v().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(s,{setErrors:n,setStatus:r,setSubmitting:t})=>{try{await p(s.email).then(()=>{r({success:!0}),t(!1),k({open:!0,message:"Check mail for reset password link",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{h(x?"/auth/check-mail":"/check-mail",{replace:!0})},1500)},i=>{r({success:!1}),n({submit:i.message}),t(!1)})}catch(i){console.error(i),l.current&&(r({success:!1}),n({submit:i.message}),t(!1))}},children:({errors:s,handleBlur:n,handleChange:r,handleSubmit:t,isSubmitting:i,touched:c,values:j})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(u,{spacing:1,children:[e.jsx(y,{htmlFor:"email-forgot",children:"Email Address"}),e.jsx(w,{fullWidth:!0,error:!!(c.email&&s.email),id:"email-forgot",type:"email",value:j.email,name:"email",onBlur:n,onChange:r,placeholder:"Enter email address",inputProps:{}})]}),c.email&&s.email&&e.jsx(m,{error:!0,id:"helper-text-email-forgot",children:s.email})]}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(m,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,sx:{mb:-2},children:e.jsx(o,{variant:"caption",children:"Do not forgot to check SPAM box."})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(A,{children:e.jsx(F,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Send Password Reset Email"})})})]})})})})},T=()=>{const{isLoggedIn:l}=d();return e.jsx(L,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(u,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(o,{variant:"h3",children:"Forgot Password"}),e.jsx(o,{component:P,to:l?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Back to Login"})]})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(E,{})})]})})};export{T as default};
