import{P as R,c3 as w,r as d,j as e,a5 as m,M as C,p as y,a6 as b,B as P,G as j}from"./index-700092c6.js";import{u as T,b as M,c as V,S as I,f as h}from"./ScrollX-b856250f.js";import{L as z}from"./LinearWithLabel-195fa732.js";import{I as x,C as v,R as D,T as K}from"./Filter-579ca551.js";import{T as k,a as H,b as N}from"./TableContainer-aae07590.js";import{T as A}from"./TableHead-4338a7fc.js";import{T as p}from"./TableRow-1be2ba5d.js";import{T as S}from"./TableCell-65db6e50.js";import{p as B,u as L,Q as W,a as F,b as G}from"./useBaseQuery-2eccdcb2.js";import"./DownloadOutlined-5e85549c.js";import"./CaretUpOutlined-620d269f.js";import"./CaretDownOutlined-164c8e5c.js";import"./Pagination-20c22f4b.js";import"./index-debfc055.js";import"./Checkbox-f8f119ae.js";import"./MinusOutlined-ed74a404.js";function E({data:o,columns:n}){const[a,g]=d.useState({}),r=T({data:o,columns:n,state:{rowSelection:a},enableRowSelection:!0,onRowSelectionChange:g,getCoreRowModel:M(),getPaginationRowModel:V(),debugTable:!0});d.useEffect(()=>g({5:!0}),[]);let u=[];return n.map(s=>s.accessorKey&&u.push({label:typeof s.header=="string"?s.header:"#",key:s.accessorKey})),e.jsx(C,{title:"Row Selection",content:!1,secondary:e.jsx(v,{data:r.getSelectedRowModel().flatRows.map(s=>s.original).length===0?o:r.getSelectedRowModel().flatRows.map(s=>s.original),headers:u,filename:"row-selection.csv"}),codeHighlight:!0,codeString:JSON.stringify({rowSelection:a,"flatRows[].original":r.getSelectedRowModel().flatRows.map(s=>s.original)},null,2),children:e.jsx(I,{children:e.jsxs(y,{children:[e.jsx(D,{selected:Object.keys(a).length}),e.jsx(k,{children:e.jsxs(H,{children:[e.jsx(A,{children:r.getHeaderGroups().map(s=>e.jsx(p,{sx:{"& > th:first-of-type":{width:"58px"}},children:s.headers.map(l=>e.jsx(S,{...l.column.columnDef.meta,children:l.isPlaceholder?null:h(l.column.columnDef.header,l.getContext())},l.id))},s.id))}),e.jsx(N,{children:r.getRowModel().rows.map(s=>e.jsx(p,{children:s.getVisibleCells().map(l=>e.jsx(S,{...l.column.columnDef.meta,children:h(l.column.columnDef.cell,l.getContext())},l.id))},s.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(P,{sx:{p:2},children:e.jsx(K,{setPageSize:r.setPageSize,setPageIndex:r.setPageIndex,getState:r.getState,getPageCount:r.getPageCount})})]})]})})})}E.propTypes={columns:R.array,data:R.array};const J=()=>{const o=w(100),n=d.useMemo(()=>[{id:"select",header:({table:a})=>e.jsx(x,{checked:a.getIsAllRowsSelected(),indeterminate:a.getIsSomeRowsSelected(),onChange:a.getToggleAllRowsSelectedHandler()}),cell:({row:a})=>e.jsx(x,{checked:a.getIsSelected(),disabled:!a.getCanSelect(),indeterminate:a.getIsSomeSelected(),onChange:a.getToggleSelectedHandler()})},{header:"Name",accessorKey:"fullName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:a=>{switch(a.getValue()){case"Complicated":return e.jsx(m,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(m,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(m,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:a=>e.jsx(z,{value:a.getValue(),sx:{minWidth:75}})}],[]);return e.jsx(E,{data:o,columns:n})};function $(o,n,a){const g=B(o,n,a);return L(g,W)}const q=new F;async function X(o){await new Promise(a=>setTimeout(a,500));const n=w(100);return{rows:n.slice(o.pageIndex*o.pageSize,(o.pageIndex+1)*o.pageSize),pageCount:Math.ceil(n.length/o.pageSize)}}function U(){const o=d.useMemo(()=>[{id:"select",header:({table:t})=>e.jsx(x,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()}),cell:({row:t})=>e.jsx(x,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})},{header:"Name",accessorKey:"fullName"},{header:"Email",accessorKey:"email"},{header:"Age",accessorKey:"age",meta:{className:"cell-right"}},{header:"Status",accessorKey:"status",cell:t=>{switch(t.getValue()){case"Complicated":return e.jsx(m,{color:"error",label:"Complicated",size:"small",variant:"light"});case"Relationship":return e.jsx(m,{color:"success",label:"Relationship",size:"small",variant:"light"});case"Single":default:return e.jsx(m,{color:"info",label:"Single",size:"small",variant:"light"})}}},{header:"Profile Progress",accessorKey:"progress",cell:t=>e.jsx(z,{value:t.getValue(),sx:{minWidth:75}})}],[]),[n,a]=d.useState({}),[{pageIndex:g,pageSize:r},u]=d.useState({pageIndex:0,pageSize:10}),s={pageIndex:g,pageSize:r},{data:l}=$(["data",s],()=>X(s),{keepPreviousData:!0}),O=d.useMemo(()=>[],[]),Q=d.useMemo(()=>({pageIndex:g,pageSize:r}),[g,r]),c=T({data:(l==null?void 0:l.rows)??O,columns:o,pageCount:(l==null?void 0:l.pageCount)??-1,state:{pagination:Q,rowSelection:n},getRowId:t=>t.id.toString(),enableRowSelection:!0,onRowSelectionChange:a,onPaginationChange:u,getCoreRowModel:M(),manualPagination:!0,debugTable:!0});d.useEffect(()=>a({1:!0,5:!0,7:!0}),[]);let f=[];return o.map(t=>t.accessorKey&&f.push({label:typeof t.header=="string"?t.header:"#",key:t.accessorKey})),e.jsx(C,{title:"Row Selection (Pagination Control)",content:!1,secondary:e.jsx(v,{data:c.getSelectedRowModel().flatRows.map(t=>t.original).length===0?c.getRowModel().rows.map(t=>t.original):c.getSelectedRowModel().flatRows.map(t=>t.original),headers:f,filename:"rsp-control.csv"}),codeHighlight:!0,codeString:JSON.stringify({rowSelection:n},null,2),children:e.jsx(I,{children:e.jsxs(y,{children:[e.jsx(D,{selected:Object.keys(n).length}),e.jsx(k,{children:e.jsxs(H,{children:[e.jsx(A,{children:c.getHeaderGroups().map(t=>e.jsx(p,{sx:{"& > th:first-of-type":{width:"58px"}},children:t.headers.map(i=>e.jsx(S,{...i.column.columnDef.meta,children:i.isPlaceholder?null:h(i.column.columnDef.header,i.getContext())},i.id))},t.id))}),e.jsx(N,{children:c.getRowModel().rows.map(t=>e.jsx(p,{children:t.getVisibleCells().map(i=>e.jsx(S,{...i.column.columnDef.meta,children:h(i.column.columnDef.cell,i.getContext())},i.id))},t.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(P,{sx:{p:2},children:e.jsx(K,{setPageSize:c.setPageSize,setPageIndex:c.setPageIndex,getState:c.getState,getPageCount:c.getPageCount})})]})]})})})}const Y=()=>e.jsx(G,{client:q,children:e.jsx(U,{})}),he=()=>e.jsxs(j,{container:!0,spacing:3,children:[e.jsx(j,{item:!0,xs:12,children:e.jsx(J,{})}),e.jsx(j,{item:!0,xs:12,children:e.jsx(Y,{})})]});export{he as default};
