import{P as O,a3 as gt,r as c,j as e,M as se,aV as Ae,am as yt,G as N,p as R,T as w,L as B,d as _,aB as ft,B as jt,aO as Re,aP as wt,D as Ce,aS as mt,a9 as Te,I as ve,Z as St,x as ie,H as xe}from"./index-700092c6.js";import{C as Gt}from"./ComponentSkeleton-fc9214e8.js";import{L as be}from"./LoadingButton-86a4b194.js";import{_ as ee}from"./react-apexcharts.min-eeecc60c.js";import{u as Pt,S as Rt,f as Le,b as Ct}from"./ScrollX-b856250f.js";import"./Filter-579ca551.js";import{E as Tt,R as vt}from"./RowEditable-f66a19b4.js";import"./LinearWithLabel-195fa732.js";import{T as bt,a as Lt,b as kt}from"./TableContainer-aae07590.js";import{T as Et}from"./TableHead-4338a7fc.js";import{T as ke}from"./TableRow-1be2ba5d.js";import{T as Ee}from"./TableCell-65db6e50.js";import{S as At}from"./Slider-56553995.js";import{S as Ut}from"./SendOutlined-bc8f0a67.js";import"./Skeleton-38e6d77e.js";import"./DownloadOutlined-5e85549c.js";import"./CaretUpOutlined-620d269f.js";import"./CaretDownOutlined-164c8e5c.js";import"./Pagination-20c22f4b.js";import"./index-debfc055.js";import"./Checkbox-f8f119ae.js";import"./MinusOutlined-ed74a404.js";import"./visuallyHidden-14c3de6e.js";const Ue=({row:D,table:h})=>{var k;const d=(k=h==null?void 0:h.options)==null?void 0:k.meta,F=I=>{d==null||d.setSelectedRow(b=>({...b,[D.id]:!b[D.id]})),d==null||d.revertData(D.index,(I==null?void 0:I.currentTarget.name)==="cancel")},L=()=>{d==null||d.saveData(D.index)};return e.jsxs(R,{direction:"row",spacing:1,alignItems:"center",children:[(d==null?void 0:d.selectedRow[D.id])&&e.jsx(Te,{title:"Cancel",children:e.jsx(ve,{color:"error",name:"cancel",onClick:F,children:e.jsx(St,{})})}),e.jsx(Te,{title:d!=null&&d.selectedRow[D.id]?"Save":"Edit",children:e.jsx(ve,{color:d!=null&&d.selectedRow[D.id]?"success":"primary",onClick:d!=null&&d.selectedRow[D.id]?L:F,children:d!=null&&d.selectedRow[D.id]?e.jsx(Ut,{}):e.jsx(Tt,{})})})]})};Ue.propTypes={row:O.object,table:O.object,options:O.array,id:O.number,index:O.number};O.node,O.number,O.number;const We=gt("input")({display:"none"});We.displayName="Input";const ce=D=>{let h=0,d=D.length-1;for(;h<D.length&&Number(D[h])===0;)h++;for(;d>=0&&Number(D[d])===0;)d--;return D.slice(h,d+1)},Wt=(D,h,d)=>D.map(L=>{const k=ce(L.data);return{...L,data:k.slice(0,14)}}),le=({getValue:D})=>{const h=D();return`${Number((h||0).toFixed(2)).toLocaleString()}`};function ne({columns:D,data:h,setData:d}){const[F,L]=c.useState(()=>[...h]),[k,I]=c.useState({}),b=Pt({data:h,columns:D,defaultColumn:{cell:vt},getCoreRowModel:Ct(),meta:{selectedRow:k,setSelectedRow:I,revertData:(y,l)=>{l?d(f=>f.map((s,a)=>a===y?F[y]:s)):L(f=>f.map((s,a)=>a===y?h[y]:s))},updateData:(y,l,f)=>{d(s=>s.map((a,E)=>E===y?{...s[y],[l]:f}:a))},saveData:async y=>{try{const l=h[y],f=await ie.put(`/api/launchGames/${l._id}`,l);xe({open:!0,message:"Saved successfully!",variant:"alert",alert:{color:"success"}}),I(s=>({...s,[y]:!1}))}catch{xe({open:!0,message:"Error!",variant:"alert",alert:{color:"error"}})}}},debugTable:!0});let $=[];return b.getAllColumns().map(y=>y.columnDef.accessorKey&&$.push({label:typeof y.columnDef.header=="string"?y.columnDef.header:"#",key:y.columnDef.accessorKey})),e.jsx(se,{content:!1,children:e.jsx(Rt,{children:e.jsx(bt,{children:e.jsxs(Lt,{children:[e.jsx(Et,{children:b.getHeaderGroups().map(y=>e.jsx(ke,{children:y.headers.map(l=>e.jsx(Ee,{...l.column.columnDef.meta,children:l.isPlaceholder?null:Le(l.column.columnDef.header,l.getContext())},l.id))},y.id))}),e.jsx(kt,{children:b.getRowModel().rows.map(y=>e.jsx(ke,{children:y.getVisibleCells().map(l=>e.jsx(Ee,{...l.column.columnDef.meta,children:Le(l.column.columnDef.cell,l.getContext())},l.id))},y.id))})]})})})})}ne.propTypes={columns:O.array,data:O.array,setData:O.func};function Ot({data:D,games:h}){const d=Ae(),[F,L]=c.useState(d.pathname==="/admin/report"),[k,I]=c.useState([]),[b,$]=c.useState([]);c.useEffect(()=>{const l=[...new Set(D.map(s=>s.summary.split("-")[0]))];$(l);const f=Object.values(D.reduce((s,{game:a,summary:E,betsEuro:de,winsEuro:De,ggrEuro:z,avgBet:ge,spins:we,uniquePlayers:ye})=>{s[a]||(s[a]={_id:"",name:a,maxDate:E,years:{},totalGGR:0,latestWeekStart:"",secLatestWeekStart:"",latestWeekGGR:[],secLatestWeekGGR:[],remainDays:0,weekAverage:0,weekChange:0,weekChangeColor:"",dailyTotalGGR:0,projectedTotalGGR:0});const Z=h.find(ae=>ae.name===a);if(s[a].launchDate=Z.launchDate,s[a]._id=Z._id,new Date(Z.launchDate)<=new Date(E)){const ae=new Date(s[a].maxDate)<new Date(E);s[a].maxDate=ae?E:s[a].maxDate,s[a].dailyTotalGGR=ae?z:s[a].dailyTotalGGR,s[a].totalGGR+=z;const Y=E.split("-")[0];s[a].years[Y]||(s[a].years[Y]=0),s[a].years[Y]+=z,s[a][`totalGGR_${Y}`]||(s[a][`totalGGR_${Y}`]=0),s[a][`totalGGR_${Y}`]+=z;const ue=new Date(s[a].maxDate),fe=new Date(ue.getFullYear(),11,31);s[a].remainDays=Math.ceil((fe-ue)/(1e3*60*60*24));const pe=new Date(s[a].maxDate),V=new Date(pe);V.setDate(V.getDate()-6);const J=new Date(V);J.setDate(J.getDate()-7);const re=new Date(V);re.setDate(re.getDate()-1),s[a].latestWeekStart=V.toISOString().split("T")[0],s[a].secLatestWeekStart=J.toISOString().split("T")[0],s[a].latestWeekGGR=D.filter(S=>S.game===a&&new Date(S.summary)>=V&&new Date(S.summary)<=pe).map(S=>S.ggrEuro),s[a].secLatestWeekGGR=D.filter(S=>S.game===a&&new Date(S.summary)>=J&&new Date(S.summary)<=re).map(S=>S.ggrEuro),s[a].weekAverage=s[a].latestWeekGGR.reduce((S,K)=>S+K,0)/s[a].latestWeekGGR.length,s[a].weekChange=(s[a].latestWeekGGR.reduce((S,K)=>S+K,0)-s[a].secLatestWeekGGR.reduce((S,K)=>S+K,0))/s[a].secLatestWeekGGR.reduce((S,K)=>S+K,0)*100,s[a].weekChangeColor=e.jsx("span",{style:{color:s[a].weekChange>0?"green":"red"},children:`${Number(s[a].weekChange.toFixed(2)).toLocaleString()} %`}),s[a].projectedTotalGGR=s[a].totalGGR+s[a].weekAverage*s[a].remainDays}return s},{}));I(f)},[D,h]);const y=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text",cell:({getValue:l,row:f})=>{const s=l();return e.jsx(B,{style:{textDecoration:"none"},to:F?`/admin/report-one/${f.original._id}`:`/report-one/${f.original._id}`,children:s})}},{header:"Launch Date",accessorKey:"launchDate",dataType:"text",cell:({getValue:l,row:f,table:s})=>{var E;const a=l();return`${(E=a==null?void 0:a.split("T"))==null?void 0:E[0]}`}},{header:"Daily Total GGR",accessorKey:"dailyTotalGGR",dataType:"text",cell:le},{header:"Projected Total GGR",accessorKey:"projectedTotalGGR",dataType:"text",cell:le},...(b==null?void 0:b.map(l=>({header:`Total GGR ${l}`,accessorKey:`totalGGR_${l}`,dataType:"text",cell:le})))||[],{header:"Lifetime GGR",accessorKey:"totalGGR",dataType:"text",cell:le},{header:"7 Day Average",accessorKey:"weekAverage",dataType:"text",cell:le},{header:"7 Day Change",accessorKey:"weekChangeColor",dataType:"text"},{header:"Latest Report Date",accessorKey:"maxDate",dataType:"text",cell:({getValue:l,row:f,table:s})=>{var E;const a=l();return`${(E=a==null?void 0:a.split("T"))==null?void 0:E[0]}`}}],[b]);return e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(N,{container:!0,spacing:2,mb:5,children:[e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(w,{variant:"h5",textAlign:"center",children:"Lifetime GGR - "}),e.jsx(w,{variant:"h6",textAlign:"center",children:Number(k.reduce((l,f)=>l+f.totalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(w,{variant:"h5",textAlign:"center",children:"Daily Total GGR -"}),e.jsx(w,{variant:"h6",textAlign:"center",children:Number(k.reduce((l,f)=>l+f.dailyTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"center",children:[e.jsx(w,{variant:"h5",textAlign:"center",children:`Projected GGR ${b.reduce((l,f)=>Math.max(l,f),-1/0)} -`}),e.jsx(w,{variant:"h6",textAlign:"center",children:Number(k.reduce((l,f)=>l+f.projectedTotalGGR,0)).toLocaleString()})]})})}),e.jsx(N,{item:!0,xs:6,lg:3,children:e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center"},children:b==null?void 0:b.map((l,f)=>e.jsxs(R,{direction:"row",spacing:1,alignItems:"end",justifyContent:"start",children:[e.jsx(w,{variant:"h5",textAlign:"center",children:`Total GGR ${l} - `}),e.jsx(w,{variant:"h6",textAlign:"center",children:Number(k.reduce((s,a)=>s+(a[`totalGGR_${l}`]||0),0)).toLocaleString()})]},f))})})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"Games Data"}),e.jsx(ne,{data:k,columns:y})]})]})}const te={chart:{height:100,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:3},xaxis:{categories:[]}},cs=()=>{const D=Ae(),[h,d]=c.useState(D.pathname==="/admin/report"),{user:F}=yt();c.useState(0);const[L,k]=c.useState(!1),[I,b]=c.useState(!1),[$,y]=c.useState([]),[l,f]=c.useState([]),[s,a]=c.useState([]),[E,de]=c.useState(!0),[De,z]=c.useState(""),[ge,we]=c.useState(""),[ye,Z]=c.useState(!1),[ae,Y]=c.useState([]),[ue,fe]=c.useState([]),[pe,V]=c.useState([]),[J,re]=c.useState([]),[S,K]=c.useState([]),[Oe,Ie]=c.useState(te),[$e,Ne]=c.useState(te),[Fe,Ke]=c.useState(te),[Me,qe]=c.useState(te),[_e,Be]=c.useState(te),[Ye,It]=c.useState(new Date().toISOString().split("T")[0]),[Ve,He]=c.useState([]),[Xe,ze]=c.useState(te),[Ze,Je]=c.useState([]),[Qe,et]=c.useState([]),[tt,st]=c.useState([]),[nt,at]=c.useState([]),[A,me]=c.useState([1,37]),[rt,ot]=c.useState(0),lt=(x,T)=>{console.log("newRange",T),me(T)},it=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"Launch Date",accessorKey:"launchDate",dataType:"date",cell:({getValue:x,row:T,table:p})=>{var n,r;const m=(n=p==null?void 0:p.options)==null?void 0:n.meta,M=(r=m==null?void 0:m.selectedRow)==null?void 0:r[T.id],H=x(),q=H?new Date(H).toISOString().split("T")[0]:"";return M?e.jsx("input",{type:"date",value:q,onChange:i=>m==null?void 0:m.updateData(T.index,"launchDate",i.target.value)}):q}},{header:"Actions",id:"edit",cell:Ue,meta:{className:"cell-center"}}],[]),ct=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"TOTAL GGR",accessorKey:"data",dataType:"text",cell:({getValue:x,row:T,table:p})=>{const m=x();return`${(Number(m[m.length-1])||0).toLocaleString()}`}}],[]),Se=c.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"}],[]);c.useEffect(()=>{const x=[];for(let n=0;n<7;n++){const r=new Date;r.setDate(r.getDate()-n),x.push(r.toISOString().split("T")[0])}const T=l.reduce((n,{game:r,summary:i})=>{if(!n[r]){const G=s.find(j=>j.name===r);n[r]={...G,maxDate:i}}const u=new Date(n[r].maxDate)<new Date(i);return n[r].maxDate=u?i:n[r].maxDate,n},{}),p={},M=Object.values(l.reduce((n,{game:r,summary:i,ggrEuro:u,spins:G,uniquePlayers:j,betsEuro:v})=>{n[r]||(n[r]={name:r,ggrEuro:[],spins:[],uniquePlayers:[],SPU:[],CWPP:[]});const P=s.find(he=>he.name===r);new Date(P==null?void 0:P.launchDate)<new Date(i),p[r]&&new Date(p[r])<new Date(i.split("T")[0])?p[r]=i.split("T")[0]:p[r]||(p[r]=i.split("T")[0]);const X=new Date(T[r].maxDate)||new Date,Q=new Date(X);return Q.setDate(Q.getDate()-6),new Date(i)>=Q&&new Date(i)<=X&&(n[r].ggrEuro.push(u),n[r].spins.push(G),n[r].uniquePlayers.push(j),n[r].SPU.push(G/j),n[r].CWPP.push(v/j)),n},{})).map(n=>{const r=n.ggrEuro,i=n.spins,u=n.uniquePlayers,G=n.SPU,j=n.CWPP;return{name:n.name,ggrEuro:Number((r.length>0?r.reduce((v,P)=>v+P,0)/r.length:0).toFixed(2)).toLocaleString(),spins:Number((i.length>0?i.reduce((v,P)=>v+P,0)/i.length:0).toFixed(2)).toLocaleString(),uniquePlayers:Number((u.length>0?u.reduce((v,P)=>v+P,0)/u.length:0).toFixed(2)).toLocaleString(),SPU:Number((G.length>0?G.reduce((v,P)=>v+P,0)/G.length:0).toFixed(2)).toLocaleString(),CWPP:Number((j.length>0?j.reduce((v,P)=>v+P,0)/j.length:0).toFixed(2)).toLocaleString()}});V(M);const q=Object.values(l.reduce((n,{game:r,summary:i,ggrEuro:u,spins:G,uniquePlayers:j,betsEuro:v})=>{n[r]||(n[r]={name:r,ggrEuros:[],ggrEuro:0,ggrEuro2:0,spins:0,spins2:0,uniquePlayers:0,uniquePlayers2:0,SPU:0,SPU2:0,CWPP:0,CWPP2:0,arrSpins:[],arrSpins2:[]});const P=new Date(p[r]);P.setDate(P.getDate()-7);const X=new Date(p[r]);return X.setDate(X.getDate()-14),P<new Date(i)?(n[r].ggrEuros.push(u),n[r].arrSpins.push(G),n[r].ggrEuro+=u,n[r].spins+=G,n[r].uniquePlayers+=j,n[r].SPU+=G/j,n[r].CWPP+=v/j):X<new Date(i)&&new Date(i)<=P&&(n[r].arrSpins2.push(G),n[r].ggrEuro2+=u,n[r].spins2+=G,n[r].uniquePlayers2+=j,n[r].SPU2+=G/j,n[r].CWPP2+=v/j),n},{})).map(n=>{const r=(n.ggrEuro-n.ggrEuro2)/(n.ggrEuro2||1),i=(n.spins-n.spins2)/(n.spins2||1),u=(n.uniquePlayers-n.uniquePlayers2)/(n.uniquePlayers2||1),G=(n.SPU-n.SPU2)/(n.SPU2||1),j=(n.CWPP-n.CWPP2)/(n.CWPP2||1);return{name:n.name,ggrEuro:e.jsx("span",{style:{color:r>=0?"green":"red"},children:`${(r*100).toFixed(2)} %`}),spins:e.jsx("span",{style:{color:i>=0?"green":"red"},children:`${(i*100).toFixed(2)} %`}),uniquePlayers:e.jsx("span",{style:{color:u>=0?"green":"red"},children:`${(u*100).toFixed(2)} %`}),SPU:e.jsx("span",{style:{color:G>=0?"green":"red"},children:`${(G*100).toFixed(2)} %`}),CWPP:e.jsx("span",{style:{color:j>=0?"green":"red"},children:`${(j*100).toFixed(2)} %`})}});re(q)},[ue,l,s]);const Ge=async()=>{var x,T;try{const p=await ie.get("api/reports");if(console.log("response.data.data",p.data.data),console.log("response.data.setGames",p.data.games),y(p.data.data),a(p.data.games),p.data.games.length>0){const m=p.data.games.length>0?(T=(x=p.data.games)==null?void 0:x.reduce((i,u)=>new Date(u.launchDate)<new Date(i.launchDate)?u:i).launchDate)==null?void 0:T.split("T")[0]:new Date().toISOString().split("T")[0],M=[...p.data.data].filter(i=>new Date(i.summary)>=new Date(m));M.sort((i,u)=>new Date(i.summary)-new Date(u.summary));const H=[],q=Object.values(M.reduce((i,{game:u,ggrEuro:G,summary:j})=>{i[u]||(i[u]={name:u,data:[],totalGGR:0});const v=p.data.games.find(P=>P.name===u);return i[u].totalGGR+=new Date(v==null?void 0:v.launchDate)>new Date(j)?0:G,i[u].data.push(i[u].totalGGR.toFixed(2)),H.push(j.slice(0,10)),i},{}));let n=0;const r=q.map(i=>(n=Math.max(n,i.data.length),{...i,data:ce(i.data)}));console.log("min, max",n),ot(n),me([1,n])}}catch{}},dt=async()=>{const x=localStorage.getItem("reportToken");de(x!=="true"),Ge()};c.useEffect(()=>{dt()},[]);const ut=async x=>{if(x.target.files.length>0){const T=x.target.files[0];if(!T){alert("Please select a file first.");return}k(!0);const p=new FormData;p.append("file",T);try{const m=await ie.post("api/reports/upload",p,{headers:{"Content-Type":"multipart/form-data"}});xe({open:!0,message:"Excel uploaded successfully!",variant:"alert",alert:{color:"success"}}),Ge(),k(!0)}catch(m){console.error("Upload Error:",m),alert("Error uploading file.")}finally{k(!1),x.target.value=""}}},pt=async()=>{b(!0);try{const x=await ie.get("api/reports/download",{responseType:"blob"}),T=window.URL.createObjectURL(new Blob([x.data])),p=document.createElement("a");p.href=T,p.setAttribute("download","report.xlsx"),document.body.appendChild(p),p.click(),document.body.removeChild(p)}catch(x){console.error("Download Error:",x),xe({open:!0,message:"Excel not exists!",variant:"alert",alert:{color:"error"}})}finally{b(!1)}};c.useEffect(()=>{var T;if(s.length>0){const p=s.length>0?(T=s==null?void 0:s.reduce((t,o)=>new Date(o.launchDate)<new Date(t.launchDate)?o:t).launchDate)==null?void 0:T.split("T")[0]:new Date().toISOString().split("T")[0],m=[...$].filter(t=>new Date(t.summary)>=new Date(p));m.sort((t,o)=>new Date(t.summary)-new Date(o.summary));const M=[],H=Object.values(m.reduce((t,{game:o,ggrEuro:g,summary:U})=>{t[o]||(t[o]={name:o,data:[],totalGGR:0});const C=s.find(W=>W.name===o);return t[o].totalGGR+=new Date(C==null?void 0:C.launchDate)>new Date(U)?0:g,t[o].data.push(t[o].totalGGR.toFixed(2)),M.push(U.slice(0,10)),t},{}));let q=0;const r=H.map(t=>(q=Math.max(q,t.data.length),{...t,data:ce(t.data)})).map(t=>{const o=A[0]-1,g=A[1]-1;return t.data=t.data.slice(o,g+1),t});K(r);const i=[...new Set(M)];fe(i);const u=[];for(let t=A[0];t<=A[1];t++)u.push(`Day ${t}`);const G=$==null?void 0:$.map(t=>({...t,SPU:t.spins/t.uniquePlayers,CWPP:t.betsEuro/t.uniquePlayers}));f(G);const j=[];for(let t=0;t<14;t++)j.push(`Day ${t+1}`);ze(t=>({...t,xaxis:{categories:j,labels:{show:!1}}})),He(Wt(H));const P=Object.values(m.reduce((t,{game:o,summary:g,uniquePlayers:U})=>{t[o]||(t[o]={name:o,data:[]});const C=s.find(W=>W.name===o);return t[o].data.push(new Date(C==null?void 0:C.launchDate)>new Date(g)?0:U),t},{})).map(t=>{const o=A[0]-1,g=A[1]-1;return t.data=t.data.slice(o,g+1),t});Je(P);const X=t=>{if(t.length<6)return[];let o=new Array(5).fill(0);for(let g=5;g<t.length;g++){let U=t.slice(g-4,g+1).reduce((oe,je)=>oe+je,0),C=t.slice(g-5,g).reduce((oe,je)=>oe+je,0),W=((U-C)/(C||1)*100).toFixed(2);o.push(W)}return o};var x=0;const Q=Object.values(m.reduce((t,{game:o,summary:g,uniquePlayers:U})=>{t[o]||(x=0,t[o]={name:o,data:[]});const C=s.find(W=>W.name===o);return new Date(C==null?void 0:C.launchDate)<=new Date(g)&&(t[o].data.push(U),x++,console.log("count",x,U)),t},{})),he=Q.map(t=>({...t,data:X(t.data)}));console.log("usersData2",he),console.log("sortData",m);const Pe=he.map(t=>{const o=A[0]-1,g=A[1]-1;return t.data=t.data.slice(o,g+1),{...t,data:t.data}});console.log("filterUserChangesData",Pe),et(Pe),console.log("usersData",Q);const xt=Object.values(m.reduce((t,{game:o,spins:g,summary:U})=>{t[o]||(t[o]={name:o,data:[]});const C=s.find(W=>W.name===o);return t[o].data.push(new Date(C==null?void 0:C.launchDate)>new Date(U)?0:g),t},{})).map(t=>{const o=A[0]-1,g=A[1]-1;return t.data=t.data.slice(o,g+1),{...t,data:ce(t.data)}});st(xt);const Dt=Object.values(m.reduce((t,{game:o,spins:g,uniquePlayers:U,summary:C})=>{t[o]||(t[o]={name:o,data:[]});const W=s.find(oe=>oe.name===o);return t[o].data.push(new Date(W==null?void 0:W.launchDate)>new Date(C)?0:(g/U).toFixed(2)),t},{})).map(t=>{const o=A[0]-1,g=A[1]-1;return t.data=t.data.slice(o,g+1),{...t,data:ce(t.data)}});Y(u),console.log("days",u),Ie(t=>({...t,xaxis:{categories:u,labels:{show:!1}}})),Ne(t=>({...t,xaxis:{categories:u,labels:{show:!1}}})),Ke(t=>({...t,xaxis:{categories:u,labels:{show:!1}}})),qe(t=>({...t,xaxis:{categories:u,labels:{show:!1}}})),Be(t=>({...t,xaxis:{categories:u,labels:{show:!1}}})),at(Dt)}},[$,Ye,s,A]);const ht=async()=>{try{const x=await ie.post("api/account/check",{email:h?F.email:ge,password:De});localStorage.setItem("reportToken","true"),Z(!1),de(!1)}catch{Z(!0)}};return e.jsxs(Gt,{children:[e.jsx(se,{children:!E&&e.jsxs(N,{item:!0,xs:12,lg:12,children:[e.jsxs(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"space-between",children:[e.jsxs(N,{item:!0,children:[e.jsxs("label",{htmlFor:"contained-button-file",children:[e.jsx(We,{accept:".xls,.xlsx",id:"contained-button-file",type:"file",onChange:ut}),e.jsx(be,{loading:L,variant:"contained",component:"span",children:"Upload Excel"})]}),e.jsx(be,{sx:{marginLeft:"10px"},loading:I,variant:"contained",component:"span",onClick:pt,children:"Download Excel"})]}),e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(w,{variant:"h5",textAlign:"right",children:"LAUNCH"}),e.jsx(B,{Link:!0,to:h?"/admin/report-type/users/launch":"/report-type/users/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:h?"/admin/report-type/totalGGR/launch":"/report-type/totalGGR/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:h?"/admin/report-type/spinsPerUser/launch":"/report-type/spinsPerUser/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:h?"/admin/report-type/totalCoins/launch":"/report-type/totalCoins/launch",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total Coins"})})]})]}),e.jsx(R,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"end",children:e.jsxs(N,{sx:{marginTop:"0px !important"},gap:2,display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(w,{variant:"h5",textAlign:"right",children:"EXCLUSIVE"}),e.jsx(B,{to:h?"/admin/report-type/users/exclusive":"/report-type/users/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Users"})}),e.jsx(B,{to:h?"/admin/report-type/totalGGR/exclusive":"/report-type/totalGGR/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total GGR"})}),e.jsx(B,{to:h?"/admin/report-type/spinsPerUser/exclusive":"/report-type/spinsPerUser/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Spins Per User"})}),e.jsx(B,{to:h?"/admin/report-type/totalCoins/exclusive":"/report-type/totalCoins/exclusive",children:e.jsx(_,{loading:L,variant:"contained",component:"span",children:"Total Coins"})})]})}),e.jsx(R,{mb:5,spacing:3,children:e.jsx(Ot,{data:$,games:s})}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"Launch Information"}),e.jsx(ne,{data:s,columns:it,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"TOTAL REVENUE"}),e.jsx(ne,{data:S,columns:ct,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"7 Day Averages"}),e.jsx(ne,{data:pe,columns:Se,setData:a})]}),e.jsxs(R,{mb:5,spacing:3,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"7 Day Change (%) "}),e.jsx(ne,{data:J,columns:Se,setData:a})]}),e.jsxs(R,{mb:5,direction:"row",spacing:3,alignItems:"end",justifyContent:"center",children:[e.jsx(w,{variant:"h2",textAlign:"right",sx:{width:"80%"},children:"Day Setting"}),e.jsx(At,{getAriaLabel:()=>"Temperature range",value:A,max:rt,min:1,onChange:lt,valueLabelDisplay:"auto",valueLabelFormat:x=>`Day ${x}`,sx:{width:"20%"}})]}),e.jsxs(R,{mb:5,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"Total GGR"}),e.jsx(ee,{options:Oe,series:S,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"USERS"}),e.jsx(ee,{options:$e,series:Ze,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"USER 5 Day Change (%)"}),e.jsx(ee,{options:Fe,series:Qe,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"SPINS PER DAY"}),e.jsx(ee,{options:Me,series:tt,type:"line",height:500})]}),e.jsxs(R,{mb:5,children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"SPINS PER PLAYER"}),e.jsx(ee,{options:_e,series:nt,type:"line",height:500})]}),e.jsxs(R,{children:[e.jsx(w,{variant:"h2",textAlign:"center",children:"14 DAY LAUNCH"}),e.jsx(ee,{options:Xe,series:Ve,type:"line",height:500})]})]})}),e.jsx(ft,{open:E,maxWidth:"xs",children:e.jsxs(jt,{sx:{p:1,py:1.5},children:[h?e.jsx(Re,{children:"Confirm Password"}):e.jsx(Re,{children:"Login"}),e.jsxs(wt,{children:[e.jsxs(R,{spacing:1,mb:2,children:[!h&&e.jsx(Ce,{name:"email",placeholder:"Email",type:"email",fullWidth:!0,variant:"outlined",value:ge,onChange:x=>we(x.target.value)}),e.jsx(Ce,{name:"password",placeholder:"Password",type:"password",fullWidth:!0,variant:"outlined",value:De,onChange:x=>z(x.target.value)})]}),ye&&h&&e.jsx(w,{variant:"h6",color:"red",children:"Password is wrong."}),ye&&!h&&e.jsx(w,{variant:"h6",color:"red",children:"Credentials is wrong."}),"          "]}),e.jsx(mt,{children:e.jsx(_,{variant:"contained",onClick:ht,children:"Confirm"})})]})})]})};export{ne as ReactTable,cs as default,le as separateByComma};
