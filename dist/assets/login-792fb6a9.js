import{P as A,R as x,am as f,j as e,cc as D,aG as L,aH as h,cO as P,ai as S,G as a,p as o,aQ as j,ao as w,aR as m,I as B,A as R,d as k,T as g,L as C}from"./index-0e1e62d2.js";import{A as F}from"./AuthWrapper-4c2402aa.js";import{u as T}from"./useScriptRef-d397215d.js";import{I as q}from"./InputAdornment-89bcc1ff.js";import{E as O}from"./EyeOutlined-e5490299.js";import{E as W}from"./EyeInvisibleOutlined-e7193013.js";const b=({isDemo:l=!1})=>{x.useState(!1);const{login:y}=f(),u=T(),[d,v]=x.useState(!1),E=()=>{v(!d)},I=s=>{s.preventDefault()};return e.jsx(e.Fragment,{children:e.jsx(D,{initialValues:{email:"",password:"",submit:null},validationSchema:L().shape({email:h().email("Must be a valid email").max(255).required("Email is required"),password:h().max(255).required("Password is required")}),onSubmit:async(s,{setErrors:r,setStatus:i,setSubmitting:t})=>{try{await y(s.email,s.password),u.current&&(i({success:!0}),t(!1),P("api/menu/dashboard",S))}catch(c){u.current&&(i({success:!1}),r({submit:c.message}),t(!1))}},children:({errors:s,handleBlur:r,handleChange:i,handleSubmit:t,isSubmitting:c,touched:n,values:p})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(o,{spacing:1,children:[e.jsx(j,{htmlFor:"email-login",children:"Email Address"}),e.jsx(w,{id:"email-login",type:"email",value:p.email,name:"email",onBlur:r,onChange:i,placeholder:"Enter email address",fullWidth:!0,error:!!(n.email&&s.email)})]}),n.email&&s.email&&e.jsx(m,{error:!0,id:"standard-weight-helper-text-email-login",children:s.email})]}),e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(o,{spacing:1,children:[e.jsx(j,{htmlFor:"password-login",children:"Password"}),e.jsx(w,{fullWidth:!0,error:!!(n.password&&s.password),id:"-password-login",type:d?"text":"password",value:p.password,name:"password",onBlur:r,onChange:i,endAdornment:e.jsx(q,{position:"end",children:e.jsx(B,{"aria-label":"toggle password visibility",onClick:E,onMouseDown:I,edge:"end",color:"secondary",children:d?e.jsx(O,{}):e.jsx(W,{})})}),placeholder:"Enter password"})]}),n.password&&s.password&&e.jsx(m,{error:!0,id:"standard-weight-helper-text-password-login",children:s.password})]}),e.jsx(a,{item:!0,xs:12,sx:{mt:-1},children:e.jsx(o,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2})}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(m,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(R,{children:e.jsx(k,{disableElevation:!0,disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Login"})})})]})})})})};b.propTypes={isDemo:A.bool};const Q=()=>{const{isLoggedIn:l}=f();return e.jsx(F,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(o,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(g,{variant:"h3",children:"Login"}),e.jsx(g,{component:C,to:l?"/auth/register":"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Don't have an account?"})]})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(b,{isDemo:l})})]})})};export{Q as default};
