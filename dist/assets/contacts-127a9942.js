import{P as u,c as T,r as s,j as e,p as r,T as S,L as I,a9 as M,I as P,b8 as F,x as E,ac as k,t as v,M as V,B as y,a6 as H,ai as L}from"./index-700092c6.js";import{u as A,g as B,a as K,b as N,c as O,d as z,S as _,f as w}from"./ScrollX-b856250f.js";import{r as $}from"./index-481cdf3e.js";import G from"./empty-3b2cdee6.js";import{D as Q,S as q,R as U,H as W,T as X}from"./Filter-579ca551.js";import"./LinearWithLabel-195fa732.js";import"./CustomerModal-c2f456d7.js";import{E as J}from"./ExpandingUserDetail-91f1ab47.js";import{T as Y,a as Z,b as ee}from"./TableContainer-aae07590.js";import{T as te}from"./TableHead-4338a7fc.js";import{T as b}from"./TableRow-1be2ba5d.js";import{T as C}from"./TableCell-65db6e50.js";import{D as oe}from"./DeleteOutlined-f0657063.js";import"./TableFooter-407160b3.js";import"./DownloadOutlined-5e85549c.js";import"./CaretUpOutlined-620d269f.js";import"./CaretDownOutlined-164c8e5c.js";import"./Pagination-20c22f4b.js";import"./index-debfc055.js";import"./Checkbox-f8f119ae.js";import"./MinusOutlined-ed74a404.js";import"./react-number-format.es-b12f89cb.js";import"./MailOutlined-c8e5dca8.js";import"./PhoneOutlined-9fa1af12.js";import"./EnvironmentOutlined-82965336.js";const ne=(d,i,p,m)=>{const l=$(d.getValue(i),p);return m(l),l.passed};function R({data:d,columns:i,modalToggler:p}){const m=T(),l=k(m.breakpoints.down("sm")),[h,g]=s.useState([{id:"id",desc:!0}]),[c,j]=s.useState({}),[x,f]=s.useState(""),t=A({data:d,columns:i,state:{sorting:h,rowSelection:c,globalFilter:x},enableRowSelection:!0,onSortingChange:g,onRowSelectionChange:j,onGlobalFilterChange:f,getRowCanExpand:()=>!0,getSortedRowModel:B(),getFilteredRowModel:K(),getCoreRowModel:N(),getPaginationRowModel:O(),getExpandedRowModel:z(),globalFilterFn:ne,debugTable:!0}),a=v(m.palette.primary.lighter,.1);let D=[];return i.map(n=>n.accessorKey&&D.push({label:typeof n.header=="string"?n.header:"#",key:n.accessorKey})),e.jsxs(V,{content:!1,children:[e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:2,...l&&{"& .MuiOutlinedInput-root, & .MuiFormControl-root":{width:"100%"}}},children:[e.jsx(Q,{value:x??"",onFilterChange:n=>f(String(n)),placeholder:`Search ${d.length} records...`}),e.jsxs(r,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",sx:{width:{xs:"100%",sm:"auto"}},children:[e.jsx(q,{getState:t.getState,getAllColumns:t.getAllColumns,setSorting:g}),e.jsx(r,{direction:"row",spacing:2,alignItems:"center"})]})]}),e.jsx(_,{children:e.jsxs(r,{children:[e.jsx(U,{selected:Object.keys(c).length}),e.jsx(Y,{children:e.jsxs(Z,{children:[e.jsx(te,{children:t.getHeaderGroups().map(n=>e.jsx(b,{children:n.headers.map(o=>(o.column.columnDef.meta!==void 0&&o.column.getCanSort()&&Object.assign(o.column.columnDef.meta,{className:o.column.columnDef.meta.className+" cursor-pointer prevent-select"}),e.jsx(C,{...o.column.columnDef.meta,onClick:o.column.getToggleSortingHandler(),...o.column.getCanSort()&&o.column.columnDef.meta===void 0&&{className:"cursor-pointer prevent-select"},children:o.isPlaceholder?null:e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(y,{children:w(o.column.columnDef.header,o.getContext())}),o.column.getCanSort()&&e.jsx(W,{column:o.column})]})},o.id)))},n.id))}),e.jsx(ee,{children:t.getRowModel().rows.map(n=>e.jsxs(s.Fragment,{children:[e.jsx(b,{children:n.getVisibleCells().map(o=>e.jsx(C,{...o.column.columnDef.meta,children:w(o.column.columnDef.cell,o.getContext())},o.id))}),n.getIsExpanded()&&e.jsx(b,{sx:{bgcolor:a,"&:hover":{bgcolor:`${a} !important`}},children:e.jsx(C,{colSpan:n.getVisibleCells().length,children:e.jsx(J,{data:n.original})})})]},n.id))})]})}),e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(y,{sx:{p:2},children:e.jsx(X,{setPageSize:t.setPageSize,setPageIndex:t.setPageIndex,getState:t.getState,getPageCount:t.getPageCount})})]})]})})]})}R.propTypes={columns:u.array,data:u.array,getHeaderProps:u.func,handleAdd:u.func,modalToggler:u.func,renderRowSubComponent:u.any};const Pe=()=>{const d=T(),[i,p]=s.useState([]),[m,l]=s.useState(!1),[h,g]=s.useState(!1),[c,j]=s.useState(""),x=()=>{g(!h)};s.useEffect(()=>{(async()=>{try{l(!0);const{data:a}=await L("/api/contact");p(a),l(!1)}catch{l(!1)}})()},[]);const f=s.useMemo(()=>[{header:"Name",accessorKey:"name",cell:({row:t,getValue:a})=>e.jsx(r,{direction:"row",spacing:1.5,alignItems:"center",children:e.jsx(S,{color:"text.secondary",children:t.original.name})})},{header:"Email",accessorKey:"location",cell:({row:t,getValue:a})=>e.jsx(r,{direction:"row",spacing:1.5,alignItems:"center",children:e.jsx(S,{color:"text.secondary",children:t.original.email})})},{header:"Query",accessorKey:"created_at",cell:({row:t,getValue:a})=>e.jsx(r,{direction:"row",alignItems:"center",spacing:0,children:e.jsx(I,{to:`/admin/enquery/${t.original._id}`,style:{textDecoration:"none"},children:e.jsx(S,{color:"blue",children:"VIEW"})})})},{header:"Actions",meta:{className:"cell-center"},disableSortBy:!0,cell:({row:t})=>e.jsx(r,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:e.jsx(M,{title:"Delete",children:e.jsx(P,{color:"error",onClick:a=>{a.stopPropagation(),x(),g(!0),j(t.original._id)},children:e.jsx(oe,{})})})})}],[d]);return m?e.jsx(G,{}):e.jsxs(e.Fragment,{children:[e.jsx(R,{data:i,columns:f,modalToggler:()=>{}}),e.jsx(F,{id:c,title:c,open:h,handleClose:x,deletehandler:async()=>{try{await E.delete(`/api/contact/${c}`),p(i.filter(t=>t._id!==c)),g(!1),j("")}catch{}}})]})};export{Pe as default,ne as fuzzyFilter};
