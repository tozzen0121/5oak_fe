import{r as v,$ as X,a0 as Q,al as _,aG as J,aH as Z,aI as Y,P as S,aJ as ee,j as e,an as re,aa as te,B as M,p as u,T as V,a9 as E,I as z,Z as ie,a6 as se,aL as ne,aM as le,G as o,aQ as m,D as T,a$ as ae,g as oe,ad as H,o as de,F as O,q as P,_ as ce,Q as A,aR as q,A as he,d as U,H as $,c as L,e as ue,as as pe,aE as xe,h as k,R as Ae,av as We,ar as Re,aw as He,M as Be}from"./index-753a7d60.js";import{u as W,a as Ve,P as me,A as Ee,h as $e,d as Fe,b as qe,C as ke,c as Ue,e as je,E as Le,f as Ge,D as Ke,I as Ne,g as Xe,i as Qe}from"./ItemDetails-2301d5ad.js";import{M as ge}from"./MultiFile-72e2dc75.js";import{D as fe}from"./DesktopDatePicker-5d78a3e5.js";import{T as B}from"./TableRow-b60b9c81.js";import{T as d}from"./TableCell-79ad539b.js";import{M as we}from"./MoreOutlined-a9982ec4.js";import{T as ye,a as ve,b as Se}from"./TableContainer-06e18050.js";import{T as _e}from"./TableHead-d2f9d13c.js";import{P as Je}from"./PlusOutlined-21052538.js";import"./redux-e3e4bf3c.js";import"./tiny-invariant-dd7d57d2.js";import"./VideoCameraAddOutlined-7fc40bb3.js";import"./AppstoreOutlined-66199e6f.js";import"./PlaceholderContent-6275c2ea.js";import"./CloseCircleFilled-b6f38755.js";import"./dateViewRenderers-72727c47.js";import"./InputAdornment-77c4706c.js";var Ze={icon:function(i,a){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:i}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm136-352c0-4.4 3.6-8 8-8h152V328c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v152h152c4.4 0 8 3.6 8 8v48c0 4.4-3.6 8-8 8H544v152c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V544H328c-4.4 0-8-3.6-8-8v-48z",fill:a}},{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z",fill:i}}]}},name:"plus-square",theme:"twotone"};const Ye=Ze;var er=function(i,a){return v.createElement(X,Q({},i,{ref:a,icon:Ye}))};const rr=v.forwardRef(er);var tr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"};const ir=tr;var sr=function(i,a){return v.createElement(X,Q({},i,{ref:a,icon:ir}))};const nr=v.forwardRef(sr),lr=new _.Chance,ar=J({title:Z().required("User story title is required"),dueDate:Y().required("Due date is required").nullable()}),De=({open:n,handleDrawerOpen:i})=>{const{backlogs:a}=W(),t=ee({initialValues:{id:"",title:"",assign:null,columnId:"",priority:"low",dueDate:null,acceptance:"",description:"",commentIds:"",image:!1,itemIds:[],files:[]},enableReinitialize:!0,validationSchema:ar,onSubmit:(r,{resetForm:s})=>{r.id=`${lr.integer({min:1e3,max:9999})}`,Ve(r),$({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),i(),s()}});return e.jsx(re,{sx:{ml:n?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:n,ModalProps:{keepMounted:!0},onClose:i,children:n&&e.jsxs(te,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(M,{sx:{p:3},children:e.jsxs(u,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(V,{variant:"h4",children:"Add Story"}),e.jsx(E,{title:"Close",children:e.jsx(z,{color:"secondary",onClick:i,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(ie,{})})})]})}),e.jsx(se,{}),e.jsx(M,{sx:{p:3},children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(ne,{dateAdapter:le,children:e.jsxs(o,{container:!0,spacing:2.5,children:[e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Title"}),e.jsx(T,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:t.values.title,onChange:t.handleChange,error:t.touched.title&&!!t.errors.title,helperText:t.touched.title&&t.errors.title})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Assign to"}),e.jsx(ae,{id:"assign",value:(a==null?void 0:a.profiles.find(r=>r.id===t.values.assign))||null,onChange:(r,s)=>{t.setFieldValue("assign",s==null?void 0:s.id)},options:a==null?void 0:a.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:r=>r.name,isOptionEqualToValue:r=>r.id===t.values.assign,renderOption:(r,s)=>e.jsxs(M,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...r,children:[e.jsx("img",{loading:"lazy",width:"20",src:oe(`${s.avatar}`),alt:""}),s.name]}),renderInput:r=>e.jsx(T,{...r,placeholder:"Choose a assignee",inputProps:{...r.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Prioritize"}),e.jsx(H,{children:e.jsxs(de,{row:!0,"aria-label":"color",value:t.values.priority,onChange:t.handleChange,name:"priority",id:"priority",children:[e.jsx(O,{value:"low",control:e.jsx(P,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(O,{value:"medium",control:e.jsx(P,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(O,{value:"high",control:e.jsx(P,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Due date"}),e.jsx(fe,{value:t.values.dueDate,format:"dd/MM/yyyy",onChange:r=>{t.setFieldValue("dueDate",r)}})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Acceptance"}),e.jsx(T,{fullWidth:!0,id:"acceptance",name:"acceptance",multiline:!0,rows:3,value:t.values.acceptance,onChange:t.handleChange,error:t.touched.acceptance&&!!t.errors.acceptance,helperText:t.touched.acceptance&&t.errors.acceptance})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Description"}),e.jsx(T,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:t.values.description,onChange:t.handleChange,error:t.touched.description&&!!t.errors.description,helperText:t.touched.description&&t.errors.description})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"State"}),e.jsx(H,{fullWidth:!0,sx:{m:1},children:e.jsx(ce,{id:"columnId",name:"columnId",displayEmpty:!0,value:t.values.columnId,onChange:t.handleChange,inputProps:{"aria-label":"Without label"},children:a==null?void 0:a.columns.map((r,s)=>e.jsx(A,{value:r.id,children:r.title},s))})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(o,{container:!0,spacing:1,children:[e.jsx(o,{item:!0,xs:12,children:e.jsx(m,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(ge,{type:"STANDARD",showList:!0,setFieldValue:t.setFieldValue,files:t.values.files,error:t.touched.files&&!!t.errors.files})}),t.touched.files&&t.errors.files&&e.jsx(o,{item:!0,xs:12,children:e.jsx(q,{error:!0,id:"standard-weight-helper-text-password-login",children:t.errors.files})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(he,{children:e.jsx(U,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})};De.propTypes={open:S.bool,handleDrawerOpen:S.func};const or=(n,i)=>{const a=i.palette.mode===k.DARK?i.palette.background.paper+90:i.palette.primary.lighter+99;return{backgroundColor:n?a:"transparent",userSelect:"none"}},be=({itemId:n,index:i})=>{const a=L(),{backlogs:t}=W(),r=t==null?void 0:t.items.filter(l=>l.id===n)[0],s=t==null?void 0:t.columns.filter(l=>l.itemIds.filter(f=>f===r.id)[0])[0],h=t==null?void 0:t.profiles.filter(l=>l.id===r.assign)[0],p=()=>{$e(n)},[w,j]=v.useState(null),x=l=>{j(l==null?void 0:l.currentTarget)},g=()=>{j(null)},[b,y]=v.useState(!1),C=l=>{y(!1),l&&(Fe(r.id),$({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsx(me,{draggableId:r.id,index:i,children:(l,f)=>e.jsxs(B,{hover:!0,...l.draggableProps,...l.dragHandleProps,ref:l.innerRef,sx:{"& th,& td":{whiteSpace:"nowrap"},"& .more-button":{opacity:0},":hover":{"& .more-button":{opacity:1}},...!!w&&{"& .more-button":{opacity:1}},...or(f.isDragging,a)},children:[e.jsx(d,{sx:{pl:3,minWidth:120,width:120,height:46}}),e.jsx(d,{sx:{width:110,minWidth:110},children:e.jsxs(u,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(nr,{style:{color:a.palette.info.main,marginTop:-2}}),e.jsx(V,{variant:"subtitle2",children:r.id})]})}),e.jsx(d,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(ue,{underline:"hover",color:"default",onClick:p,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"info.main"},cursor:"pointer"},children:r.title})}),e.jsxs(d,{sx:{width:60,minWidth:60},children:[e.jsx(z,{className:"more-button",size:"small",onClick:x,"aria-controls":"menu-comment","aria-haspopup":"true",color:"secondary",children:e.jsx(we,{style:{color:a.palette.text.primary}})}),e.jsxs(pe,{id:"menu-comment",anchorEl:w,keepMounted:!0,open:!!w,onClose:g,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(A,{onClick:()=>{g(),p()},children:"Edit"}),e.jsx(A,{onClick:()=>{g(),y(!0)},children:"Delete"})]}),e.jsx(Ee,{title:r.title,open:b,handleClose:C})]}),e.jsx(d,{sx:{width:90,minWidth:90},children:s?s.title:"New"}),e.jsx(d,{sx:{width:140,minWidth:140},children:h?h.name:""}),e.jsx(d,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:r.priority}),e.jsx(d,{sx:{width:120,minWidth:120},children:r.dueDate?xe(new Date(r.dueDate),"d MMM yyyy"):""})]},r.id)})};be.propTypes={itemId:S.string,index:S.number};const dr=new _.Chance,cr=J({title:Z().required("Task title is required"),dueDate:Y().required("Due date is required").nullable()}),Ce=({open:n,handleDrawerOpen:i,storyId:a})=>{const{backlogs:t}=W(),r=ee({initialValues:{id:"",title:"",assign:null,priority:"low",dueDate:null,description:"",commentIds:"",image:!1,storyId:"",columnId:t==null?void 0:t.columns[0].id,files:[]},enableReinitialize:!0,validationSchema:cr,onSubmit:(s,{resetForm:h})=>{const p={id:s.id||`${dr.integer({min:1e3,max:9999})}`,title:s.title,assign:s.assign,priority:s.priority,dueDate:s.dueDate?new Date(s.dueDate):new Date,description:s.description,commentIds:s.commentIds,image:s.image};qe(s.columnId,p,a),$({open:!0,message:"Submit Success",variant:"alert",alert:{color:"success"}}),i(),h()}});return e.jsx(re,{sx:{ml:n?3:0,flexShrink:0,zIndex:1200,overflowX:"hidden",width:{xs:320,md:450},"& .MuiDrawer-paper":{width:{xs:320,md:450},border:"none",borderRadius:"0px"}},variant:"temporary",anchor:"right",open:n,ModalProps:{keepMounted:!0},onClose:i,children:n&&e.jsxs(te,{sx:{overflowX:"hidden",height:"100vh"},children:[e.jsx(M,{sx:{p:3},children:e.jsxs(u,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(V,{variant:"h4",children:"Add Task"}),e.jsx(E,{title:"Close",children:e.jsx(z,{color:"secondary",onClick:i,size:"small",sx:{fontSize:"0.875rem"},children:e.jsx(ie,{})})})]})}),e.jsx(se,{}),e.jsx(M,{sx:{p:3},children:e.jsx("form",{onSubmit:r.handleSubmit,children:e.jsx(ne,{dateAdapter:le,children:e.jsxs(o,{container:!0,spacing:2.5,children:[e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Title"}),e.jsx(T,{fullWidth:!0,id:"title",name:"title",placeholder:"Title",value:r.values.title,onChange:r.handleChange,error:r.touched.title&&!!r.errors.title,helperText:r.touched.title&&r.errors.title})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Assign to"}),e.jsx(ae,{id:"assign",value:(t==null?void 0:t.profiles.find(s=>s.id===r.values.assign))||null,onChange:(s,h)=>{r.setFieldValue("assign",h==null?void 0:h.id)},options:t==null?void 0:t.profiles,fullWidth:!0,autoHighlight:!0,getOptionLabel:s=>s.name,isOptionEqualToValue:s=>s.id===r.values.assign,renderOption:(s,h)=>e.jsxs(M,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...s,children:[e.jsx("img",{loading:"lazy",width:"20",src:oe(`${h.avatar}`),alt:""}),h.name]}),renderInput:s=>e.jsx(T,{...s,placeholder:"Choose a assignee",inputProps:{...s.inputProps,autoComplete:"new-password"}})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Prioritize"}),e.jsx(H,{children:e.jsxs(de,{row:!0,"aria-label":"color",value:r.values.priority,onChange:r.handleChange,name:"priority",id:"priority",children:[e.jsx(O,{value:"low",control:e.jsx(P,{color:"primary",sx:{color:"primary.main"}}),label:"Low"}),e.jsx(O,{value:"medium",control:e.jsx(P,{color:"warning",sx:{color:"warning.main"}}),label:"Medium"}),e.jsx(O,{value:"high",control:e.jsx(P,{color:"error",sx:{color:"error.main"}}),label:"High"})]})})]})}),e.jsxs(o,{item:!0,xs:12,children:[e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Due date"}),e.jsx(fe,{value:r.values.dueDate,format:"dd/MM/yyyy",onChange:s=>{r.setFieldValue("dueDate",s)}})]}),r.touched.dueDate&&r.errors.dueDate&&e.jsx(q,{error:!0,children:r.errors.dueDate})]}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"Description"}),e.jsx(T,{fullWidth:!0,id:"description",name:"description",multiline:!0,rows:3,value:r.values.description,onChange:r.handleChange,error:r.touched.description&&!!r.errors.description,helperText:r.touched.description&&r.errors.description})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(u,{spacing:1,children:[e.jsx(m,{children:"State"}),e.jsx(H,{fullWidth:!0,sx:{m:1},children:e.jsx(ce,{id:"columnId",name:"columnId",displayEmpty:!0,value:r.values.columnId,onChange:r.handleChange,inputProps:{"aria-label":"Without label"},children:t==null?void 0:t.columns.map((s,h)=>e.jsx(A,{value:s.id,children:s.title},h))})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsxs(o,{container:!0,spacing:1,children:[e.jsx(o,{item:!0,xs:12,children:e.jsx(m,{sx:{mt:.5},children:"Attachments:"})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(ge,{type:"STANDARD",showList:!0,setFieldValue:r.setFieldValue,files:r.values.files,error:r.touched.files&&!!r.errors.files})}),r.touched.files&&r.errors.files&&e.jsx(o,{item:!0,xs:12,children:e.jsx(q,{error:!0,id:"standard-weight-helper-text-password-login",children:r.errors.files})})]})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(he,{children:e.jsx(U,{fullWidth:!0,variant:"contained",type:"submit",children:"Save"})})})]})})})})]})})};Ce.propTypes={open:S.bool,handleDrawerOpen:S.func,storyId:S.string};const hr=(n,i,a)=>{let t="transparent";return a&&(t=i.palette.mode===k.DARK?i.palette.background.default:i.palette.secondary.lighter),n&&(t=i.palette.mode===k.DARK?i.palette.background.default:i.palette.primary.lighter),{backgroundColor:t,userSelect:"none"}},ur=()=>({background:"transparent"}),Ie=({story:n,index:i})=>{const a=L(),{backlogs:t}=W(),[r,s]=Ae.useState(i===0),h=t==null?void 0:t.columns.filter(c=>c.id===n.columnId)[0],p=t==null?void 0:t.profiles.filter(c=>c.id===n.assign)[0],[w,j]=v.useState(!1),x=()=>{j(c=>!c)},g=()=>{j(c=>!c)},[b,y]=v.useState(!1),C=()=>{y(c=>!c)},l=()=>{y(c=>!c)},[f,D]=v.useState(null),R=c=>{D(c==null?void 0:c.currentTarget)},I=()=>{D(null)},[Te,G]=v.useState(!1),Me=c=>{G(!1),c&&(Ge(n.id),$({open:!0,message:"Task Deleted successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"}}))};return e.jsxs(e.Fragment,{children:[e.jsx(me,{draggableId:n.id,index:i,children:(c,ze)=>e.jsxs(e.Fragment,{children:[e.jsxs(B,{hover:!0,...c.draggableProps,...c.dragHandleProps,ref:c.innerRef,sx:{...hr(ze.isDragging,a,r),...!r&&{"& .MuiTableCell-root":{border:"none"}}},children:[e.jsx(d,{sx:{pl:3,minWidth:120,width:120,height:46},children:e.jsxs(u,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(E,{title:"Add Task",children:e.jsx(z,{"aria-label":"expand row",onClick:g,size:"small",sx:{fontSize:"1.15rem"},children:e.jsx(rr,{color:a.palette.primary.main})})}),e.jsx(z,{"aria-label":"expand row",size:"small",onClick:()=>s(!r),color:"secondary",children:r?e.jsx(We,{}):e.jsx(Re,{})})]})}),e.jsx(d,{sx:{width:110,minWidth:110},children:e.jsxs(u,{direction:"row",spacing:.75,alignItems:"center",children:[e.jsx(ke,{style:{color:a.palette.primary.main,marginTop:-2}}),e.jsx(V,{variant:"subtitle2",children:n.id})]})}),e.jsx(d,{sx:{maxWidth:"calc(100vw - 850px)",minWidth:140},component:"th",scope:"row",children:e.jsx(ue,{underline:"hover",color:"default",onClick:l,sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:n.title})}),e.jsxs(d,{sx:{width:60,minWidth:60},children:[e.jsx(z,{size:"small","aria-controls":"menu-comment",onClick:R,"aria-haspopup":"true",color:"secondary",children:e.jsx(we,{style:{color:a.palette.text.primary}})}),e.jsxs(pe,{id:"menu-comment",anchorEl:f,keepMounted:!0,open:!!f,onClose:I,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(A,{onClick:()=>{I(),l()},children:"Edit"}),e.jsx(A,{onClick:()=>{I(),G(!0)},children:"Delete"})]}),e.jsx(Ue,{title:n.title,open:Te,handleClose:Me})]}),e.jsx(d,{sx:{width:90,minWidth:90},children:h?h.title:""}),e.jsx(d,{sx:{width:140,minWidth:140},children:p?p.name:""}),e.jsx(d,{sx:{width:85,minWidth:85,textTransform:"capitalize"},children:n.priority}),e.jsx(d,{sx:{width:120,minWidth:120},children:n.dueDate?xe(new Date(n.dueDate),"d MMM yyyy"):""})]}),e.jsx(je,{droppableId:n.id,type:"item",children:(F,Oe)=>{var K;return e.jsx(B,{ref:F.innerRef,...F.droppableProps,sx:ur(Oe.isDraggingOver),children:e.jsx(d,{style:{padding:0},colSpan:8,children:e.jsx(He,{in:r,timeout:"auto",unmountOnExit:!0,children:r&&e.jsx(M,{sx:{margin:0},children:e.jsx(ye,{children:e.jsx(ve,{size:"small","aria-label":"purchases",children:e.jsxs(Se,{children:[(K=n.itemIds)==null?void 0:K.map((N,Pe)=>e.jsx(be,{itemId:N,index:Pe},N)),F.placeholder]})})})})})})})}})]})}),e.jsx(Le,{story:n,open:b,handleDrawerOpen:C}),e.jsx(Ce,{open:w,handleDrawerOpen:x,storyId:n.id})]})};Ie.propTypes={story:S.object,index:S.number};const pr=(n,i)=>({background:n?i.palette.secondary.lighter+65:"transparent"}),Ar=()=>{const n=L(),{backlogs:i}=W(),a=p=>{let w;const{source:j,destination:x,draggableId:g,type:b}=p;if(!x||x.droppableId===j.droppableId&&x.index===j.index)return;if(b==="user-story"){const l=Array.from(i==null?void 0:i.userStoryOrder);l.splice(j.index,1),l.splice(x==null?void 0:x.index,0,g),Xe(l);return}const y=i==null?void 0:i.userStory.filter(l=>l.id===j.droppableId)[0],C=i==null?void 0:i.userStory.filter(l=>l.id===x.droppableId)[0];if(y===C){const l=Array.from(y.itemIds);l.splice(j.index,1),l.splice(x.index,0,g);const f={...y,itemIds:l};w=i==null?void 0:i.userStory.map(D=>D.id===f.id?f:D)}else{const l=Array.from(y.itemIds);l.splice(j.index,1);const f={...y,itemIds:l},D=Array.from(C.itemIds);D.splice(x.index,0,g);const R={...C,itemIds:D};w=i==null?void 0:i.userStory.map(I=>I.id===f.id?f:I.id===R.id?R:I)}Qe(w)},[t,r]=v.useState(!1),s=()=>{r(p=>!p)},h=()=>{r(p=>!p)};return e.jsx(Be,{content:!1,children:e.jsxs(ye,{sx:{"& .MuiTableCell-root":{p:1.25}},children:[e.jsx(Ke,{onDragEnd:a,children:e.jsx(je,{droppableId:"user-story",type:"user-story",children:(p,w)=>e.jsxs(ve,{size:"small","aria-label":"collapsible table",...p.droppableProps,ref:p.innerRef,sx:pr(w.isDraggingOver,n),children:[e.jsx(_e,{sx:{bgcolor:n.palette.background.paper,borderTop:"none",borderBottomWidth:"1px","& th,& td":{whiteSpace:"nowrap"}},children:e.jsxs(B,{children:[e.jsx(d,{sx:{pl:3},children:e.jsx(E,{title:"Add User Story",children:e.jsx(U,{variant:"dashed",size:"extraSmall",color:"secondary",onClick:h,endIcon:e.jsx(Je,{}),children:"ADD"})})}),e.jsx(d,{children:"Id"}),e.jsx(d,{children:"Title"}),e.jsx(d,{}),e.jsx(d,{children:"State"}),e.jsx(d,{children:"Assigned To"}),e.jsx(d,{children:"Priority"}),e.jsx(d,{children:"Due Date"})]})}),e.jsxs(Se,{sx:{"& th,& td":{whiteSpace:"nowrap"},"& .MuiTableRow-root:last-of-type .MuiTable-root .MuiTableCell-root":{borderBottom:`1px solid ${n.palette.divider}`},"& .MuiTableRow-root:hover":{bgcolor:"transparent"}},children:[i==null?void 0:i.userStoryOrder.map((j,x)=>{const g=i==null?void 0:i.userStory.filter(b=>b.id===j)[0];return e.jsx(Ie,{story:g,index:x},g.id)}),p.placeholder]})]})})}),e.jsx(De,{open:t,handleDrawerOpen:s}),e.jsx(Ne,{})]})})};export{Ar as default};
