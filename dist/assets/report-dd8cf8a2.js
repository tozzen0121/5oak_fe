import{r as o,P as ie,a3 as Kt,j as e,M as he,aV as wt,am as Mt,G as ne,p as j,T as m,L as se,d as te,aB as qt,B as _t,aO as pt,aP as zt,D as ht,aS as Ht,a9 as gt,I as ft,Z as Yt,x as Me,H as He}from"./index-ae0c6fa9.js";import{C as Qt}from"./ComponentSkeleton-1098d9e2.js";import{L as yt}from"./LoadingButton-25593310.js";import{_ as ve}from"./react-apexcharts.min-eed4320e.js";import{u as Vt,S as Xt,f as mt,b as Zt}from"./ScrollX-bdc6078a.js";import"./Filter-5ef23403.js";import{E as Jt,R as es}from"./RowEditable-29439f7e.js";import"./LinearWithLabel-008bb407.js";import{T as ts,a as ss,b as ns}from"./TableContainer-a726524c.js";import{T as as}from"./TableHead-01f8d5cc.js";import{T as Dt}from"./TableRow-a825f52e.js";import{T as jt}from"./TableCell-fee530ec.js";import{S as rs}from"./Slider-be46e104.js";import{S as is}from"./SendOutlined-be146b2f.js";import"./Skeleton-a718bcfe.js";import"./DownloadOutlined-16291ccd.js";import"./CaretUpOutlined-57fef02b.js";import"./CaretDownOutlined-4c826e06.js";import"./Pagination-c81e691c.js";import"./index-032ef1ff.js";import"./Checkbox-97c9b269.js";import"./MinusOutlined-d52cc2d8.js";import"./visuallyHidden-14c3de6e.js";function os(g,x,h,ee){var O=this,b=o.useRef(null),X=o.useRef(0),I=o.useRef(0),F=o.useRef(null),D=o.useRef([]),C=o.useRef(),z=o.useRef(),w=o.useRef(g),H=o.useRef(!0);w.current=g;var oe=typeof window<"u",le=!x&&x!==0&&oe;if(typeof g!="function")throw new TypeError("Expected a function");x=+x||0;var ge=!!(h=h||{}).leading,Ae=!("trailing"in h)||!!h.trailing,de="maxWait"in h,l="debounceOnServer"in h&&!!h.debounceOnServer,d=de?Math.max(+h.maxWait||0,x):null;o.useEffect(function(){return H.current=!0,function(){H.current=!1}},[]);var S=o.useMemo(function(){var E=function(Y){var V=D.current,r=C.current;return D.current=C.current=null,X.current=Y,I.current=I.current||Y,z.current=w.current.apply(r,V)},L=function(Y,V){le&&cancelAnimationFrame(F.current),F.current=le?requestAnimationFrame(Y):setTimeout(Y,V)},Ge=function(Y){if(!H.current)return!1;var V=Y-b.current;return!b.current||V>=x||V<0||de&&Y-X.current>=d},Re=function(Y){return F.current=null,Ae&&D.current?E(Y):(D.current=C.current=null,z.current)},fe=function Y(){var V=Date.now();if(ge&&I.current===X.current&&Ue(),Ge(V))return Re(V);if(H.current){var r=x-(V-b.current),a=de?Math.min(r,d-(V-X.current)):r;L(Y,a)}},Ue=function(){ee&&ee({})},ce=function(){if(oe||l){var Y=Date.now(),V=Ge(Y);if(D.current=[].slice.call(arguments),C.current=O,b.current=Y,V){if(!F.current&&H.current)return X.current=b.current,L(fe,x),ge?E(b.current):z.current;if(de)return L(fe,x),E(b.current)}return F.current||L(fe,x),z.current}};return ce.cancel=function(){F.current&&(le?cancelAnimationFrame(F.current):clearTimeout(F.current)),X.current=0,D.current=b.current=C.current=F.current=null},ce.isPending=function(){return!!F.current},ce.flush=function(){return F.current?Re(Date.now()):z.current},ce},[ge,de,x,d,Ae,le,oe,l,ee]);return S}const St=({row:g,table:x})=>{var b;const h=(b=x==null?void 0:x.options)==null?void 0:b.meta,ee=X=>{h==null||h.setSelectedRow(I=>({...I,[g.id]:!I[g.id]})),h==null||h.revertData(g.index,(X==null?void 0:X.currentTarget.name)==="cancel")},O=()=>{h==null||h.saveData(g.index)};return e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",children:[(h==null?void 0:h.selectedRow[g.id])&&e.jsx(gt,{title:"Cancel",children:e.jsx(ft,{color:"error",name:"cancel",onClick:ee,children:e.jsx(Yt,{})})}),e.jsx(gt,{title:h!=null&&h.selectedRow[g.id]?"Save":"Edit",children:e.jsx(ft,{color:h!=null&&h.selectedRow[g.id]?"success":"primary",onClick:h!=null&&h.selectedRow[g.id]?O:ee,children:h!=null&&h.selectedRow[g.id]?e.jsx(is,{}):e.jsx(Jt,{})})})]})};St.propTypes={row:ie.object,table:ie.object,options:ie.array,id:ie.number,index:ie.number};ie.node,ie.number,ie.number;const bt=Kt("input")({display:"none"});bt.displayName="Input";const Se=g=>{let x=0,h=g.length-1;for(;x<g.length&&Number(g[x])===0;)x++;for(;h>=0&&Number(g[h])===0;)h--;return g.slice(x,h+1)},vt=(g,x,h)=>g.map(O=>{const b=Se(O.data);return{...O,data:b.slice(0,14)}}),Ke=({getValue:g})=>{const x=g();return`${Number((x||0).toFixed(2)).toLocaleString()}`};function be({columns:g,data:x,setData:h}){const[ee,O]=o.useState(()=>[...x]),[b,X]=o.useState({}),I=Vt({data:x,columns:g,defaultColumn:{cell:es},getCoreRowModel:Zt(),meta:{selectedRow:b,setSelectedRow:X,revertData:(D,C)=>{C?h(z=>z.map((w,H)=>H===D?ee[D]:w)):O(z=>z.map((w,H)=>H===D?x[D]:w))},updateData:(D,C,z)=>{h(w=>w.map((H,oe)=>oe===D?{...w[D],[C]:z}:H))},saveData:async D=>{try{const C=x[D],z=await Me.put(`/api/launchGames/${C._id}`,C);He({open:!0,message:"Saved successfully!",variant:"alert",alert:{color:"success"}}),X(w=>({...w,[D]:!1}))}catch{He({open:!0,message:"Error!",variant:"alert",alert:{color:"error"}})}}},debugTable:!0});let F=[];return I.getAllColumns().map(D=>D.columnDef.accessorKey&&F.push({label:typeof D.columnDef.header=="string"?D.columnDef.header:"#",key:D.columnDef.accessorKey})),e.jsx(he,{content:!1,children:e.jsx(Xt,{children:e.jsx(ts,{children:e.jsxs(ss,{children:[e.jsx(as,{children:I.getHeaderGroups().map(D=>e.jsx(Dt,{children:D.headers.map(C=>e.jsx(jt,{...C.column.columnDef.meta,children:C.isPlaceholder?null:mt(C.column.columnDef.header,C.getContext())},C.id))},D.id))}),e.jsx(ns,{children:I.getRowModel().rows.map(D=>e.jsx(Dt,{children:D.getVisibleCells().map(C=>e.jsx(jt,{...C.column.columnDef.meta,children:mt(C.column.columnDef.cell,C.getContext())},C.id))},D.id))})]})})})})}be.propTypes={columns:ie.array,data:ie.array,setData:ie.func};function ls({data:g,games:x}){const h=wt(),[ee,O]=o.useState(h.pathname==="/admin/report"),[b,X]=o.useState([]),[I,F]=o.useState([]),[D,C]=o.useState([]),[z,w]=o.useState({value:0,date:""}),[H,oe]=o.useState([]);o.useEffect(()=>{const l=r=>{const a=r.getUTCMonth();return Math.floor(a/3)+1},d=r=>{const P=r.map(K=>new Date(K.summary)).sort((K,re)=>K-re),ae=P[0],Ce=P[P.length-1],xe=ae.getFullYear(),ye=l(ae),Ie=Ce.getFullYear(),Fe=l(Ce),me=[];for(let K=xe;K<=Ie;K++)for(let re=1;re<=4;re++)if(!(K===xe&&re<ye)){if(K===Ie&&re>Fe)break;me.push(`${K}-Q${re}`)}return me},S=[...new Set(g.map(r=>r.summary.split("-")[0]))];if(F(S),g&&g.length>0){const r=d(g);C(r)}const E=Object.values(g.reduce((r,{game:a,summary:P,betsEuro:ae,winsEuro:Ce,ggrEuro:xe,avgBet:ye,spins:Ie,uniquePlayers:Fe})=>{r[a]||(r[a]={_id:"",name:a,maxDate:P,years:{},totalGGR:0,latestWeekStart:"",secLatestWeekStart:"",latestWeekGGR:[],secLatestWeekGGR:[],latestWeekAvgBet:[],secLatestWeekAvgBet:[],remainDays:0,weekAverage:0,weekAvgBet:0,weekChange:0,weekSum1:0,weekSum2:0,weekChangeColor:"",dailyTotalGGR:0,projectedTotalGGR:0,LifeTimePayout:0,betsEuro:0,winsEuro:0,dailyAvgBet:0,totalAvgBet:0,avgBetCount:0}),r[a].betsEuro+=ae,r[a].winsEuro+=Ce;const me=x.find(Le=>Le.name===a);r[a].launchDate=me.launchDate,r[a]._id=me._id,r[a].totalGGR+=xe,ye&&ye>0&&(r[a].totalAvgBet+=ye,r[a].avgBetCount+=1,r[a].dailyAvgBet=r[a].totalAvgBet/r[a].avgBetCount);const K=P.split("-")[0];r[a].years[K]||(r[a].years[K]=0),r[a].years[K]+=xe,r[a][`totalGGR_${K}`]||(r[a][`totalGGR_${K}`]=0),r[a][`totalGGR_${K}`]+=xe;const re=l(new Date(P)),We=`${K}-Q${re}`;if(r[a][`totalGGR_${We}`]||(r[a][`totalGGR_${We}`]=0),r[a][`totalGGR_${We}`]+=xe,new Date(me.launchDate)<=new Date(P)){const Le=new Date(r[a].maxDate)<new Date(P);r[a].maxDate=Le?P:r[a].maxDate,r[a].dailyTotalGGR=Le?xe:r[a].dailyTotalGGR;const ke=new Date(r[a].maxDate),Ye=new Date(ke.getFullYear(),11,31);r[a].remainDays=Math.ceil((Ye-ke)/(1e3*60*60*24));const qe=ke.getFullYear().toString(),Qe=r[a][`totalGGR_${qe}`]||0,_e=r[a].weekAverage*r[a].remainDays;r[a].projectedTotalGGR=Qe+_e;const Ne=new Date(r[a].maxDate),De=new Date(Ne);De.setDate(De.getDate()-6);const Pe=new Date(De);Pe.setDate(Pe.getDate()-7);const Te=new Date(De);Te.setDate(Te.getDate()-1),r[a].latestWeekStart=De.toISOString().split("T")[0],r[a].secLatestWeekStart=Pe.toISOString().split("T")[0],r[a].latestWeekGGR=g.filter(y=>y.game===a&&new Date(y.summary)>=De&&new Date(y.summary)<=Ne).map(y=>y.ggrEuro),r[a].secLatestWeekGGR=g.filter(y=>y.game===a&&new Date(y.summary)>=Pe&&new Date(y.summary)<=Te).map(y=>y.ggrEuro),r[a].latestWeekAvgBet=g.filter(y=>y.game===a&&new Date(y.summary)>=De&&new Date(y.summary)<=Ne).map(y=>y.avgBet||0),r[a].secLatestWeekAvgBet=g.filter(y=>y.game===a&&new Date(y.summary)>=Pe&&new Date(y.summary)<=Te).map(y=>y.avgBet||0),r[a].weekSum1=r[a].latestWeekGGR.reduce((y,J)=>y+J,0),r[a].weekSum2=r[a].secLatestWeekGGR.reduce((y,J)=>y+J,0),r[a].weekAverage=r[a].latestWeekGGR.reduce((y,J)=>y+J,0)/r[a].latestWeekGGR.length;const Be=r[a].latestWeekAvgBet.filter(y=>y>0);r[a].weekAvgBet=Be.length>0?Be.reduce((y,J)=>y+J,0)/Be.length:0,r[a].weekChange=(r[a].latestWeekGGR.reduce((y,J)=>y+J,0)-r[a].secLatestWeekGGR.reduce((y,J)=>y+J,0))/r[a].secLatestWeekGGR.reduce((y,J)=>y+J,0)*100,r[a].weekChangeColor=e.jsx("span",{style:{color:r[a].weekChange>0?"green":"red"},children:`${Number(r[a].weekChange.toFixed(2)).toLocaleString()} %`}),r[a].LifeTimePayout=r[a].betsEuro>0?(r[a].winsEuro/r[a].betsEuro*100).toFixed(2):0}return r},{}));X(E);const L=g.reduce((r,{summary:a,ggrEuro:P})=>(r[a]||(r[a]=0),r[a]+=P,r),{}),Ge=Math.max(...Object.values(L)),Re=Object.keys(L).find(r=>L[r]===Ge);w({value:Ge,date:Re});const fe=g.length>0?g.reduce((r,a)=>new Date(a.summary)>new Date(r)?a.summary:r,g[0].summary):new Date().toISOString().split("T")[0],Ue=fe.split("T")[0],ce=new Date(fe);ce.setDate(ce.getDate()-1);const Y=ce.toISOString().split("T")[0],V=x.map(r=>{const a=g.find(ae=>ae.game===r.name&&ae.summary.split("T")[0]===Ue),P=g.find(ae=>ae.game===r.name&&ae.summary.split("T")[0]===Y);return{gameName:r.name,totalUsersToday:(a==null?void 0:a.uniquePlayers)||0,totalUsersPrevious:(P==null?void 0:P.uniquePlayers)||0,cwppToday:a?a.betsEuro/a.uniquePlayers:0,cwppPrevious:P?P.betsEuro/P.uniquePlayers:0,spuToday:a?a.spins/a.uniquePlayers:0,spuPrevious:P?P.spins/P.uniquePlayers:0,aveBetToday:(a==null?void 0:a.avgBet)||0,aveBetPrevious:(P==null?void 0:P.avgBet)||0,totalCoinsToday:(a==null?void 0:a.betsEuro)||0,totalCoinsPrevious:(P==null?void 0:P.betsEuro)||0}});oe(V)},[g,x]);const le=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text",cell:({getValue:l,row:d})=>{const S=l();return e.jsx(se,{style:{textDecoration:"none"},to:ee?`/admin/report-one/${d.original._id}`:`/report-one/${d.original._id}`,children:S})}},{header:"Launch Date",accessorKey:"launchDate",dataType:"text",cell:({getValue:l,row:d,table:S})=>{var L;const E=l();return`${(L=E==null?void 0:E.split("T"))==null?void 0:L[0]}`}},{header:"Daily Total GGR",accessorKey:"dailyTotalGGR",dataType:"text",cell:Ke},{header:"Projected Total GGR",accessorKey:"projectedTotalGGR",dataType:"text",cell:Ke},...(I==null?void 0:I.map(l=>({header:`Total GGR ${l}`,accessorKey:`totalGGR_${l}`,dataType:"text",cell:Ke})))||[],{header:"Lifetime GGR",accessorKey:"totalGGR",dataType:"text",cell:Ke},{header:"7 Day Average",accessorKey:"weekAverage",dataType:"text",cell:Ke},{header:"Daily Average Bet",accessorKey:"dailyAvgBet",dataType:"text",cell:({getValue:l})=>{const d=l();return d?`${Number(d.toFixed(2)).toLocaleString()}`:"0.00"}},{header:"7 Day Average Bet",accessorKey:"weekAvgBet",dataType:"text",cell:({getValue:l})=>{const d=l();return d?`${Number(d.toFixed(2)).toLocaleString()}`:"0.00"}},{header:"7 Day Change",accessorKey:"weekChangeColor",dataType:"text"},{header:"Lifetime Payout",accessorKey:"LifeTimePayout",dataType:"text",cell:({getValue:l})=>{const d=l();return d?`${d}%`:"0.00%"}}],[I]),ge=o.useMemo(()=>{const l=[];return D.forEach(d=>{const S={quarter:d};b.forEach(E=>{const L=E[`totalGGR_${d}`]!==void 0?Number(E[`totalGGR_${d}`].toFixed(2)).toLocaleString():0;S[E.name]=L}),l.push(S)}),l},[D,b]),Ae=o.useMemo(()=>{const l=x.map(d=>d.name);return[{header:"Quarter",accessorKey:"quarter",dataType:"text"},...l.map(d=>({header:d,accessorKey:d,dataType:"number",cell:S=>S.getValue()??0}))]},[x]),de=o.useMemo(()=>[{header:"Game Name",accessorKey:"gameName",dataType:"text",cell:({getValue:l})=>l()},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Total Users"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"totalUsers",dataType:"text",cell:({row:l})=>{const d=l.original.totalUsersToday,S=l.original.totalUsersPrevious,L=d>S?"#4caf50":"#f44336";return e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:L},children:Number(d).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(S).toLocaleString()})})]})}},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"CWPP"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"cwpp",dataType:"text",cell:({row:l})=>{const d=l.original.cwppToday,S=l.original.cwppPrevious,L=d>S?"#4caf50":"#f44336";return e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:L},children:Number(d.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(S.toFixed(2)).toLocaleString()})})]})}},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"SPU"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"spu",dataType:"text",cell:({row:l})=>{const d=l.original.spuToday,S=l.original.spuPrevious,L=d>S?"#4caf50":"#f44336";return e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:L},children:Number(d.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(S.toFixed(2)).toLocaleString()})})]})}},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Ave Bet"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"aveBet",dataType:"text",cell:({row:l})=>{const d=l.original.aveBetToday,S=l.original.aveBetPrevious,L=d>S?"#4caf50":"#f44336";return e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:L},children:Number(d.toFixed(2)).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(S.toFixed(2)).toLocaleString()})})]})}},{header:e.jsxs("div",{style:{textAlign:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Total Coins"}),e.jsxs("div",{style:{display:"flex",fontSize:"0.8em"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#1976d2"},children:"Latest"})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:"#666"},children:"Previous"})})]})]}),accessorKey:"totalCoins",dataType:"text",cell:({row:l})=>{const d=l.original.totalCoinsToday,S=l.original.totalCoinsPrevious,L=d>S?"#4caf50":"#f44336";return e.jsxs("div",{style:{display:"flex",justifyContent:"center",border:"1px solid #d0d0d0",padding:"8px"},children:[e.jsx("div",{style:{flex:1,textAlign:"center",borderRight:"1px solid #d0d0d0",paddingRight:"8px"},children:e.jsx("span",{style:{fontWeight:"bold",color:L},children:Number(d).toLocaleString()})}),e.jsx("div",{style:{flex:1,textAlign:"center",paddingLeft:"8px"},children:e.jsx("span",{style:{color:"#666"},children:Number(S).toLocaleString()})})]})}}],[]);return e.jsxs(ne,{item:!0,xs:12,lg:12,children:[e.jsxs(ne,{container:!0,spacing:{xs:1,sm:2},mb:5,children:[e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"column",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Lifetime GGR - "}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((l,d)=>l+d.totalGGR,0)).toLocaleString()})]}),e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Highest Daily GGR Record - "}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",sx:{fontWeight:"bold",color:"primary.main"},children:Number(z.value).toLocaleString()})]}),e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Date - "}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",sx:{fontWeight:"bold"},children:z.date?z.date.split("T")[0]:""})]})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"Daily Total GGR -"}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((l,d)=>l+d.dailyTotalGGR,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"7 Day Average GGR -"}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((l,d)=>l+d.weekAverage,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:"7 Day Change -"}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:((b.reduce((l,d)=>l+d.weekSum1,0)-b.reduce((l,d)=>l+d.weekSum2,0))/b.reduce((l,d)=>l+d.weekSum2,0)*100).toFixed(2)+"%"})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Projected GGR ${I.reduce((l,d)=>Math.max(l,d),-1/0)} -`}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((l,d)=>l+d.projectedTotalGGR,0)).toLocaleString()})]})})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:D==null?void 0:D.map((l,d)=>e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"start",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Total GGR ${l} - `}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((S,E)=>S+(E[`totalGGR_${l}`]||0),0)).toLocaleString()})]},d))})}),e.jsx(ne,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(he,{sx:{height:"100%",display:"flex",alignItems:"center"},children:I==null?void 0:I.map((l,d)=>e.jsxs(j,{direction:"row",spacing:1,alignItems:"center",justifyContent:"start",sx:{textAlign:"center"},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",sx:{fontWeight:"bold"},children:`Total Revenue ${l} - `}),e.jsx(m,{variant:{xs:"h6",sm:"h6"},textAlign:"center",children:Number(b.reduce((S,E)=>S+(E[`totalGGR_${l}`]||0),0)).toLocaleString()})]},d))})})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Games Data"}),e.jsx(be,{data:b,columns:le})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Latest Report vs Previous Report Comparison"}),e.jsx(be,{data:H,columns:de})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"TOTAL GGR - QUARTER"}),e.jsx(be,{data:ge,columns:Ae,setData:()=>{}})]})]})}const we={chart:{height:100,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight",width:3},xaxis:{categories:[]}},Ls=()=>{const g=wt(),[x,h]=o.useState(g.pathname==="/admin/report"),{user:ee}=Mt();o.useState(0);const[O,b]=o.useState(!1),[X,I]=o.useState(!1),[F,D]=o.useState([]),[C,z]=o.useState([]),[w,H]=o.useState([]),[oe,le]=o.useState(!0),[ge,Ae]=o.useState(""),[de,l]=o.useState(""),[d,S]=o.useState(!1),[E,L]=o.useState([]),[Ge,Re]=o.useState([]),[fe,Ue]=o.useState([]),[ce,Y]=o.useState([]),[V,r]=o.useState([]),[a,P]=o.useState(we),[ae,Ce]=o.useState([]),[xe,ye]=o.useState(we),[Ie,Fe]=o.useState(we),[me,K]=o.useState(we),[re,We]=o.useState(we),[Le,ke]=o.useState(we),[Ye,qe]=o.useState(we),[Qe,_e]=o.useState([]),[Ne,De]=o.useState(new Date().toISOString().split("T")[0]),[Pe,Te]=o.useState([]),[Be,y]=o.useState(we),[J,tt]=o.useState([]),[Gt,st]=o.useState([]),[Rt,nt]=o.useState([]),[Ct,at]=o.useState([]),[A,Ve]=o.useState([1,37]),[Pt,Tt]=o.useState(0),At=os((G,M)=>{Ve(M)},300),Wt=(G,M)=>{Ve(M),At(G,M)},Lt=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"Launch Date",accessorKey:"launchDate",dataType:"date",cell:({getValue:G,row:M,table:v})=>{var i,c;const R=(i=v==null?void 0:v.options)==null?void 0:i.meta,je=(c=R==null?void 0:R.selectedRow)==null?void 0:c[M.id],Z=G(),pe=Z?new Date(Z).toISOString().split("T")[0]:"";return je?e.jsx("input",{type:"date",value:pe,onChange:W=>R==null?void 0:R.updateData(M.index,"launchDate",W.target.value)}):pe}},{header:"Actions",id:"edit",cell:St,meta:{className:"cell-center"}}],[]),kt=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"TOTAL GGR",accessorKey:"data",dataType:"text",cell:({getValue:G,row:M,table:v})=>{const R=G();return`${(Number(R[R.length-1])||0).toLocaleString()}`}}],[]),Ot=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"},{header:"Coins Wagered",accessorKey:"CW",dataType:"text"},{header:"Lifetime Payout",accessorKey:"LP",dataType:"text"}],[]),Et=o.useMemo(()=>[{header:"Game",accessorKey:"name",dataType:"text"},{header:"GGR",accessorKey:"ggrEuro",dataType:"text"},{header:"SPINS",accessorKey:"spins",dataType:"text"},{header:"USERS",accessorKey:"uniquePlayers",dataType:"text"},{header:"SPU",accessorKey:"SPU",dataType:"text"},{header:"CWPP",accessorKey:"CWPP",dataType:"text"}],[]),[Xe,Ut]=o.useState(null);o.useEffect(()=>{const G=[];for(let i=0;i<7;i++){const c=new Date;c.setDate(c.getDate()-i),G.push(c.toISOString().split("T")[0])}const M=C.reduce((i,{game:c,summary:W})=>{if(!i[c]){const N=w.find(U=>U.name===c);i[c]={...N,maxDate:W}}const q=new Date(i[c].maxDate)<new Date(W);return i[c].maxDate=q?W:i[c].maxDate,Ut(i[c].maxDate),i},{}),v={},je=Object.values(C.reduce((i,{game:c,summary:W,ggrEuro:q,spins:N,uniquePlayers:U,betsEuro:B,winsEuro:$})=>{i[c]||(i[c]={name:c,ggrEuro:[],spins:[],uniquePlayers:[],SPU:[],CWPP:[],CW:[],LP:[]});const k=w.find($e=>$e.name===c);new Date(k==null?void 0:k.launchDate)<new Date(W),v[c]&&new Date(v[c])<new Date(W.split("T")[0])?v[c]=W.split("T")[0]:v[c]||(v[c]=W.split("T")[0]);const _=new Date(M[c].maxDate)||new Date,Oe=new Date(_);return Oe.setDate(Oe.getDate()-6),new Date(W)>=Oe&&new Date(W)<=_&&(i[c].ggrEuro.push(q),i[c].spins.push(N),i[c].uniquePlayers.push(U),i[c].SPU.push(N/U),i[c].CWPP.push(B/U),i[c].CW.push(B),i[c].LP.push($/B)),i},{})).map(i=>{const c=i.ggrEuro,W=i.spins,q=i.uniquePlayers,N=i.SPU,U=i.CWPP,B=i.LP,$=i.CW;return{name:i.name,ggrEuro:Number((c.length>0?c.reduce((k,_)=>k+_,0)/c.length:0).toFixed(2)).toLocaleString(),spins:Number((W.length>0?W.reduce((k,_)=>k+_,0)/W.length:0).toFixed(2)).toLocaleString(),uniquePlayers:Number((q.length>0?q.reduce((k,_)=>k+_,0)/q.length:0).toFixed(2)).toLocaleString(),SPU:Number((N.length>0?N.reduce((k,_)=>k+_,0)/N.length:0).toFixed(2)).toLocaleString(),CWPP:Number((U.length>0?U.reduce((k,_)=>k+_,0)/U.length:0).toFixed(2)).toLocaleString(),CW:Number(($.length>0?$.reduce((k,_)=>k+_,0)/$.length:0).toFixed(2)).toLocaleString(),LP:Number((B.length>0?B.reduce((k,_)=>k+_,0)/B.length:0).toFixed(2)).toLocaleString()}});Ue(je);const pe=Object.values(C.reduce((i,{game:c,summary:W,ggrEuro:q,spins:N,uniquePlayers:U,betsEuro:B})=>{i[c]||(i[c]={name:c,ggrEuros:[],ggrEuro:0,ggrEuro2:0,spins:0,spins2:0,uniquePlayers:0,uniquePlayers2:0,SPU:0,SPU2:0,CWPP:0,CWPP2:0,arrSpins:[],arrSpins2:[]});const $=new Date(v[c]);$.setDate($.getDate()-7);const k=new Date(v[c]);return k.setDate(k.getDate()-14),$<new Date(W)?(i[c].ggrEuros.push(q),i[c].arrSpins.push(N),i[c].ggrEuro+=q,i[c].spins+=N,i[c].uniquePlayers+=U,i[c].SPU+=N/U,i[c].CWPP+=B/U):k<new Date(W)&&new Date(W)<=$&&(i[c].arrSpins2.push(N),i[c].ggrEuro2+=q,i[c].spins2+=N,i[c].uniquePlayers2+=U,i[c].SPU2+=N/U,i[c].CWPP2+=B/U),i},{})).map(i=>{const c=(i.ggrEuro-i.ggrEuro2)/(i.ggrEuro2||1),W=(i.spins-i.spins2)/(i.spins2||1),q=(i.uniquePlayers-i.uniquePlayers2)/(i.uniquePlayers2||1),N=(i.SPU-i.SPU2)/(i.SPU2||1),U=(i.CWPP-i.CWPP2)/(i.CWPP2||1);return{name:i.name,ggrEuro:e.jsx("span",{style:{color:c>=0?"green":"red"},children:`${(c*100).toFixed(2)} %`}),spins:e.jsx("span",{style:{color:W>=0?"green":"red"},children:`${(W*100).toFixed(2)} %`}),uniquePlayers:e.jsx("span",{style:{color:q>=0?"green":"red"},children:`${(q*100).toFixed(2)} %`}),SPU:e.jsx("span",{style:{color:N>=0?"green":"red"},children:`${(N*100).toFixed(2)} %`}),CWPP:e.jsx("span",{style:{color:U>=0?"green":"red"},children:`${(U*100).toFixed(2)} %`})}});Y(pe)},[Ge,C,w]);const rt=async()=>{var G,M,v;try{const R=await Me.get("api/reports");if(D(R.data.data),H(R.data.games),R.data.games.length>0){const je=R.data.games.length>0?(M=(G=R.data.games)==null?void 0:G.reduce((t,n)=>new Date(n.launchDate)<new Date(t.launchDate)?n:t).launchDate)==null?void 0:M.split("T")[0]:new Date().toISOString().split("T")[0],Z=[...R.data.data].filter(t=>new Date(t.summary)>=new Date(je));Z.sort((t,n)=>new Date(t.summary)-new Date(n.summary));const pe=[],i=Object.values(Z.reduce((t,{game:n,ggrEuro:u,summary:f})=>{t[n]||(t[n]={name:n,data:[],totalGGR:0});const p=R.data.games.find(T=>T.name===n);return t[n].totalGGR+=new Date(p==null?void 0:p.launchDate)>new Date(f)?0:u,t[n].data.push(t[n].totalGGR.toFixed(2)),pe.push(f.slice(0,10)),t},{})),c=Z.reduce((t,{summary:n,betsEuro:u,game:f})=>{const p=w.find(T=>T.name===f);if(new Date(p==null?void 0:p.launchDate)<=new Date(n)){const T=n.slice(0,10);t[T]||(t[T]=0),t[T]+=u}return t},{}),W=[{name:"Total Coins Wagered",data:Object.entries(c).sort(([t],[n])=>new Date(t)-new Date(n)).map(([t,n])=>Number(n.toFixed(2)))}];let q=0;const N=i.map(t=>(q=Math.max(q,t.data.length),{...t,data:Se(t.data)})),U=W.map(t=>{const n=A[0]-1,u=A[1]-1;return t.data=t.data.slice(n,u+1),t});Tt(q),Ve([1,q]),r(N),Ce(U);const B=[...new Set(pe)];Re(B);const $=[];for(let t=A[0];t<=A[1];t++)$.push(`Day ${t}`);const k=(v=R.data.data)==null?void 0:v.map(t=>({...t,SPU:t.spins/t.uniquePlayers,CWPP:t.betsEuro/t.uniquePlayers}));z(k);const _=[];for(let t=0;t<14;t++)_.push(`Day ${t+1}`);y(t=>({...t,xaxis:{categories:_,labels:{show:!1}}})),Te(vt(i,R.data.games,B));const $e=Object.values(Z.reduce((t,{game:n,summary:u,uniquePlayers:f})=>{t[n]||(t[n]={name:n,data:[]});const p=R.data.games.find(T=>T.name===n);return new Date(p==null?void 0:p.launchDate)<=new Date(u)&&t[n].data.push(f),t},{})).map(t=>{const n=A[0]-1,u=A[1]-1;return t.data=t.data.slice(n,u+1),t});tt($e);const it=t=>{if(t.length<6)return[];let n=new Array(5).fill(0);for(let u=5;u<t.length;u++){let f=t.slice(u-4,u+1).reduce((Q,ue)=>Q+ue,0),p=t.slice(u-5,u).reduce((Q,ue)=>Q+ue,0),T=((f-p)/(p||1)*100).toFixed(2);n.push(T)}return n},lt=Object.values(Z.reduce((t,{game:n,summary:u,uniquePlayers:f})=>{t[n]||(t[n]={name:n,data:[]});const p=R.data.games.find(T=>T.name===n);return new Date(p==null?void 0:p.launchDate)<=new Date(u)&&t[n].data.push(f),t},{})).map(t=>({...t,data:it(t.data)})).map(t=>{const n=A[0]-1,u=A[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:t.data}});st(lt);const ct=Object.values(Z.reduce((t,{game:n,spins:u,summary:f})=>{t[n]||(t[n]={name:n,data:[]});const p=R.data.games.find(T=>T.name===n);return t[n].data.push(new Date(p==null?void 0:p.launchDate)>new Date(f)?0:u),t},{})).map(t=>{const n=A[0]-1,u=A[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:Se(t.data)}});nt(ct);const Ze=Object.values(Z.reduce((t,{game:n,spins:u,uniquePlayers:f,summary:p})=>{t[n]||(t[n]={name:n,data:[]});const T=R.data.games.find(Q=>Q.name===n);return t[n].data.push(new Date(T==null?void 0:T.launchDate)>new Date(p)?0:(u/f).toFixed(2)),t},{})).map(t=>{const n=A[0]-1,u=A[1]-1;return t.data=t.data.slice(n,u+1),{...t,data:Se(t.data)}});L($),P(t=>({...t,xaxis:{categories:$,labels:{show:!1}}})),ye(t=>({...t,xaxis:{categories:$,labels:{show:!1}},title:{text:"Daily Total Coins Wagered (All Games)",align:"center"},yaxis:{title:{text:"Total Coins"}}})),Fe(t=>({...t,xaxis:{categories:$,labels:{show:!1}}})),K(t=>({...t,xaxis:{categories:$,labels:{show:!1}}})),We(t=>({...t,xaxis:{categories:$,labels:{show:!1}}})),ke(t=>({...t,xaxis:{categories:$,labels:{show:!1}}})),at(Ze);const Je=Object.values(Z.reduce((t,{game:n,summary:u,ggrEuro:f})=>{t[n]||(t[n]={name:n,data:[]});const p=R.data.games.find(Ee=>Ee.name===n),T=Z.filter(Ee=>Ee.game===n).reduce((Ee,ut)=>new Date(ut.summary)>new Date(Ee)?ut.summary:Ee,"1970-01-01"),Q=new Date(T),ue=new Date(Q);return ue.setDate(ue.getDate()-6),new Date(u)>=ue&&new Date(u)<=Q&&t[n].data.push(f),t},{})),et=Z.reduce((t,n)=>new Date(n.summary)>new Date(t)?n.summary:t,"1970-01-01"),ze=new Date(et),s=[];for(let t=6;t>=0;t--){const n=new Date(ze);n.setDate(n.getDate()-t),s.push(n.toISOString().split("T")[0])}_e(Je),qe(t=>({...t,xaxis:{categories:s,labels:{show:!0}},title:{text:"7 Day GGR",align:"center"}}))}}catch{}},It=async()=>{const G=localStorage.getItem("reportToken");le(G!=="true"),rt()};o.useEffect(()=>{It()},[]);const Ft=async G=>{if(G.target.files.length>0){const M=G.target.files[0];if(!M){alert("Please select a file first.");return}b(!0);const v=new FormData;v.append("file",M);try{const R=await Me.post("api/reports/upload",v,{headers:{"Content-Type":"multipart/form-data"}});He({open:!0,message:"Excel uploaded successfully!",variant:"alert",alert:{color:"success"}}),rt(),b(!0)}catch(R){console.error("Upload Error:",R),alert("Error uploading file.")}finally{b(!1),G.target.value=""}}},Nt=async()=>{I(!0);try{const G=await Me.get("api/reports/download",{responseType:"blob"}),M=window.URL.createObjectURL(new Blob([G.data])),v=document.createElement("a");v.href=M,v.setAttribute("download","report.xlsx"),document.body.appendChild(v),v.click(),document.body.removeChild(v)}catch(G){console.error("Download Error:",G),He({open:!0,message:"Excel not exists!",variant:"alert",alert:{color:"error"}})}finally{I(!1)}};o.useEffect(()=>{var G;if(w.length>0){const M=w.length>0?(G=w==null?void 0:w.reduce((s,t)=>new Date(t.launchDate)<new Date(s.launchDate)?t:s).launchDate)==null?void 0:G.split("T")[0]:new Date().toISOString().split("T")[0],v=[...F].filter(s=>new Date(s.summary)>=new Date(M));v.sort((s,t)=>new Date(s.summary)-new Date(t.summary));const R=[],je=Object.values(v.reduce((s,{game:t,ggrEuro:n,summary:u})=>{s[t]||(s[t]={name:t,data:[],totalGGR:0});const f=w.find(p=>p.name===t);return s[t].totalGGR+=new Date(f==null?void 0:f.launchDate)>new Date(u)?0:n,s[t].data.push(s[t].totalGGR.toFixed(2)),R.push(u.slice(0,10)),s},{})),Z=v.reduce((s,{summary:t,betsEuro:n,game:u})=>{const f=w.find(p=>p.name===u);if(new Date(f==null?void 0:f.launchDate)<=new Date(t)){const p=t.slice(0,10);s[p]||(s[p]=0),s[p]+=n}return s},{}),pe=[{name:"Total Coins Wagered",data:Object.entries(Z).sort(([s],[t])=>new Date(s)-new Date(t)).map(([s,t])=>Number(t.toFixed(2)))}];let i=0;const W=je.map(s=>(i=Math.max(i,s.data.length),{...s,data:Se(s.data)})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),s}),N=pe.map(s=>(i=Math.max(i,s.data.length),{...s,data:Se(s.data)})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),s});r(W),Ce(N);const U=[...new Set(R)];Re(U);const B=[];for(let s=A[0];s<=A[1];s++)B.push(`Day ${s}`);const $=F==null?void 0:F.map(s=>({...s,SPU:s.spins/s.uniquePlayers,CWPP:s.betsEuro/s.uniquePlayers}));z($);const k=[];for(let s=0;s<14;s++)k.push(`Day ${s+1}`);y(s=>({...s,xaxis:{categories:k,labels:{show:!1}}})),Te(vt(je));const Oe=Object.values(v.reduce((s,{game:t,summary:n,uniquePlayers:u})=>{s[t]||(s[t]={name:t,data:[]});const f=w.find(p=>p.name===t);return new Date(f==null?void 0:f.launchDate)<=new Date(n)&&s[t].data.push(u),s},{})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),s});tt(Oe);const $e=s=>{if(s.length<6)return[];let t=new Array(5).fill(0);for(let n=5;n<s.length;n++){let u=s.slice(n-4,n+1).reduce((T,Q)=>T+Q,0),f=s.slice(n-5,n).reduce((T,Q)=>T+Q,0),p=((u-f)/(f||1)*100).toFixed(2);t.push(p)}return t},ot=Object.values(v.reduce((s,{game:t,summary:n,uniquePlayers:u})=>{s[t]||(s[t]={name:t,data:[]});const f=w.find(p=>p.name===t);return new Date(f==null?void 0:f.launchDate)<=new Date(n)&&s[t].data.push(u),s},{})).map(s=>({...s,data:$e(s.data)})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:s.data}});st(ot);const dt=Object.values(v.reduce((s,{game:t,spins:n,summary:u})=>{s[t]||(s[t]={name:t,data:[]});const f=w.find(p=>p.name===t);return s[t].data.push(new Date(f==null?void 0:f.launchDate)>new Date(u)?0:n),s},{})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:Se(s.data)}});nt(dt);const xt=Object.values(v.reduce((s,{game:t,spins:n,uniquePlayers:u,summary:f})=>{s[t]||(s[t]={name:t,data:[]});const p=w.find(T=>T.name===t);return s[t].data.push(new Date(p==null?void 0:p.launchDate)>new Date(f)?0:(n/u).toFixed(2)),s},{})).map(s=>{const t=A[0]-1,n=A[1]-1;return s.data=s.data.slice(t,n+1),{...s,data:Se(s.data)}});L(B),P(s=>({...s,xaxis:{categories:B,labels:{show:!1}}})),ye(s=>({...s,xaxis:{categories:B,labels:{show:!1}},title:{text:"Daily Total Coins Wagered (All Games)",align:"center"},yaxis:{title:{text:"Total Coins"}}})),Fe(s=>({...s,xaxis:{categories:B,labels:{show:!1}}})),K(s=>({...s,xaxis:{categories:B,labels:{show:!1}}})),We(s=>({...s,xaxis:{categories:B,labels:{show:!1}}})),ke(s=>({...s,xaxis:{categories:B,labels:{show:!1}}})),at(xt);const Ze=Object.values(v.reduce((s,{game:t,summary:n,ggrEuro:u})=>{s[t]||(s[t]={name:t,data:[]}),w.find(Q=>Q.name===t);const f=v.filter(Q=>Q.game===t).reduce((Q,ue)=>new Date(ue.summary)>new Date(Q)?ue.summary:Q,"1970-01-01"),p=new Date(f),T=new Date(p);return T.setDate(T.getDate()-6),new Date(n)>=T&&new Date(n)<=p&&s[t].data.push(u),s},{})),Je=v.reduce((s,t)=>new Date(t.summary)>new Date(s)?t.summary:s,"1970-01-01"),et=new Date(Je),ze=[];for(let s=6;s>=0;s--){const t=new Date(et);t.setDate(t.getDate()-s),ze.push(t.toISOString().split("T")[0])}_e(Ze),qe(s=>({...s,xaxis:{categories:ze,labels:{show:!0}},title:{text:"7 Day GGR",align:"center"}}))}},[F,Ne,w,A]);const Bt=async()=>{try{const G=await Me.post("api/account/check",{email:x?ee.email:de,password:ge});localStorage.setItem("reportToken","true"),S(!1),le(!1)}catch{S(!0)}};return e.jsxs(Qt,{children:[e.jsx(he,{children:!oe&&e.jsxs(ne,{item:!0,xs:12,lg:12,children:[e.jsxs(j,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"space-between",sx:{flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"}},children:[e.jsx(ne,{item:!0,children:e.jsxs(j,{spacing:1,children:[e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:"center",children:[e.jsxs("label",{htmlFor:"contained-button-file",children:[e.jsx(bt,{accept:".xls,.xlsx",id:"contained-button-file",type:"file",onChange:Ft}),e.jsx(yt,{loading:O,variant:"contained",component:"span",children:"Upload Excel"})]}),e.jsx(yt,{sx:{marginLeft:{xs:0,sm:"10px"},marginTop:{xs:1,sm:0}},loading:X,variant:"contained",component:"span",onClick:Nt,children:"Download Excel"})]}),e.jsxs(j,{direction:{xs:"column",sm:"row"},spacing:1,alignItems:"center",children:[e.jsx(m,{variant:{xs:"subtitle2",sm:"subtitle1"},color:"textSecondary",children:"Latest Report Date:"}),e.jsx(m,{variant:{xs:"h6",sm:"h5"},sx:{color:"red",fontWeight:"bold"},children:Xe==null?void 0:Xe.split("T")[0]})]})]})}),e.jsxs(ne,{gap:2,display:"flex",flexDirection:"row",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",children:"LAUNCH"}),e.jsxs(j,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx(se,{Link:!0,to:x?"/admin/report-type/users/launch":"/report-type/users/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Users"})}),e.jsx(se,{to:x?"/admin/report-type/totalGGR/launch":"/report-type/totalGGR/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total GGR"})}),e.jsx(se,{to:x?"/admin/report-type/spinsPerUser/launch":"/report-type/spinsPerUser/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Spins Per User"})}),e.jsx(se,{to:x?"/admin/report-type/totalCoins/launch":"/report-type/totalCoins/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total Coins"})}),e.jsx(se,{to:x?"/admin/report-type/cwpp/launch":"/report-type/cwpp/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"CWPP"})}),e.jsx(se,{to:x?"/admin/report-type/totalCoinsWageredPerDay/launch":"/report-type/totalCoinsWageredPerDay/launch",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"TCWPD"})})]})]})]}),e.jsx(j,{mb:3,spacing:1,display:"flex",flexDirection:"row",alignItems:"center",gap:2,justifyContent:"end",sx:{flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"}},children:e.jsxs(ne,{gap:2,display:"flex",flexDirection:"row",alignItems:"center",sx:{flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2}},children:[e.jsx(m,{variant:{xs:"h6",sm:"h5"},textAlign:"center",children:"EXCLUSIVE"}),e.jsxs(j,{direction:"row",spacing:1,flexWrap:"wrap",justifyContent:"center",children:[e.jsx(se,{to:x?"/admin/report-type/users/exclusive":"/report-type/users/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Users"})}),e.jsx(se,{to:x?"/admin/report-type/totalGGR/exclusive":"/report-type/totalGGR/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total GGR"})}),e.jsx(se,{to:x?"/admin/report-type/spinsPerUser/exclusive":"/report-type/spinsPerUser/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Spins Per User"})}),e.jsx(se,{to:x?"/admin/report-type/totalCoins/exclusive":"/report-type/totalCoins/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"Total Coins"})}),e.jsx(se,{to:x?"/admin/report-type/cwpp/exclusive":"/report-type/cwpp/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"CWPP"})}),e.jsx(se,{to:x?"/admin/report-type/totalCoinsWageredPerDay/exclusive":"/report-type/totalCoinsWageredPerDay/exclusive",children:e.jsx(te,{loading:O,variant:"contained",component:"span",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"6px 12px",sm:"8px 16px"}},children:"TCWPD"})})]})]})}),e.jsx(j,{mb:5,spacing:3,children:e.jsx(ls,{data:F,games:w})}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Launch Information"}),e.jsx(be,{data:w,columns:Lt,setData:H})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"TOTAL REVENUE"}),e.jsx(be,{data:V,columns:kt,setData:H})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 Day Averages"}),e.jsx(be,{data:fe,columns:Ot,setData:H})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 Day Change (%) "}),e.jsx(be,{data:ce,columns:Et,setData:H})]}),e.jsxs(j,{mb:5,direction:{xs:"column",sm:"row"},spacing:{xs:2,sm:3},alignItems:"center",justifyContent:"center",children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},children:"Time Period"}),e.jsx(rs,{getAriaLabel:()=>"Temperature range",value:A,max:Pt,min:1,onChange:Wt,valueLabelDisplay:"auto",valueLabelFormat:G=>`Day ${G}`,sx:{width:{xs:"90%",sm:"60%",md:"40%"}}})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Total GGR"}),e.jsx(ve,{options:a,series:V,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"7 DAY GGR"}),e.jsx(ve,{options:Ye,series:Qe,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"Total Coins Wagered"}),e.jsx(ve,{options:xe,series:ae,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"USERS"}),e.jsx(ve,{options:Ie,series:J,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"USER 5 Day Change (%)"}),e.jsx(ve,{options:me,series:Gt,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"SPINS PER DAY"}),e.jsx(ve,{options:re,series:Rt,type:"line",height:500})]}),e.jsxs(j,{mb:5,spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"SPINS PER PLAYER"}),e.jsx(ve,{options:Le,series:Ct,type:"line",height:500})]}),e.jsxs(j,{spacing:{xs:2,sm:3},children:[e.jsx(m,{variant:{xs:"h4",sm:"h3",md:"h2"},textAlign:"center",children:"14 DAY LAUNCH"}),e.jsx(ve,{options:Be,series:Pe,type:"line",height:500})]})]})}),e.jsx(qt,{open:oe,maxWidth:"xs",children:e.jsxs(_t,{sx:{p:1,py:1.5},children:[x?e.jsx(pt,{children:"Confirm Password"}):e.jsx(pt,{children:"Login"}),e.jsxs(zt,{children:[e.jsxs(j,{spacing:1,mb:2,children:[!x&&e.jsx(ht,{name:"email",placeholder:"Email",type:"email",fullWidth:!0,variant:"outlined",value:de,onChange:G=>l(G.target.value)}),e.jsx(ht,{name:"password",placeholder:"Password",type:"password",fullWidth:!0,variant:"outlined",value:ge,onChange:G=>Ae(G.target.value)})]}),d&&x&&e.jsx(m,{variant:"h6",color:"red",children:"Password is wrong."}),d&&!x&&e.jsx(m,{variant:"h6",color:"red",children:"Credentials is wrong."}),"          "]}),e.jsx(Ht,{children:e.jsx(te,{variant:"contained",onClick:Bt,children:"Confirm"})})]})})]})};export{be as ReactTable,Ls as default,Ke as separateByComma};
