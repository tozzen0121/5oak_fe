import{y as v,r as c,z as C,j as e,G as s,M as S,a2 as y,p as l,aQ as o,D as m,a6 as F,cF as N,L as D,d as j,x as g,H as I,ai as b,g as k}from"./index-10ef80df.js";import{S as z}from"./SingleFile-12943576.js";import"./PlaceholderContent-c7566883.js";function G(){const{id:a}=v(),[d,u]=c.useState(""),[x,p]=c.useState(""),[i,h]=c.useState(null),f=C(),w=async()=>{const t=new FormData;t.append("name",d),t.append("description",x),(i==null?void 0:i.length)>0&&i[0]instanceof File&&t.append("image",i[0]);try{a?await g.putForm(`/api/news/${a}`,t):await g.postForm("/api/news",t),I({open:!0,message:a?"News updated":"New News created",variant:"alert",alert:{color:"success"},anchorOrigin:{vertical:"top",horizontal:"right"},transition:"SlideLeft"}),f("/admin/news")}catch{}};return c.useEffect(()=>{a&&(async n=>{try{const{data:r}=await b(`/api/news/${n}`);u(r.name),p(r.description),h([{preview:k(r.imagePath)}])}catch{}})(a)},[a]),e.jsx(s,{container:!0,spacing:3,justifyContent:"center",children:e.jsx(s,{item:!0,xs:12,md:6,lg:6,children:e.jsx(s,{container:!0,spacing:3,children:e.jsx(s,{item:!0,xs:12,children:e.jsxs(S,{title:"",content:!1,children:[e.jsx(y,{children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(s,{item:!0,xs:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(o,{children:"Article Name"}),e.jsx(m,{fullWidth:!0,placeholder:"Article name",onChange:t=>u(t.target.value),value:d})]})}),e.jsx(s,{item:!0,xs:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(o,{children:"Description"}),e.jsx(m,{fullWidth:!0,placeholder:"Description",onChange:t=>p(t.target.value),value:x,multiline:!0,rows:4})]})}),e.jsx(s,{item:!0,xs:12,children:e.jsxs(l,{spacing:1,children:[e.jsx(o,{children:"Article Image"}),e.jsx(s,{item:!0,xs:12,container:!0,justifyContent:"center",children:e.jsx(s,{item:!0,xs:7,children:e.jsx(z,{setFieldValue:(t,n)=>h(n),file:i})})})]})})]})}),e.jsx(F,{}),e.jsx(N,{children:e.jsxs(l,{direction:"row",spacing:1,justifyContent:"flex-end",sx:{width:1,px:1.5,py:.75},children:[e.jsx(D,{to:"/admin/news",children:e.jsx(j,{color:"error",size:"small",children:"Cancel"})}),e.jsx(j,{variant:"contained",size:"small",onClick:()=>w(),children:"Submit"})]})})]})})})})})}export{G as default};
